---
title: Asignación espacial
description: La asignación espacial proporciona una representación detallada de las superficies del mundo real en el entorno alrededor de HoloLens.
author: mattzmsft
ms.author: mazeller
ms.date: 03/21/2018
ms.topic: article
keywords: asignación espacial, HoloLens, realidad mixta, reconstrucción de la superficie, malla, casco de realidad mixta, casco de realidad mixta de Windows, casco de realidad virtual, HoloLens, MRTK, kit de herramientas de Mixed Reality, comprensión de la escena, malla mundial, oclusión, física, navegación, observador de la superficie, representación, procesamiento de malla
ms.openlocfilehash: 941e72b441771849e48e8ebc4924605750804831
ms.sourcegitcommit: c0ba7d7bb57bb5dda65ee9019229b68c2ee7c267
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 05/19/2021
ms.locfileid: "110143719"
---
# <a name="spatial-mapping"></a><span data-ttu-id="ff157-104">Asignación espacial</span><span class="sxs-lookup"><span data-stu-id="ff157-104">Spatial mapping</span></span>

<span data-ttu-id="ff157-105">La asignación espacial proporciona una representación detallada de las superficies del mundo real en el entorno alrededor de HoloLens, lo que permite a los desarrolladores crear una experiencia de realidad mixta convincente.</span><span class="sxs-lookup"><span data-stu-id="ff157-105">Spatial mapping provides a detailed representation of real-world surfaces in the environment around the HoloLens, allowing developers to create a convincing mixed reality experience.</span></span> <span data-ttu-id="ff157-106">Al combinar el mundo real con el mundo virtual, una aplicación puede hacer que los hologramas parezcan reales.</span><span class="sxs-lookup"><span data-stu-id="ff157-106">By merging the real world with the virtual world, an application can make holograms seem real.</span></span> <span data-ttu-id="ff157-107">Las aplicaciones también se pueden alinear de forma más natural con las expectativas del usuario proporcionando interacciones y comportamientos conocidos del mundo real.</span><span class="sxs-lookup"><span data-stu-id="ff157-107">Applications can also more naturally align with user expectations by providing familiar real-world behaviors and interactions.</span></span>

<br>

>[!VIDEO https://www.youtube.com/embed/zff2aQ1RaVo]

## <a name="device-supports"></a><span data-ttu-id="ff157-108">Compatibilidad con dispositivos</span><span class="sxs-lookup"><span data-stu-id="ff157-108">Device supports</span></span>

<table>
    <colgroup>
    <col width="25%" />
    <col width="25%" />
    <col width="25%" />
    <col width="25%" />
    </colgroup>
    <tr>
        <td><span data-ttu-id="ff157-109"><strong>Característica</strong></span><span class="sxs-lookup"><span data-stu-id="ff157-109"><strong>Feature</strong></span></span></td>
        <td><span data-ttu-id="ff157-110"><a href="/hololens/hololens1-hardware"><strong>HoloLens (1.ª generación)</strong></a></span><span class="sxs-lookup"><span data-stu-id="ff157-110"><a href="/hololens/hololens1-hardware"><strong>HoloLens (1st gen)</strong></a></span></span></td>
        <td><span data-ttu-id="ff157-111"><a href="https://docs.microsoft.com/hololens/hololens2-hardware"><strong>HoloLens 2</strong></span><span class="sxs-lookup"><span data-stu-id="ff157-111"><a href="https://docs.microsoft.com/hololens/hololens2-hardware"><strong>HoloLens 2</strong></span></span></td>
        <td><span data-ttu-id="ff157-112"><a href="../discover/immersive-headset-hardware-details.md"><strong>Cascos envolventes</strong></a></span><span class="sxs-lookup"><span data-stu-id="ff157-112"><a href="../discover/immersive-headset-hardware-details.md"><strong>Immersive headsets</strong></a></span></span></td>
    </tr>
     <tr>
        <td><span data-ttu-id="ff157-113">Asignación espacial</span><span class="sxs-lookup"><span data-stu-id="ff157-113">Spatial mapping</span></span></td>
        <td><span data-ttu-id="ff157-114">✔️</span><span class="sxs-lookup"><span data-stu-id="ff157-114">✔️</span></span></td>
        <td><span data-ttu-id="ff157-115">✔️</span><span class="sxs-lookup"><span data-stu-id="ff157-115">✔️</span></span></td>
        <td>❌</td>
    </tr>
</table>


## <a name="why-is-spatial-mapping-important"></a><span data-ttu-id="ff157-116">¿Por qué es importante la asignación espacial?</span><span class="sxs-lookup"><span data-stu-id="ff157-116">Why is spatial mapping important?</span></span>

<span data-ttu-id="ff157-117">La asignación espacial permite colocar objetos en superficies reales.</span><span class="sxs-lookup"><span data-stu-id="ff157-117">Spatial mapping makes it possible to place objects on real surfaces.</span></span> <span data-ttu-id="ff157-118">Esto ayuda a delimitar objetos en el mundo del usuario y aprovecha las indicaciones de profundidad del mundo real. La ocultación de los hologramas en función de otros hologramas y objetos del mundo real ayuda a convencer al usuario de que estos hologramas están realmente en su espacio.</span><span class="sxs-lookup"><span data-stu-id="ff157-118">This helps anchor objects in the user's world and takes advantage of real world depth cues. Occluding your holograms based on other holograms and real world objects helps convince the user that these holograms are actually in their space.</span></span> <span data-ttu-id="ff157-119">Los hologramas que flotan en el espacio o se mueven con el usuario no se verán como reales.</span><span class="sxs-lookup"><span data-stu-id="ff157-119">Holograms floating in space or moving with the user won't feel as real.</span></span> <span data-ttu-id="ff157-120">Cuando sea posible, coloque elementos para mayor comodidad.</span><span class="sxs-lookup"><span data-stu-id="ff157-120">When possible, place items for comfort.</span></span>

<span data-ttu-id="ff157-121">Visualizar superficies al colocar o mover hologramas (use una cuadrícula proyectada).</span><span class="sxs-lookup"><span data-stu-id="ff157-121">Visualize surfaces when placing or moving holograms (use a projected grid).</span></span> <span data-ttu-id="ff157-122">Esto ayuda a los usuarios a saber dónde pueden colocar mejor sus hologramas y muestra si el punto en el que intentan colocar el holograma no está asignado.</span><span class="sxs-lookup"><span data-stu-id="ff157-122">This helps users know where they can best place their holograms, and shows if the spot they're trying to place the hologram isn't mapped.</span></span> <span data-ttu-id="ff157-123">Puede "agregar elementos" al usuario si terminan en demasiado ángulo.</span><span class="sxs-lookup"><span data-stu-id="ff157-123">You can "billboard items" toward the user if they end up at too much of an angle.</span></span>

## <a name="conceptual-overview"></a><span data-ttu-id="ff157-124">Información general conceptual</span><span class="sxs-lookup"><span data-stu-id="ff157-124">Conceptual overview</span></span>

<span data-ttu-id="ff157-125">![Superficies de malla que cubren una sala](images/SurfaceReconstruction.jpg)</span><span class="sxs-lookup"><span data-stu-id="ff157-125">![Mesh surfaces covering a room](images/SurfaceReconstruction.jpg)</span></span><br>
<span data-ttu-id="ff157-126">*Un ejemplo de una malla de asignación espacial que cubre una sala*</span><span class="sxs-lookup"><span data-stu-id="ff157-126">*An example of a spatial mapping mesh covering a room*</span></span>

<span data-ttu-id="ff157-127">Los dos tipos de objetos principales que se usan para la asignación espacial son "Observador de superficie espacial" y "Superficie espacial".</span><span class="sxs-lookup"><span data-stu-id="ff157-127">The two primary object types used for spatial mapping are the 'Spatial Surface Observer' and the 'Spatial Surface'.</span></span>

<span data-ttu-id="ff157-128">La aplicación proporciona al observador de superficie espacial uno o varios volúmenes delimitadores para definir las regiones de espacio en las que la aplicación desea recibir datos de asignación espacial.</span><span class="sxs-lookup"><span data-stu-id="ff157-128">The application provides the Spatial Surface Observer with one or more bounding volumes, to define the regions of space in which the application wishes to receive spatial mapping data.</span></span> <span data-ttu-id="ff157-129">Para cada uno de estos volúmenes, la asignación espacial proporcionará a la aplicación un conjunto de superficies espaciales.</span><span class="sxs-lookup"><span data-stu-id="ff157-129">For each of these volumes, spatial mapping will provide the application with a set of Spatial Surfaces.</span></span>

<span data-ttu-id="ff157-130">Estos volúmenes pueden ser fijos (en una ubicación fija basada en el mundo real) o pueden asociarse a HoloLens (se mueven, pero no giran, con HoloLens a medida que se mueve por el entorno).</span><span class="sxs-lookup"><span data-stu-id="ff157-130">These volumes may be stationary (in a fixed location based on the real world) or they may be attached to the HoloLens (they move, but don't rotate, with the HoloLens as it moves through the environment).</span></span> <span data-ttu-id="ff157-131">Cada superficie espacial describe las superficies del mundo real en un pequeño volumen de espacio, representado como una malla de triángulo conectada a un sistema de coordenadas espaciales bloqueado por [el mundo.](coordinate-systems.md)</span><span class="sxs-lookup"><span data-stu-id="ff157-131">Each spatial surface describes real-world surfaces in a small volume of space, represented as a triangle mesh attached to a world-locked [spatial coordinate system](coordinate-systems.md).</span></span>

<span data-ttu-id="ff157-132">A medida que HoloLens recopila nuevos datos sobre el entorno y, a medida que se producen cambios en el entorno, las superficies espaciales aparecerán, desaparecerán y cambiarán.</span><span class="sxs-lookup"><span data-stu-id="ff157-132">As the HoloLens gathers new data about the environment, and as changes to the environment occur, spatial surfaces will appear, disappear, and change.</span></span>

## <a name="spatial-awareness-design-concepts-demo"></a><span data-ttu-id="ff157-133">Demostración de conceptos de diseño de reconocimiento espacial</span><span class="sxs-lookup"><span data-stu-id="ff157-133">Spatial Awareness design concepts demo</span></span>

<span data-ttu-id="ff157-134">Si quiere ver los conceptos de diseño de reconocimiento espacial en acción, consulte la demostración de vídeo Diseño de [hologramas:]() reconocimiento espacial a continuación.</span><span class="sxs-lookup"><span data-stu-id="ff157-134">If you'd like to see Spatial Awareness design concepts in action, check out our [Designing Holograms - Spatial Awareness]() video demo below.</span></span> <span data-ttu-id="ff157-135">Cuando haya terminado, continúe con un análisis más detallado de temas específicos.</span><span class="sxs-lookup"><span data-stu-id="ff157-135">When you've finished, continue on for a more detailed dive into specific topics.</span></span>

> [!VIDEO https://channel9.msdn.com/Shows/Docs-Mixed-Reality/Microsofts-Designing-Holograms-Spatial-Awareness-Chapter/player]

## <a name="spatial-mapping-vs-scene-understanding-worldmesh"></a><span data-ttu-id="ff157-136">Spatial Mapping frente a Scene Understanding WorldMesh</span><span class="sxs-lookup"><span data-stu-id="ff157-136">Spatial Mapping vs. Scene Understanding WorldMesh</span></span>

<span data-ttu-id="ff157-137">Por HoloLens 2, es posible consultar una versión estática de los datos de asignación espacial mediante [scene understanding SDK](../develop/platform-capabilities-and-apis/scene-understanding-SDK.md) (configuración EnableWorldMesh).</span><span class="sxs-lookup"><span data-stu-id="ff157-137">For HoloLens 2, it's possible to query a static version of the spatial mapping data using [Scene understanding SDK](../develop/platform-capabilities-and-apis/scene-understanding-SDK.md) (EnableWorldMesh setting).</span></span> <span data-ttu-id="ff157-138">Estas son las diferencias entre dos formas de acceder a los datos de asignación espacial:</span><span class="sxs-lookup"><span data-stu-id="ff157-138">Here are the differences between two ways of accessing the spatial mapping data:</span></span>
* <span data-ttu-id="ff157-139">Spatial Mapping API:</span><span class="sxs-lookup"><span data-stu-id="ff157-139">Spatial Mapping API:</span></span>
   * <span data-ttu-id="ff157-140">Intervalo limitado: los datos de asignación espacial disponibles para las aplicaciones en una "burbuja" almacenada en caché de tamaño limitado en torno al usuario.</span><span class="sxs-lookup"><span data-stu-id="ff157-140">Limited range: the spatial mapping data available to applications in a limited size cached 'bubble' around the user.</span></span>
   * <span data-ttu-id="ff157-141">Proporciona actualizaciones de baja latencia de regiones de malla modificadas a través de eventos SurfacesChanged.</span><span class="sxs-lookup"><span data-stu-id="ff157-141">Provides low latency updates of changed mesh regions through SurfacesChanged events.</span></span>
   * <span data-ttu-id="ff157-142">Nivel variable de detalles controlado por el parámetro Triángulos por medidor cúbica.</span><span class="sxs-lookup"><span data-stu-id="ff157-142">Variable level of details controlled by Triangles Per Cubic Meter parameter.</span></span>
* <span data-ttu-id="ff157-143">SDK de descripción de la escena:</span><span class="sxs-lookup"><span data-stu-id="ff157-143">Scene understanding SDK:</span></span>
   * <span data-ttu-id="ff157-144">Intervalo ilimitado: proporciona todos los datos de asignación espacial examinados dentro del radio de consulta.</span><span class="sxs-lookup"><span data-stu-id="ff157-144">Unlimited range - provides all the scanned spatial mapping data within the query radius.</span></span>
   * <span data-ttu-id="ff157-145">Proporciona una instantánea estática de los datos de asignación espacial.</span><span class="sxs-lookup"><span data-stu-id="ff157-145">Provides a static snapshot of the spatial mapping data.</span></span> <span data-ttu-id="ff157-146">La obtención de los datos de asignación espacial actualizados requiere ejecutar una nueva consulta para toda la malla.</span><span class="sxs-lookup"><span data-stu-id="ff157-146">Getting the updated spatial mapping data requires running a new query for the whole mesh.</span></span>
   * <span data-ttu-id="ff157-147">Nivel coherente de detalles controlado por la configuración RequestedMeshLevelOfDetail.</span><span class="sxs-lookup"><span data-stu-id="ff157-147">Consistent level of details controlled by RequestedMeshLevelOfDetail setting.</span></span>

## <a name="what-influences-spatial-mapping-quality"></a><span data-ttu-id="ff157-148">¿Qué influye en la calidad de la asignación espacial?</span><span class="sxs-lookup"><span data-stu-id="ff157-148">What influences spatial mapping quality?</span></span>

<span data-ttu-id="ff157-149">Varios factores, que se [detallan aquí,](/hololens/hololens-environment-considerations)pueden afectar a la frecuencia y gravedad de estos errores.</span><span class="sxs-lookup"><span data-stu-id="ff157-149">Several factors, detailed [here](/hololens/hololens-environment-considerations), can affect the frequency and severity of these errors.</span></span>  <span data-ttu-id="ff157-150">Sin embargo, debe diseñar la aplicación para que el usuario pueda lograr sus objetivos incluso en presencia de errores en los datos de asignación espacial.</span><span class="sxs-lookup"><span data-stu-id="ff157-150">However, you should design your application so that the user can achieve their goals even in the presence of errors in the spatial mapping data.</span></span>

## <a name="common-usage-scenarios"></a><span data-ttu-id="ff157-151">Escenarios de uso comunes</span><span class="sxs-lookup"><span data-stu-id="ff157-151">Common usage scenarios</span></span>

![Ilustraciones de escenarios comunes de uso de asignaciones espaciales: selección de ubicación, oclusión, física y navegación](images/sm-concepts-1000px.png)

### <a name="placement"></a><span data-ttu-id="ff157-153">Selección de ubicación</span><span class="sxs-lookup"><span data-stu-id="ff157-153">Placement</span></span>

<span data-ttu-id="ff157-154">La asignación espacial proporciona a las aplicaciones la oportunidad de presentar formas naturales y familiares de interacción al usuario. ¿Qué podría ser más natural que colocar el teléfono en el escritorio?</span><span class="sxs-lookup"><span data-stu-id="ff157-154">Spatial mapping provides applications with the opportunity to present natural and familiar forms of interaction to the user; what could be more natural than placing down your phone on the desk?</span></span>

<span data-ttu-id="ff157-155">Restringir la colocación de hologramas (o más generalmente, cualquier selección de ubicaciones espaciales) para colocarse en las superficies proporciona una asignación natural de 3D (punto en el espacio) a 2D (punto en superficie).</span><span class="sxs-lookup"><span data-stu-id="ff157-155">Constraining the placement of holograms (or more generally, any selection of spatial locations) to lie on surfaces provides a natural mapping from 3D (point in space) to 2D (point on surface).</span></span> <span data-ttu-id="ff157-156">Esto reduce la cantidad de información que el usuario necesita proporcionar a la aplicación y hace que las interacciones del usuario sean más rápidas, sencillas y precisas.</span><span class="sxs-lookup"><span data-stu-id="ff157-156">This reduces the amount of information the user needs to provide to the application and makes the user's interactions faster, easier, and more precise.</span></span> <span data-ttu-id="ff157-157">Esto es así porque "distancia a distancia" no es algo que se esté acostumbrado a comunicarse físicamente con otras personas o con equipos.</span><span class="sxs-lookup"><span data-stu-id="ff157-157">This is true because 'distance away' isn't something that we're used to physically communicating to other people or to computers.</span></span> <span data-ttu-id="ff157-158">Cuando señalamos con el dedo, se especifica una dirección, pero no una distancia.</span><span class="sxs-lookup"><span data-stu-id="ff157-158">When we point with our finger, we're specifying a direction but not a distance.</span></span>

<span data-ttu-id="ff157-159">Una advertencia importante aquí es que cuando una aplicación deduce la distancia desde la dirección (por ejemplo, haciendo un raycast a lo largo de la dirección de mirada del usuario para encontrar la superficie espacial más cercana), esto debe producir resultados que el usuario pueda predecir de forma confiable.</span><span class="sxs-lookup"><span data-stu-id="ff157-159">An important caveat here's that when an application infers distance from direction (for example by doing a raycast along the user's gaze direction to find the nearest spatial surface), this must yield results that the user can reliably predict.</span></span> <span data-ttu-id="ff157-160">De lo contrario, el usuario perderá su sentido del control y esto puede resultar frustrante rápidamente.</span><span class="sxs-lookup"><span data-stu-id="ff157-160">Otherwise, the user will lose their sense of control and this can quickly become frustrating.</span></span> <span data-ttu-id="ff157-161">Un método que ayuda con esto es realizar varios raycasts en lugar de solo uno.</span><span class="sxs-lookup"><span data-stu-id="ff157-161">One method that helps with this is to do multiple raycasts instead of just one.</span></span> <span data-ttu-id="ff157-162">Los resultados agregados deben ser más fluidos y predecibles, menos susceptibles a la influencia de los resultados transitorios de "valores atípicos" (como puede deberse a que los rayos pasan a través de pequeños huecos o alcanzan pequeños bits de geometría que el usuario no conoce).</span><span class="sxs-lookup"><span data-stu-id="ff157-162">The aggregate results should be smoother and more predictable, less susceptible to influence from transient 'outlier' results (as can be caused by rays passing through tiny holes or hitting small bits of geometry that the user isn't aware of).</span></span> <span data-ttu-id="ff157-163">La agregación o el suavizado también se pueden realizar con el tiempo. Por ejemplo, puede limitar la velocidad máxima a la que un holograma puede variar en distancia con respecto al usuario.</span><span class="sxs-lookup"><span data-stu-id="ff157-163">Aggregation or smoothing can also be performed over time; for example, you can limit the maximum speed at which a hologram can vary in distance from the user.</span></span> <span data-ttu-id="ff157-164">Limitar el valor de distancia mínima y máxima también puede ayudar, por lo que el holograma que se mueve no desaparece repentinamente a la distancia ni vuelve a bloquearse en la cara del usuario.</span><span class="sxs-lookup"><span data-stu-id="ff157-164">Simply limiting the minimum and maximum distance value can also help, so the hologram being moved doesn't suddenly fly away into the distance or come crashing back into the user's face.</span></span>

<span data-ttu-id="ff157-165">Las aplicaciones también pueden usar la forma y la dirección de las superficies para guiar la ubicación del holograma.</span><span class="sxs-lookup"><span data-stu-id="ff157-165">Applications can also use the shape and direction of surfaces to guide hologram placement.</span></span> <span data-ttu-id="ff157-166">Una buta holográfica no debe atravesar las paredes y debe vaciarse con el suelo aunque sea ligeramente desigual.</span><span class="sxs-lookup"><span data-stu-id="ff157-166">A holographic chair shouldn't penetrate through walls and should sit flush with the floor even if it's slightly uneven.</span></span> <span data-ttu-id="ff157-167">Este tipo de funcionalidad probablemente se basaría en el uso de colisiones físicas en lugar de raycasts, pero se aplicarán preocupaciones similares.</span><span class="sxs-lookup"><span data-stu-id="ff157-167">This kind of functionality would likely rely upon the use of physics collisions rather than raycasts, however similar concerns will apply.</span></span> <span data-ttu-id="ff157-168">Si el holograma que se va a colocar tiene muchos polígonos pequeños que se adhieren, como las ruedas de una buta, puede tener sentido expandir la representación física de esos polígonos a algo más ancho y más suave para que puedan deslizarse sobre las superficies espaciales sin etiquetar.</span><span class="sxs-lookup"><span data-stu-id="ff157-168">If the hologram being placed has many small polygons that stick out, like the legs on a chair, it may make sense to expand the physics representation of those polygons to something wider and smoother so that they're more able to slide over spatial surfaces without snagging.</span></span>

<span data-ttu-id="ff157-169">En su extremo, la entrada del usuario se puede simplificar completamente y las superficies espaciales se pueden usar para realizar la colocación de hologramas completamente automática.</span><span class="sxs-lookup"><span data-stu-id="ff157-169">At its extreme, user input can be simplified away entirely and spatial surfaces can be used to do entirely automatic hologram placement.</span></span> <span data-ttu-id="ff157-170">Por ejemplo, la aplicación podría colocar un conmutador de luz holográfica en algún lugar de la pared para que el usuario lo presione.</span><span class="sxs-lookup"><span data-stu-id="ff157-170">For example, the application could place a holographic light-switch somewhere on the wall for the user to press.</span></span> <span data-ttu-id="ff157-171">La misma advertencia sobre la previsibilidad se aplica doblemente aquí; Si el usuario espera el control sobre la ubicación del holograma, pero la aplicación no siempre coloca los hologramas donde espera (si el conmutador de luz aparece en algún lugar al que el usuario no puede llegar), esta será una experiencia frustrante.</span><span class="sxs-lookup"><span data-stu-id="ff157-171">The same caveat about predictability applies doubly here; if the user expects control over hologram placement, but the application doesn't always place holograms where they expect (if the light-switch appears somewhere that the user can't reach), then this will be a frustrating experience.</span></span> <span data-ttu-id="ff157-172">En realidad, puede ser peor realizar la selección de ubicación automática que requiere una corrección del usuario algunas veces, que simplemente requerir que el usuario siempre realice la selección de ubicación por sí mismo. dado que se espera una colocación *automática correcta,* la corrección manual parece una carga.</span><span class="sxs-lookup"><span data-stu-id="ff157-172">It can actually be worse to do automatic placement that requires user correction some of the time, than to just require the user to always do placement themselves; because successful automatic placement is *expected*, manual correction feels like a burden!</span></span>

<span data-ttu-id="ff157-173">Tenga en cuenta también que la capacidad de una aplicación para usar superficies espaciales para la selección de ubicación depende en gran medida de la experiencia de [examen de la aplicación.](spatial-mapping.md#the-environment-scanning-experience)</span><span class="sxs-lookup"><span data-stu-id="ff157-173">Note also that the ability of an application to use spatial surfaces for placement depends heavily on the application's [scanning experience](spatial-mapping.md#the-environment-scanning-experience).</span></span> <span data-ttu-id="ff157-174">Si no se ha examinado una superficie, no se puede usar para la selección de ubicación.</span><span class="sxs-lookup"><span data-stu-id="ff157-174">If a surface hasn't been scanned, then it cannot be used for placement.</span></span> <span data-ttu-id="ff157-175">La aplicación debe dejar esto claro al usuario para que pueda ayudar a examinar nuevas superficies o seleccionar una nueva ubicación.</span><span class="sxs-lookup"><span data-stu-id="ff157-175">It's up to the application to make this clear to the user, so that they can either help scan new surfaces or select a new location.</span></span>

<span data-ttu-id="ff157-176">Los comentarios visuales al usuario son de suma importancia durante la selección de ubicación.</span><span class="sxs-lookup"><span data-stu-id="ff157-176">Visual feedback to the user is of paramount importance during placement.</span></span> <span data-ttu-id="ff157-177">El usuario debe saber dónde se basa el holograma en la superficie más cercana con efectos [de tierra.](spatial-mapping.md#visualization)</span><span class="sxs-lookup"><span data-stu-id="ff157-177">The user needs to know where the hologram is based on the nearest surface with [grounding effects](spatial-mapping.md#visualization).</span></span> <span data-ttu-id="ff157-178">Deben comprender por qué se restringe el movimiento de su holograma (por ejemplo, debido a colisiones con otra superficie cercana).</span><span class="sxs-lookup"><span data-stu-id="ff157-178">They should understand why the movement of their hologram is being constrained (for example, because of collisions with another nearby surface).</span></span> <span data-ttu-id="ff157-179">Si no pueden colocar un holograma en la ubicación actual, los comentarios visuales deben dejar claro por qué no.</span><span class="sxs-lookup"><span data-stu-id="ff157-179">If they can't place a hologram in the current location, then visual feedback should make it clear why not.</span></span> <span data-ttu-id="ff157-180">Por ejemplo, si el usuario está intentando colocar un diván holográfico atascado a medio camino en la pared, las partes del diván que están detrás de la pared deben pulsar en un color tonificado.</span><span class="sxs-lookup"><span data-stu-id="ff157-180">For example, if the user is trying to place a holographic couch stuck half-way into the wall, then the portions of the couch that are behind the wall should pulsate in an angry color.</span></span> <span data-ttu-id="ff157-181">O, por el contrario, si la aplicación no puede encontrar una superficie espacial en una ubicación donde el usuario pueda ver una superficie real, la aplicación debe dejar esto claro.</span><span class="sxs-lookup"><span data-stu-id="ff157-181">Or conversely, if the application can't find a spatial surface in a location where the user can see a real-world surface, then the application should make this clear.</span></span> <span data-ttu-id="ff157-182">La ausencia obvia de un efecto de base en esta área puede lograr este propósito.</span><span class="sxs-lookup"><span data-stu-id="ff157-182">The obvious absence of a grounding effect in this area may achieve this purpose.</span></span>

### <a name="occlusion"></a><span data-ttu-id="ff157-183">Oclusión</span><span class="sxs-lookup"><span data-stu-id="ff157-183">Occlusion</span></span>

<span data-ttu-id="ff157-184">Uno de los principales usos de las superficies de asignación espacial es simplemente occluir hologramas.</span><span class="sxs-lookup"><span data-stu-id="ff157-184">One of the primary uses of spatial mapping surfaces is simply to occlude holograms.</span></span> <span data-ttu-id="ff157-185">Este comportamiento simple tiene un gran impacto en el realismo percibido de los hologramas, lo que ayuda a crear un sentido visceral que realmente resalte el mismo espacio físico que el usuario.</span><span class="sxs-lookup"><span data-stu-id="ff157-185">This simple behavior has a huge impact on the perceived realism of holograms, helping to create a visceral sense that really inhabits the same physical space as the user.</span></span>

<span data-ttu-id="ff157-186">La oclusión también proporciona información al usuario; cuando un holograma parece estar ocluso por una superficie real, esto proporciona comentarios visuales adicionales sobre la ubicación espacial de ese holograma en el mundo.</span><span class="sxs-lookup"><span data-stu-id="ff157-186">Occlusion also provides information to the user; when a hologram appears to be occluded by a real-world surface, this provides extra visual feedback as to the spatial location of that hologram in the world.</span></span> <span data-ttu-id="ff157-187">Por el contrario, la oclusión también puede ocultar *información* al usuario; oclusión de hologramas detrás de las paredes puede reducir el desorden visual de una manera intuitiva.</span><span class="sxs-lookup"><span data-stu-id="ff157-187">Conversely, occlusion can also usefully *hide* information from the user; occluding holograms behind walls can reduce visual clutter in an intuitive way.</span></span> <span data-ttu-id="ff157-188">Para ocultar o revelar un holograma, el usuario simplemente tiene que mover la cabeza.</span><span class="sxs-lookup"><span data-stu-id="ff157-188">To hide or reveal a hologram, the user merely has to move their head.</span></span>

<span data-ttu-id="ff157-189">La oclusión también se puede usar para cumplir las expectativas de una interfaz de usuario natural basada en interacciones físicas conocidas. Si un holograma está ocluido por una superficie, es porque esa superficie  es sólida, por lo que el usuario debe esperar que el holograma colisione con esa superficie y no pase a través de ella.</span><span class="sxs-lookup"><span data-stu-id="ff157-189">Occlusion can also be used to prime expectations for a natural user interface based upon familiar physical interactions; if a hologram is occluded by a surface it is because that surface is solid, so the user should expect that the hologram will *collide* with that surface and not pass through it.</span></span>

<span data-ttu-id="ff157-190">A veces, no se desea la oclusión de hologramas.</span><span class="sxs-lookup"><span data-stu-id="ff157-190">Sometimes, occlusion of holograms is undesirable.</span></span> <span data-ttu-id="ff157-191">Si un usuario necesita interactuar con un holograma, debe verlo, incluso si está detrás de una superficie real.</span><span class="sxs-lookup"><span data-stu-id="ff157-191">If a user needs to interact with a hologram, then they need to see it - even if it is behind a real-world surface.</span></span> <span data-ttu-id="ff157-192">En tales casos, normalmente tiene sentido representar este holograma de forma diferente cuando está ocluido (por ejemplo, reduciendo su brillo).</span><span class="sxs-lookup"><span data-stu-id="ff157-192">In such cases, it usually makes sense to render such a hologram differently when it's occluded (for example, by reducing its brightness).</span></span> <span data-ttu-id="ff157-193">De este modo, el usuario puede localizar visualmente el holograma, pero todavía sabrá que está detrás de algo.</span><span class="sxs-lookup"><span data-stu-id="ff157-193">This way, the user can visually locate the hologram, but they'll still know it's behind something.</span></span>

### <a name="physics"></a><span data-ttu-id="ff157-194">Física</span><span class="sxs-lookup"><span data-stu-id="ff157-194">Physics</span></span>

<span data-ttu-id="ff157-195">El uso de la simulación física es otra manera  de usar la asignación espacial para reforzar la presencia de hologramas en el espacio físico del usuario.</span><span class="sxs-lookup"><span data-stu-id="ff157-195">The use of physics simulation is another way in which spatial mapping can be used to reinforce the *presence* of holograms in the user's physical space.</span></span> <span data-ttu-id="ff157-196">Cuando mi bola holográfica se lanza de forma realista fuera de mi escritorio, salta por el suelo y desaparece debajo del diván, puede que me sea difícil pensar que no está ahí.</span><span class="sxs-lookup"><span data-stu-id="ff157-196">When my holographic rubber ball rolls realistically off my desk, bounces across the floor and disappears under the couch, it might be hard for me to believe that it's not there.</span></span>

<span data-ttu-id="ff157-197">La simulación física también proporciona la oportunidad de que una aplicación use interacciones físicas naturales y familiares.</span><span class="sxs-lookup"><span data-stu-id="ff157-197">Physics simulation also provides the opportunity for an application to use natural and familiar physics-based interactions.</span></span> <span data-ttu-id="ff157-198">Mover un fragmento de piezas holográficas alrededor del suelo probablemente será más fácil para el usuario si el suelo responde como si estuviera deslizándose por el suelo con la inercia y fricción adecuadas.</span><span class="sxs-lookup"><span data-stu-id="ff157-198">Moving a piece of holographic furniture around on the floor will likely be easier for the user if the furniture responds as if it were sliding across the floor with the appropriate inertia and friction.</span></span>

<span data-ttu-id="ff157-199">Para generar comportamientos físicos realistas, es [](spatial-mapping.md#mesh-processing) probable que deba realizar algún procesamiento de malla, como rellenar los huecos, quitar las salas flotantes y suavizar superficies aproximadas.</span><span class="sxs-lookup"><span data-stu-id="ff157-199">To generate realistic physical behaviors, you'll likely need to do some [mesh processing](spatial-mapping.md#mesh-processing) such as filling holes, removing floating hallucinations and smoothing rough surfaces.</span></span>

<span data-ttu-id="ff157-200">También deberá tener en cuenta cómo [](spatial-mapping.md#the-environment-scanning-experience) la experiencia de análisis de la aplicación influye en su simulación física.</span><span class="sxs-lookup"><span data-stu-id="ff157-200">You'll also need to consider how your application's [scanning experience](spatial-mapping.md#the-environment-scanning-experience) influences its physics simulation.</span></span> <span data-ttu-id="ff157-201">En primer lugar, las superficies que faltan no colisionan con nada; ¿Qué ocurre cuando la bola de béisbol se lanza hacia abajo y fuera del fin del mundo conocido?</span><span class="sxs-lookup"><span data-stu-id="ff157-201">Firstly, missing surfaces won't collide with anything; what happens when the rubber ball rolls off down the corridor and off the end of the known world?</span></span> <span data-ttu-id="ff157-202">En segundo lugar, debe decidir si seguirá respondiendo a los cambios en el entorno a lo largo del tiempo.</span><span class="sxs-lookup"><span data-stu-id="ff157-202">Secondly, you need to decide whether you'll continue to respond to changes in the environment over time.</span></span> <span data-ttu-id="ff157-203">En algunos casos, querrá responder lo más rápido posible. Diga si el usuario usa puertas y productos como ramas móviles en defensa frente a una tempestad de flechas de román entrantes.</span><span class="sxs-lookup"><span data-stu-id="ff157-203">In some cases, you'll want to respond as quickly as possible; say if the user is using doors and furniture as movable barricades in defense against a tempest of incoming Roman arrows.</span></span> <span data-ttu-id="ff157-204">Sin embargo, en otros casos, es posible que quiera omitir las nuevas actualizaciones. Puede que conducir el coche deportivo holográfico alrededor del circuito de carreras en el suelo de repente no sea tan divertido si su perro decide quedarse en medio de la pista.</span><span class="sxs-lookup"><span data-stu-id="ff157-204">In other cases though, you may want to ignore new updates; driving your holographic sports car around the racetrack on your floor may suddenly not be so fun if your dog decides to sit in the middle of the track.</span></span>

### <a name="navigation"></a><span data-ttu-id="ff157-205">Navegación</span><span class="sxs-lookup"><span data-stu-id="ff157-205">Navigation</span></span>

<span data-ttu-id="ff157-206">Las aplicaciones pueden usar datos de asignación espacial para conceder a los caracteres holográficos (o agentes) la capacidad de navegar por el mundo real de la misma manera que lo haría una persona real.</span><span class="sxs-lookup"><span data-stu-id="ff157-206">Applications can use spatial mapping data to grant holographic characters (or agents) the ability to navigate the real world in the same way a real person would.</span></span> <span data-ttu-id="ff157-207">Esto puede ayudar a reforzar la presencia de caracteres holográficos al restringirlos al mismo conjunto de comportamientos naturales y familiares que los del usuario y sus amigos.</span><span class="sxs-lookup"><span data-stu-id="ff157-207">This can help reinforce the presence of holographic characters by restricting them to the same set of natural, familiar behaviors as those of the user and their friends.</span></span>

<span data-ttu-id="ff157-208">Las funcionalidades de navegación también pueden ser útiles para los usuarios.</span><span class="sxs-lookup"><span data-stu-id="ff157-208">Navigation capabilities could be useful to users as well.</span></span> <span data-ttu-id="ff157-209">Una vez que se ha creado un mapa de navegación en un área determinada, se podría compartir para proporcionar instrucciones holográficas a los nuevos usuarios que no están familiarizados con esa ubicación.</span><span class="sxs-lookup"><span data-stu-id="ff157-209">Once a navigation map has been built in a given area, it could be shared to provide holographic directions for new users unfamiliar with that location.</span></span> <span data-ttu-id="ff157-210">Este mapa podría diseñarse para ayudar a mantener el flujo de tráfico "tráfico" sin problemas o para evitar accidentes en ubicaciones peligrosas, como sitios de construcción.</span><span class="sxs-lookup"><span data-stu-id="ff157-210">This map could be designed to help keep pedestrian 'traffic' flowing smoothly, or to avoid accidents in dangerous locations like construction sites.</span></span>

<span data-ttu-id="ff157-211">Los principales desafíos técnicos implicados en la implementación de la funcionalidad de navegación serán la detección confiable de superficies paseables (los seres humanos no andan en tablas) y la adaptación correcta a los cambios en el entorno (los seres humanos no atraviesan puertas cerradas).</span><span class="sxs-lookup"><span data-stu-id="ff157-211">The key technical challenges involved in implementing navigation functionality will be reliable detection of walkable surfaces (humans don't walk on tables!) and graceful adaptation to changes in the environment (humans don't walk through closed doors!).</span></span> <span data-ttu-id="ff157-212">La malla puede requerir algún [procesamiento](spatial-mapping.md#mesh-processing) antes de que se pueda usar para el planeamiento de rutas de acceso y la navegación por un carácter virtual.</span><span class="sxs-lookup"><span data-stu-id="ff157-212">The mesh may require some [processing](spatial-mapping.md#mesh-processing) before it's usable for path-planning and navigation by a virtual character.</span></span> <span data-ttu-id="ff157-213">Suavizar la malla y quitar las salas puede ayudar a evitar que los caracteres se atascarán.</span><span class="sxs-lookup"><span data-stu-id="ff157-213">Smoothing the mesh and removing hallucinations may help avoid characters becoming stuck.</span></span> <span data-ttu-id="ff157-214">También puede simplificar drásticamente la malla para acelerar los cálculos de navegación y planeamiento de rutas de acceso del carácter.</span><span class="sxs-lookup"><span data-stu-id="ff157-214">You may also wish to drastically simplify the mesh to speed up your character's path-planning and navigation calculations.</span></span> <span data-ttu-id="ff157-215">Estos desafíos han recibido una gran atención en el desarrollo de tecnología de juegos de vídeo y hay una gran cantidad de documentación de investigación disponible sobre estos temas.</span><span class="sxs-lookup"><span data-stu-id="ff157-215">These challenges have received a great deal of attention in the development of video game technology, and there's a wealth of available research literature on these topics.</span></span>

<span data-ttu-id="ff157-216">La funcionalidad integrada NavMesh en Unity no se puede usar con superficies de asignación espacial.</span><span class="sxs-lookup"><span data-stu-id="ff157-216">The built-in NavMesh functionality in Unity cannot be used with spatial mapping surfaces.</span></span> <span data-ttu-id="ff157-217">Esto se debe a que las superficies de asignación espacial no se conocen hasta que se inicia la aplicación, pero los archivos de datos NavMesh deben generarse a partir de recursos de origen con antelación.</span><span class="sxs-lookup"><span data-stu-id="ff157-217">This is because spatial mapping surfaces aren't known until the application starts, but NavMesh data files need to be generated from source assets ahead of time.</span></span> <span data-ttu-id="ff157-218">Tenga en cuenta también que el sistema de asignación espacial no proporcionará información sobre las [superficies](spatial-mapping.md#the-environment-scanning-experience) lejos de la ubicación actual del usuario.</span><span class="sxs-lookup"><span data-stu-id="ff157-218">Also note that, the spatial mapping system won't provide [information about surfaces far away](spatial-mapping.md#the-environment-scanning-experience) from the user's current location.</span></span> <span data-ttu-id="ff157-219">Por lo tanto, la aplicación debe "recordar" superficies si se va a crear un mapa de un área grande.</span><span class="sxs-lookup"><span data-stu-id="ff157-219">So the application must 'remember' surfaces itself if it's to build a map of a large area.</span></span>

### <a name="visualization"></a><span data-ttu-id="ff157-220">Visualización</span><span class="sxs-lookup"><span data-stu-id="ff157-220">Visualization</span></span>

<span data-ttu-id="ff157-221">La mayoría de las veces es adecuado que las superficies espaciales sean invisibles; para minimizar el desorden visual y dejar que el mundo real hable por sí mismo.</span><span class="sxs-lookup"><span data-stu-id="ff157-221">Most of the time it's appropriate for spatial surfaces to be invisible; to minimize visual clutter and let the real world speak for itself.</span></span> <span data-ttu-id="ff157-222">Sin embargo, a veces resulta útil visualizar las superficies de asignación espacial directamente, a pesar de que sus homólogos reales sean visibles.</span><span class="sxs-lookup"><span data-stu-id="ff157-222">However, sometimes it's useful to visualize spatial mapping surfaces directly, despite their real-world counterparts being visible.</span></span>

<span data-ttu-id="ff157-223">Por ejemplo, cuando el usuario intenta colocar un holograma en una superficie (colocar un gabinete holográfico en la pared, por ejemplo) puede ser útil "colocar" el holograma mediante la conversión de una sombra en la superficie.</span><span class="sxs-lookup"><span data-stu-id="ff157-223">For example, when the user is trying to place a hologram onto a surface (placing a holographic cabinet on the wall, say) it can be useful to 'ground' the hologram by casting a shadow onto the surface.</span></span> <span data-ttu-id="ff157-224">Esto proporciona al usuario una idea mucho más clara de la proximidad física exacta entre el holograma y la superficie.</span><span class="sxs-lookup"><span data-stu-id="ff157-224">This gives the user a much clearer sense of the exact physical proximity between the hologram and the surface.</span></span> <span data-ttu-id="ff157-225">Este es también un ejemplo de la práctica más general de "obtener una vista previa" visual de un cambio antes de que el usuario se confirme en él.</span><span class="sxs-lookup"><span data-stu-id="ff157-225">This is also an example of the more general practice of visually 'previewing' a change before the user commits to it.</span></span>

<span data-ttu-id="ff157-226">Al visualizar las superficies, la aplicación puede compartir con el usuario su comprensión del entorno.</span><span class="sxs-lookup"><span data-stu-id="ff157-226">By visualizing surfaces, the application can share with the user its understanding of the environment.</span></span> <span data-ttu-id="ff157-227">Por ejemplo, un juego de mesa holográfica podría visualizar las superficies horizontales que ha identificado como "tablas", por lo que el usuario sabe a dónde debe ir para interactuar.</span><span class="sxs-lookup"><span data-stu-id="ff157-227">For example, a holographic board game could visualize the horizontal surfaces that it has identified as 'tables', so the user knows where they should go to interact.</span></span>

<span data-ttu-id="ff157-228">La visualización de superficies puede ser una manera útil de mostrar los espacios cercanos del usuario que están ocultos en la vista.</span><span class="sxs-lookup"><span data-stu-id="ff157-228">Visualizing surfaces can be a useful way to show the user nearby spaces that are hidden from view.</span></span> <span data-ttu-id="ff157-229">Esto podría proporcionar una manera de proporcionar al usuario acceso a su cocina (y a todos sus hologramas contenidos) desde su sala de estar.</span><span class="sxs-lookup"><span data-stu-id="ff157-229">This could provide a way to give the user access to their kitchen (and all of its contained holograms) from their living room.</span></span>

<span data-ttu-id="ff157-230">Es posible que las mallas de superficie proporcionadas por la asignación espacial no sean especialmente "limpias".</span><span class="sxs-lookup"><span data-stu-id="ff157-230">The surface meshes provided by spatial mapping may not be particularly 'clean'.</span></span> <span data-ttu-id="ff157-231">Es importante visualizarlos correctamente.</span><span class="sxs-lookup"><span data-stu-id="ff157-231">It's important to visualize them appropriately.</span></span> <span data-ttu-id="ff157-232">Los cálculos de iluminación tradicionales pueden resaltar los errores en las normales de la superficie de una manera visualmente distraída, mientras que las texturas "limpias" proyectadas en la superficie pueden ayudar a darle un aspecto más ordenado.</span><span class="sxs-lookup"><span data-stu-id="ff157-232">Traditional lighting calculations may highlight errors in surface normals in a visually distracting manner, while 'clean' textures projected onto the surface may help to give it a tidier appearance.</span></span> <span data-ttu-id="ff157-233">También es posible realizar el procesamiento de [malla](spatial-mapping.md#mesh-processing) para mejorar las propiedades de la malla, antes de que se representen las superficies.</span><span class="sxs-lookup"><span data-stu-id="ff157-233">It's also possible to do [mesh processing](spatial-mapping.md#mesh-processing) to improve mesh properties, before the surfaces are rendered.</span></span>

> [!NOTE]
> <span data-ttu-id="ff157-234">HoloLens 2 implementa una nueva instancia de [Scene Understanding Runtime](scene-understanding.md)que proporciona a los desarrolladores de Mixed Reality una representación de entorno estructurada y de alto nivel diseñada para simplificar la implementación de la selección de ubicación, oclusión, física y navegación.</span><span class="sxs-lookup"><span data-stu-id="ff157-234">HoloLens 2 implements a new [Scene Understanding Runtime](scene-understanding.md), that provides Mixed Reality developers with a structured, high-level environment representation designed to simplify the implementation of placement, occlusion, physics and navigation.</span></span>

## <a name="using-the-surface-observer"></a><span data-ttu-id="ff157-235">Uso del observador de surface</span><span class="sxs-lookup"><span data-stu-id="ff157-235">Using The Surface Observer</span></span>

<span data-ttu-id="ff157-236">El punto inicial de la asignación espacial es el observador de superficie.</span><span class="sxs-lookup"><span data-stu-id="ff157-236">The starting point for spatial mapping is the surface observer.</span></span> <span data-ttu-id="ff157-237">El flujo del programa es el siguiente:</span><span class="sxs-lookup"><span data-stu-id="ff157-237">Program flow is as follows:</span></span>
* <span data-ttu-id="ff157-238">Creación de un objeto observador de superficie</span><span class="sxs-lookup"><span data-stu-id="ff157-238">Create a surface observer object</span></span>
   * <span data-ttu-id="ff157-239">Proporcione uno o varios volúmenes espaciales para definir las regiones de interés en las que la aplicación desea recibir datos de asignación espacial.</span><span class="sxs-lookup"><span data-stu-id="ff157-239">Provide one or more spatial volumes, to define the regions of interest in which the application wishes to receive spatial mapping data.</span></span> <span data-ttu-id="ff157-240">Un volumen espacial es simplemente una forma que define una región de espacio, como una esfera o un cuadro.</span><span class="sxs-lookup"><span data-stu-id="ff157-240">A spatial volume is simply a shape defining a region of space, such as a sphere or a box.</span></span>
   * <span data-ttu-id="ff157-241">Use un volumen espacial con un sistema de coordenadas espaciales bloqueado por el mundo para identificar una región fija del mundo físico.</span><span class="sxs-lookup"><span data-stu-id="ff157-241">Use a spatial volume with a world-locked spatial coordinate system to identify a fixed region of the physical world.</span></span>
   * <span data-ttu-id="ff157-242">Use un volumen espacial, actualizado cada fotograma con un sistema de coordenadas espaciales bloqueado por el cuerpo, para identificar una región de espacio que se mueve (pero no gira) con el usuario.</span><span class="sxs-lookup"><span data-stu-id="ff157-242">Use a spatial volume, updated each frame with a body-locked spatial coordinate system, to identify a region of space that moves (but doesn't rotate) with the user.</span></span>
   * <span data-ttu-id="ff157-243">Estos volúmenes espaciales se pueden cambiar más adelante en cualquier momento, a medida que cambia el estado de la aplicación o del usuario.</span><span class="sxs-lookup"><span data-stu-id="ff157-243">These spatial volumes may be changed later at any time, as the status of the application or the user changes.</span></span>
* <span data-ttu-id="ff157-244">Uso de sondeo o notificación para recuperar información sobre superficies espaciales</span><span class="sxs-lookup"><span data-stu-id="ff157-244">Use polling or notification to retrieve information about spatial surfaces</span></span>
   * <span data-ttu-id="ff157-245">Puede "sondear" el observador de la superficie en busca del estado de la superficie espacial en cualquier momento.</span><span class="sxs-lookup"><span data-stu-id="ff157-245">You may 'poll' the surface observer for spatial surface status at any time.</span></span> <span data-ttu-id="ff157-246">En su lugar, puede registrarse para el evento "surfaces changed" del observador de la superficie, que notificará a la aplicación cuándo han cambiado las superficies espaciales.</span><span class="sxs-lookup"><span data-stu-id="ff157-246">Instead, you may register for the surface observer's 'surfaces changed' event, which will notify the application when spatial surfaces have changed.</span></span>
   * <span data-ttu-id="ff157-247">Para un volumen espacial dinámico, como el frustum de vista o un volumen bloqueado por el cuerpo, las aplicaciones tendrán que sondear los cambios en cada fotograma estableciendo la región de interés y, a continuación, obteniendo el conjunto actual de superficies espaciales.</span><span class="sxs-lookup"><span data-stu-id="ff157-247">For a dynamic spatial volume, such as the view frustum, or a body-locked volume, applications will need to poll for changes each frame by setting the region of interest and then obtaining the current set of spatial surfaces.</span></span>
   * <span data-ttu-id="ff157-248">En el caso de un volumen estático, como un cubo bloqueado por el mundo que abarca una sola sala, las aplicaciones pueden registrarse para que se notifique el evento "surfaces changed" cuando las superficies espaciales dentro de ese volumen puedan haber cambiado.</span><span class="sxs-lookup"><span data-stu-id="ff157-248">For a static volume, such as a world-locked cube covering a single room, applications may register for the 'surfaces changed' event to be notified when spatial surfaces inside that volume may have changed.</span></span>
* <span data-ttu-id="ff157-249">Cambios en las superficies de proceso</span><span class="sxs-lookup"><span data-stu-id="ff157-249">Process surfaces changes</span></span>
   * <span data-ttu-id="ff157-250">Iteración del conjunto de superficies espaciales proporcionado.</span><span class="sxs-lookup"><span data-stu-id="ff157-250">Iterate the provided set of spatial surfaces.</span></span>
   * <span data-ttu-id="ff157-251">Clasifique las superficies espaciales como agregadas, modificadas o quitadas.</span><span class="sxs-lookup"><span data-stu-id="ff157-251">Classify spatial surfaces as added, changed, or removed.</span></span>
   * <span data-ttu-id="ff157-252">Para cada superficie espacial agregada o modificada, si procede, envíe una solicitud asincrónica para recibir una malla actualizada que represente el estado actual de la superficie en el nivel de detalle deseado.</span><span class="sxs-lookup"><span data-stu-id="ff157-252">For each added or changed spatial surface, if appropriate submit an asynchronous request to receive updated mesh representing the surface's current state at the desired level of detail.</span></span>
* <span data-ttu-id="ff157-253">Procese la solicitud de malla asincrónica (más detalles en las secciones siguientes).</span><span class="sxs-lookup"><span data-stu-id="ff157-253">Process the asynchronous mesh request (more details in following sections).</span></span>

## <a name="mesh-caching"></a><span data-ttu-id="ff157-254">Almacenamiento en caché de malla</span><span class="sxs-lookup"><span data-stu-id="ff157-254">Mesh Caching</span></span>

<span data-ttu-id="ff157-255">Las superficies espaciales se representan mediante mallas de triángulo densas.</span><span class="sxs-lookup"><span data-stu-id="ff157-255">Spatial surfaces are represented by dense triangle meshes.</span></span> <span data-ttu-id="ff157-256">Almacenar, representar y procesar estas mallas puede consumir importantes recursos de cálculo y almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="ff157-256">Storing, rendering, and processing these meshes can consume significant computational and storage resources.</span></span> <span data-ttu-id="ff157-257">Por lo tanto, cada aplicación debe adoptar un esquema de almacenamiento en caché de malla adecuado para sus necesidades, a fin de minimizar los recursos usados para el procesamiento y el almacenamiento de la malla.</span><span class="sxs-lookup"><span data-stu-id="ff157-257">As such, each application should adopt a mesh caching scheme appropriate to its needs, to minimize the resources used for mesh processing and storage.</span></span> <span data-ttu-id="ff157-258">Este esquema debe determinar qué mallas conservar y cuáles descartar, y cuándo actualizar la malla para cada superficie espacial.</span><span class="sxs-lookup"><span data-stu-id="ff157-258">This scheme should determine which meshes to keep and which to discard, and when to update the mesh for each spatial surface.</span></span>

<span data-ttu-id="ff157-259">Muchas de las consideraciones que se analizan allí informarán directamente de cómo la aplicación debe abordar el almacenamiento en caché de malla.</span><span class="sxs-lookup"><span data-stu-id="ff157-259">Many of the considerations discussed there will directly inform how your application should approach mesh caching.</span></span> <span data-ttu-id="ff157-260">Debe tener en cuenta cómo se mueve el usuario a través del entorno, qué superficies son necesarias, cuándo se observarán distintas superficies y cuándo se deben capturar los cambios en el entorno.</span><span class="sxs-lookup"><span data-stu-id="ff157-260">You should consider how the user moves through the environment, which surfaces are needed, when different surfaces will be observed and when changes in the environment should be captured.</span></span>

<span data-ttu-id="ff157-261">Al interpretar el evento "surfaces changed" proporcionado por el observador de superficie, la lógica básica de almacenamiento en caché de malla es la siguiente:</span><span class="sxs-lookup"><span data-stu-id="ff157-261">When interpreting the 'surfaces changed' event provided by the surface observer, the basic mesh caching logic is as follows:</span></span>
* <span data-ttu-id="ff157-262">Si la aplicación ve un identificador de superficie espacial que no ha visto antes, debe tratarlo como una nueva superficie espacial.</span><span class="sxs-lookup"><span data-stu-id="ff157-262">If the application sees a spatial surface ID that it hasn't seen before, it should treat this as a new spatial surface.</span></span>
* <span data-ttu-id="ff157-263">Si la aplicación ve una superficie espacial con un identificador conocido pero con un nuevo tiempo de actualización, debe tratarla como una superficie espacial actualizada.</span><span class="sxs-lookup"><span data-stu-id="ff157-263">If the application sees a spatial surface with a known ID but with a new update time, it should treat this as an updated spatial surface.</span></span>
* <span data-ttu-id="ff157-264">Si la aplicación ya no ve una superficie espacial con un identificador conocido, debe tratarla como una superficie espacial quitada.</span><span class="sxs-lookup"><span data-stu-id="ff157-264">If the application no longer sees a spatial surface with a known ID, it should treat this as a removed spatial surface.</span></span>

<span data-ttu-id="ff157-265">Es decisión de cada aplicación tomar las siguientes decisiones:</span><span class="sxs-lookup"><span data-stu-id="ff157-265">It's up to each application to then make the following choices:</span></span>
* <span data-ttu-id="ff157-266">En el caso de las nuevas superficies espaciales, ¿se debe solicitar la malla?</span><span class="sxs-lookup"><span data-stu-id="ff157-266">For new spatial surfaces, should mesh be requested?</span></span>
   * <span data-ttu-id="ff157-267">Por lo general, la malla debe solicitarse inmediatamente para nuevas superficies espaciales, lo que puede proporcionar información nueva útil al usuario.</span><span class="sxs-lookup"><span data-stu-id="ff157-267">Generally mesh should be requested immediately for new spatial surfaces, which may provide useful new information to the user.</span></span>
   * <span data-ttu-id="ff157-268">Sin embargo, las nuevas superficies espaciales cerca y delante del usuario deben tener prioridad y su malla debe solicitarse primero.</span><span class="sxs-lookup"><span data-stu-id="ff157-268">However, new spatial surfaces near and in front of the user should be given priority and their mesh should be requested first.</span></span>
   * <span data-ttu-id="ff157-269">Si la nueva malla no es necesaria, si, por ejemplo, la aplicación ha "inmovilizado" permanente o temporalmente su modelo del entorno, no se debe solicitar.</span><span class="sxs-lookup"><span data-stu-id="ff157-269">If the new mesh isn't needed, if for example the application has permanently or temporarily 'frozen' its model of the environment, then it shouldn't be requested.</span></span>
* <span data-ttu-id="ff157-270">En el caso de las superficies espaciales actualizadas, ¿se debe solicitar la malla?</span><span class="sxs-lookup"><span data-stu-id="ff157-270">For updated spatial surfaces, should mesh be requested?</span></span>
   * <span data-ttu-id="ff157-271">Las superficies espaciales actualizadas cerca y delante del usuario deben tener prioridad y se debe solicitar primero su malla.</span><span class="sxs-lookup"><span data-stu-id="ff157-271">Updated spatial surfaces near and in front of the user should be given priority and their mesh should be requested first.</span></span>
   * <span data-ttu-id="ff157-272">También puede ser adecuado dar mayor prioridad a las superficies nuevas que a las superficies actualizadas, especialmente durante la experiencia de examen.</span><span class="sxs-lookup"><span data-stu-id="ff157-272">It may also be appropriate to give higher priority to new surfaces than to updated surfaces, especially during the scanning experience.</span></span>
   * <span data-ttu-id="ff157-273">Para limitar los costos de procesamiento, es posible que las aplicaciones deseen limitar la velocidad a la que procesan las actualizaciones de las superficies espaciales.</span><span class="sxs-lookup"><span data-stu-id="ff157-273">To limit processing costs, applications may wish to throttle the rate at which they process updates to spatial surfaces.</span></span>
   * <span data-ttu-id="ff157-274">Es posible deducir que los cambios en una superficie espacial son menores, por ejemplo, si los límites de la superficie son pequeños, en cuyo caso la actualización puede no ser lo suficientemente importante como para procesarla.</span><span class="sxs-lookup"><span data-stu-id="ff157-274">It may be possible to infer that changes to a spatial surface are minor, for example if the bounds of the surface are small, in which case the update may not be important enough to process.</span></span>
   * <span data-ttu-id="ff157-275">Las actualizaciones de superficies espaciales fuera de la región actual de interés del usuario pueden omitirse por completo, aunque en este caso puede ser más eficaz modificar los volúmenes de límite espacial en uso por parte del observador de superficie.</span><span class="sxs-lookup"><span data-stu-id="ff157-275">Updates to spatial surfaces outside the current region of interest of the user may be ignored entirely, though in this case it may be more efficient to modify the spatial bounding volumes in use by the surface observer.</span></span>
* <span data-ttu-id="ff157-276">En el caso de las superficies espaciales quitadas, ¿se debe descartar la malla?</span><span class="sxs-lookup"><span data-stu-id="ff157-276">For removed spatial surfaces, should mesh be discarded?</span></span>
   * <span data-ttu-id="ff157-277">Por lo general, la malla debe descartarse inmediatamente para las superficies espaciales quitadas, de modo que la oclusión del holograma siga siendo correcta.</span><span class="sxs-lookup"><span data-stu-id="ff157-277">Generally mesh should be discarded immediately for removed spatial surfaces, so that hologram occlusion remains correct.</span></span>
   * <span data-ttu-id="ff157-278">Sin embargo, si la aplicación tiene motivos para pensar que una superficie espacial volverá a aparecer en breve (en función del diseño de la experiencia del usuario), puede ser más eficaz conservarla que descartar su malla y volver a crearla más adelante.</span><span class="sxs-lookup"><span data-stu-id="ff157-278">However, if the application has reason to believe that a spatial surface will reappear shortly (based upon the design of the user experience), then it may be more efficient to keep it than to discard its mesh and recreate it again later.</span></span>
   * <span data-ttu-id="ff157-279">Si la aplicación está creando un modelo a gran escala del entorno del usuario, es posible que no quiera descartar ninguna malla.</span><span class="sxs-lookup"><span data-stu-id="ff157-279">If the application is building a large-scale model of the user's environment, then it may not wish to discard any meshes at all.</span></span> <span data-ttu-id="ff157-280">Sin embargo, tendrá que limitar el uso de recursos, posiblemente mediante la cola de mallas en el disco a medida que desaparezcan las superficies espaciales.</span><span class="sxs-lookup"><span data-stu-id="ff157-280">It will still need to limit resource usage though, possibly by spooling meshes to disk as spatial surfaces disappear.</span></span>
   * <span data-ttu-id="ff157-281">Algunos eventos relativamente poco frecuentes durante la generación de la superficie espacial pueden hacer que las superficies espaciales se reemplazan por superficies espaciales nuevas en una ubicación similar, pero con identificadores diferentes.</span><span class="sxs-lookup"><span data-stu-id="ff157-281">Some relatively rare events during spatial surface generation can cause spatial surfaces to be replaced by new spatial surfaces in a similar location but with different IDs.</span></span> <span data-ttu-id="ff157-282">Por lo tanto, las aplicaciones que deciden no descartar una superficie quitada deben tener cuidado de no terminar con varias mallas de superficies espaciales superpuestas que cubren la misma ubicación.</span><span class="sxs-lookup"><span data-stu-id="ff157-282">So, applications that choose not to discard a removed surface should take care not to end up with multiple highly overlapped spatial surfaces meshes covering the same location.</span></span>
* <span data-ttu-id="ff157-283">¿Se debe descartar la malla para cualquier otra superficie espacial?</span><span class="sxs-lookup"><span data-stu-id="ff157-283">Should mesh be discarded for any other spatial surfaces?</span></span>
   * <span data-ttu-id="ff157-284">Aunque exista una superficie espacial, si ya no es útil para la experiencia del usuario, se debe descartar.</span><span class="sxs-lookup"><span data-stu-id="ff157-284">Even while a spatial surface exists, if it's no longer useful to the user's experience then it should be discarded.</span></span> <span data-ttu-id="ff157-285">Por ejemplo, si la aplicación "reemplaza" la sala del otro lado de una puerta por un espacio virtual alternativo, las superficies espaciales de esa sala ya no importan.</span><span class="sxs-lookup"><span data-stu-id="ff157-285">For example, if the application 'replaces' the room on the other side of a doorway with an alternate virtual space then the spatial surfaces in that room no longer matter.</span></span>

<span data-ttu-id="ff157-286">A continuación se muestra una estrategia de almacenamiento en caché de malla de ejemplo, mediante la histeresis espacial y temporal:</span><span class="sxs-lookup"><span data-stu-id="ff157-286">Here's an example mesh caching strategy, using spatial and temporal hysteresis:</span></span>
* <span data-ttu-id="ff157-287">Considere una aplicación que quiera usar un volumen espacial con forma de frustum de interés que siga la mirada del usuario mientras mira y le guía.</span><span class="sxs-lookup"><span data-stu-id="ff157-287">Consider an application that wishes to use a frustum-shaped spatial volume of interest that follows the user's gaze as they look around and walk around.</span></span>
* <span data-ttu-id="ff157-288">Una superficie espacial puede desaparecer temporalmente de este volumen simplemente porque el usuario mira fuera de la superficie o se aleja más de ella... solo para volver a mirar hacia atrás o se acerca un momento más tarde.</span><span class="sxs-lookup"><span data-stu-id="ff157-288">A spatial surface may disappear temporarily from this volume simply because the user looks away from the surface or steps further away from it... only to look back or moves closer again a moment later.</span></span> <span data-ttu-id="ff157-289">En este caso, descartar y volver a crear la malla para esta superficie representa muchos procesamientos redundantes.</span><span class="sxs-lookup"><span data-stu-id="ff157-289">In this case, discarding and re-creating the mesh for this surface represents many redundant processings.</span></span>
* <span data-ttu-id="ff157-290">Para reducir el número de cambios procesados, la aplicación usa dos observadores de superficie espacial, uno incluido en el otro.</span><span class="sxs-lookup"><span data-stu-id="ff157-290">To reduce the number of changes processed, the application uses two spatial surface observers, one contained within the other.</span></span> <span data-ttu-id="ff157-291">El volumen mayor es esférico y sigue al usuario "de forma descifrada". solo se mueve cuando es necesario para asegurarse de que su centro está a menos de 2,0 metros del usuario.</span><span class="sxs-lookup"><span data-stu-id="ff157-291">The larger volume is spherical and follows the user 'lazily'; it only moves when necessary to ensure that its center is within 2.0 meters of the user.</span></span>
* <span data-ttu-id="ff157-292">Las mallas de superficie espacial nuevas y actualizadas siempre se procesan desde el observador de superficie interna más pequeño, pero las mallas se almacenan en caché hasta que desaparecen del observador de superficie externa más grande.</span><span class="sxs-lookup"><span data-stu-id="ff157-292">New and updated spatial surface meshes are always processed from the smaller inner surface observer, but meshes are cached until they disappear from the larger outer surface observer.</span></span> <span data-ttu-id="ff157-293">Esto permite a la aplicación evitar el procesamiento de muchos cambios redundantes debido al movimiento del usuario local.</span><span class="sxs-lookup"><span data-stu-id="ff157-293">This allows the application to avoid processing many redundant changes because of local user movement.</span></span>
* <span data-ttu-id="ff157-294">Puesto que una superficie espacial también puede desaparecer temporalmente debido a la pérdida de seguimiento, la aplicación también aplaza el descarte de las superficies espaciales quitadas durante el seguimiento de la pérdida.</span><span class="sxs-lookup"><span data-stu-id="ff157-294">Since a spatial surface may also disappear temporarily because of tracking loss, the application also defers discarding removed spatial surfaces during tracking loss.</span></span>
* <span data-ttu-id="ff157-295">En general, una aplicación debe evaluar el equilibrio entre el menor procesamiento de actualizaciones y el aumento del uso de memoria para determinar su estrategia de almacenamiento en caché ideal.</span><span class="sxs-lookup"><span data-stu-id="ff157-295">In general, an application should evaluate the tradeoff between reduced update processing and increased memory usage to determine its ideal caching strategy.</span></span>

## <a name="rendering"></a><span data-ttu-id="ff157-296">Representación</span><span class="sxs-lookup"><span data-stu-id="ff157-296">Rendering</span></span>

<span data-ttu-id="ff157-297">Hay tres formas principales en las que las mallas de asignación espacial tienden a usarse para la representación:</span><span class="sxs-lookup"><span data-stu-id="ff157-297">There are three primary ways in which spatial mapping meshes tend to be used for rendering:</span></span>
* <span data-ttu-id="ff157-298">Para la visualización de superficie</span><span class="sxs-lookup"><span data-stu-id="ff157-298">For surface visualization</span></span>
   * <span data-ttu-id="ff157-299">A menudo resulta útil visualizar superficies espaciales directamente.</span><span class="sxs-lookup"><span data-stu-id="ff157-299">It's often useful to visualize spatial surfaces directly.</span></span> <span data-ttu-id="ff157-300">Por ejemplo, la conversión de "sombras" de objetos en superficies espaciales puede proporcionar comentarios visuales útiles al usuario mientras coloca hologramas en las superficies.</span><span class="sxs-lookup"><span data-stu-id="ff157-300">For example, casting 'shadows' from objects onto spatial surfaces can provide helpful visual feedback to the user while they're placing holograms on surfaces.</span></span>
   * <span data-ttu-id="ff157-301">Algo que hay que tener en cuenta es que las mallas espaciales son diferentes al tipo de mallas que un dibujante 3D podría crear.</span><span class="sxs-lookup"><span data-stu-id="ff157-301">One thing to bear in mind is that spatial meshes are different to the kind of meshes that a 3D artist might create.</span></span> <span data-ttu-id="ff157-302">La topología de triángulo no será tan "limpia" como la topología creada por el usuario y la malla sufrirá [varios errores](spatial-mapping.md#what-influences-spatial-mapping-quality).</span><span class="sxs-lookup"><span data-stu-id="ff157-302">The triangle topology won't be as 'clean' as human-created topology, and the mesh will suffer from [various errors](spatial-mapping.md#what-influences-spatial-mapping-quality).</span></span>
   * <span data-ttu-id="ff157-303">Para crear una apariencia visual satisfactoria, puede que desee realizar algún procesamiento de [malla,](spatial-mapping.md#mesh-processing)por ejemplo, para rellenar los huecos o normales de superficie suave.</span><span class="sxs-lookup"><span data-stu-id="ff157-303">To create a pleasing visual aesthetic, you may want to do some [mesh processing](spatial-mapping.md#mesh-processing), for example to fill holes or smooth surface normals.</span></span> <span data-ttu-id="ff157-304">También puede usar un sombreador para proyectar texturas diseñadas por el intérprete en la malla en lugar de visualizar directamente la topología y las normales de la malla.</span><span class="sxs-lookup"><span data-stu-id="ff157-304">You may also wish to use a shader to project artist-designed textures onto your mesh instead of directly visualizing mesh topology and normals.</span></span>
* <span data-ttu-id="ff157-305">Para oclusión de hologramas detrás de superficies reales</span><span class="sxs-lookup"><span data-stu-id="ff157-305">For occluding holograms behind real-world surfaces</span></span>
   * <span data-ttu-id="ff157-306">Las superficies espaciales se pueden representar en un paso [](/windows/win32/direct3d9/depth-buffers) de solo profundidad, lo que solo afecta al búfer de profundidad y no afecta a los destinos de representación de color.</span><span class="sxs-lookup"><span data-stu-id="ff157-306">Spatial surfaces can be rendered in a depth-only pass, which only affects the [depth buffer](/windows/win32/direct3d9/depth-buffers) and doesn't affect color render targets.</span></span>
   * <span data-ttu-id="ff157-307">Esto prime el búfer de profundidad para occluir hologramas representados posteriormente detrás de superficies espaciales.</span><span class="sxs-lookup"><span data-stu-id="ff157-307">This primes the depth buffer to occlude subsequently rendered holograms behind spatial surfaces.</span></span> <span data-ttu-id="ff157-308">La oclusión precisa de hologramas mejora la sensación de que los hologramas existen realmente dentro del espacio físico del usuario.</span><span class="sxs-lookup"><span data-stu-id="ff157-308">Accurate occlusion of holograms enhances the sense that holograms really exist within the user's physical space.</span></span>
   * <span data-ttu-id="ff157-309">Para habilitar la representación de solo profundidad, actualice el estado de mezcla para establecer [RenderTargetWriteMask](/windows/win32/api/d3d11_1/ns-d3d11_1-d3d11_render_target_blend_desc1) en cero para todos los destinos de representación de color.</span><span class="sxs-lookup"><span data-stu-id="ff157-309">To enable depth-only rendering, update your blend state to set the [RenderTargetWriteMask](/windows/win32/api/d3d11_1/ns-d3d11_1-d3d11_render_target_blend_desc1) to zero for all color render targets.</span></span>
* <span data-ttu-id="ff157-310">Para modificar la apariencia de los hologramas ocluido por superficies del mundo real</span><span class="sxs-lookup"><span data-stu-id="ff157-310">For modifying the appearance of holograms occluded by real-world surfaces</span></span>
   * <span data-ttu-id="ff157-311">Normalmente, la geometría que se representa se oculta cuando se oculta.</span><span class="sxs-lookup"><span data-stu-id="ff157-311">Normally rendered geometry is hidden when it's occluded.</span></span> <span data-ttu-id="ff157-312">Esto se consigue estableciendo la [](/windows/win32/api/d3d11/ns-d3d11-d3d11_depth_stencil_desc) función de profundidad en el estado de la galería de símbolos de profundidad  en "menor o igual que", lo que hace que la geometría sea visible solo cuando está más cerca de la cámara que toda la geometría que se representó anteriormente.</span><span class="sxs-lookup"><span data-stu-id="ff157-312">This is achieved by setting the depth function in your [depth-stencil state](/windows/win32/api/d3d11/ns-d3d11-d3d11_depth_stencil_desc) to "less than or equal", which causes geometry to be visible only where it's **closer** to the camera than all previously rendered geometry.</span></span>
   * <span data-ttu-id="ff157-313">Sin embargo, puede ser útil mantener cierta geometría visible incluso cuando está oclusa y modificar su apariencia cuando se ocluse como una manera de proporcionar comentarios visuales al usuario.</span><span class="sxs-lookup"><span data-stu-id="ff157-313">However, it may be useful to keep certain geometry visible even when it's occluded, and to modify its appearance when occluded as a way of providing visual feedback to the user.</span></span> <span data-ttu-id="ff157-314">Por ejemplo, esto permite que la aplicación muestre al usuario la ubicación de un objeto a la vez que deja claro que está detrás de una superficie real.</span><span class="sxs-lookup"><span data-stu-id="ff157-314">For example, this allows the application to show the user the location of an object while making it clear that is behind a real-world surface.</span></span>
   * <span data-ttu-id="ff157-315">Para lograrlo, represente la geometría una segunda vez con un sombreador diferente que cree la apariencia "ocluida" deseada.</span><span class="sxs-lookup"><span data-stu-id="ff157-315">To achieve this, render the geometry a second time with a different shader that creates the desired 'occluded' appearance.</span></span> <span data-ttu-id="ff157-316">Antes de representar la geometría por segunda vez, realice dos cambios en el estado de la galería de símbolos [de profundidad.](/windows/win32/api/d3d11/ns-d3d11-d3d11_depth_stencil_desc)</span><span class="sxs-lookup"><span data-stu-id="ff157-316">Before rendering the geometry for the second time, make two changes to your [depth-stencil state](/windows/win32/api/d3d11/ns-d3d11-d3d11_depth_stencil_desc).</span></span> <span data-ttu-id="ff157-317">En primer lugar, establezca la función de profundidad en "mayor o igual  que" para que la geometría solo sea visible cuando esté más lejos de la cámara que toda la geometría que se representó anteriormente.</span><span class="sxs-lookup"><span data-stu-id="ff157-317">First, set the depth function to "greater than or equal" so that the geometry will be visible only where it's **further** from the camera than all previously rendered geometry.</span></span> <span data-ttu-id="ff157-318">En segundo lugar, establezca DepthWriteMask en cero, para que no se modifique el búfer de  profundidad (el búfer de profundidad debe seguir representando la profundidad de la geometría más cercana a la cámara).</span><span class="sxs-lookup"><span data-stu-id="ff157-318">Second, set the DepthWriteMask to zero, so that the depth buffer won't be modified (the depth buffer should continue to represent the depth of the geometry **closest** to the camera).</span></span>

<span data-ttu-id="ff157-319">[El rendimiento](../develop/platform-capabilities-and-apis/understanding-performance-for-mixed-reality.md) es una preocupación importante al representar mallas de asignación espacial.</span><span class="sxs-lookup"><span data-stu-id="ff157-319">[Performance](../develop/platform-capabilities-and-apis/understanding-performance-for-mixed-reality.md) is an important concern when rendering spatial mapping meshes.</span></span> <span data-ttu-id="ff157-320">Estas son algunas técnicas de rendimiento de representación específicas de la representación de mallas de asignación espacial:</span><span class="sxs-lookup"><span data-stu-id="ff157-320">Here are some rendering performance techniques specific to rendering spatial mapping meshes:</span></span>
* <span data-ttu-id="ff157-321">Ajuste de la densidad del triángulo</span><span class="sxs-lookup"><span data-stu-id="ff157-321">Adjust triangle density</span></span>
   * <span data-ttu-id="ff157-322">Al solicitar mallas de superficie espacial del observador de superficie, solicite la densidad más baja de las mallas de triángulo que serán suficientes para sus necesidades.</span><span class="sxs-lookup"><span data-stu-id="ff157-322">When requesting spatial surface meshes from your surface observer, request the lowest density of triangle meshes that will suffice for your needs.</span></span>
   * <span data-ttu-id="ff157-323">Puede tener sentido variar la densidad de triángulos en una superficie por superficie, en función de la distancia de la superficie con el usuario y su relevancia para la experiencia del usuario.</span><span class="sxs-lookup"><span data-stu-id="ff157-323">It may make sense to vary triangle density on a surface by surface basis, depending on the surface's distance from the user, and its relevance to the user experience.</span></span>
   * <span data-ttu-id="ff157-324">La reducción de los recuentos de triángulos reducirá el uso de memoria y los costos de procesamiento de vértices en la GPU, aunque no afectará a los costos de procesamiento de píxeles.</span><span class="sxs-lookup"><span data-stu-id="ff157-324">Reducing triangle counts will reduce memory usage and vertex processing costs on the GPU, though it won't affect pixel processing costs.</span></span>
* <span data-ttu-id="ff157-325">Uso de la selección de frustum</span><span class="sxs-lookup"><span data-stu-id="ff157-325">Use frustum culling</span></span>
   * <span data-ttu-id="ff157-326">La selección de frustum omite los objetos de dibujo que no se pueden ver porque están fuera de la frustum de presentación actual.</span><span class="sxs-lookup"><span data-stu-id="ff157-326">Frustum culling skips drawing objects that cannot be seen because they are outside the current display frustum.</span></span> <span data-ttu-id="ff157-327">Esto reduce los costos de procesamiento de CPU y GPU.</span><span class="sxs-lookup"><span data-stu-id="ff157-327">This reduces both CPU and GPU processing costs.</span></span>
   * <span data-ttu-id="ff157-328">Dado que la selección se realiza por malla y las superficies espaciales pueden ser grandes, dividir cada malla de superficie espacial en fragmentos más pequeños puede dar lugar a una selección más eficaz (en que se representan menos triángulos fuera de pantalla).</span><span class="sxs-lookup"><span data-stu-id="ff157-328">Since culling is performed on a per-mesh basis and spatial surfaces can be large, breaking each spatial surface mesh into smaller chunks may result in more efficient culling (in that fewer offscreen triangles are rendered).</span></span> <span data-ttu-id="ff157-329">Sin embargo, hay un cambio; entre más mallas tenga, más llamadas de dibujo debe realizar, lo que puede aumentar los costos de CPU.</span><span class="sxs-lookup"><span data-stu-id="ff157-329">There's a tradeoff, however; the more meshes you have, the more draw calls you must make, which can increase CPU costs.</span></span> <span data-ttu-id="ff157-330">En un caso extremo, los propios cálculos de la selección de frustum podrían incluso tener un costo de CPU cuantificable.</span><span class="sxs-lookup"><span data-stu-id="ff157-330">In an extreme case, the frustum culling calculations themselves could even have a measurable CPU cost.</span></span>
* <span data-ttu-id="ff157-331">Ajustar el orden de representación</span><span class="sxs-lookup"><span data-stu-id="ff157-331">Adjust rendering order</span></span>
   * <span data-ttu-id="ff157-332">Las superficies espaciales tienden a ser grandes, ya que representan todo el entorno del usuario que las rodea.</span><span class="sxs-lookup"><span data-stu-id="ff157-332">Spatial surfaces tend to be large, because they represent the user's entire environment surrounding them.</span></span> <span data-ttu-id="ff157-333">Los costos de procesamiento de píxeles en la GPU pueden ser elevados, especialmente en los casos en los que hay más de una capa de geometría visible (incluidas las superficies espaciales y otros hologramas).</span><span class="sxs-lookup"><span data-stu-id="ff157-333">Pixel processing costs on the GPU can be high, especially in cases where there's more than one layer of visible geometry (including both spatial surfaces and other holograms).</span></span> <span data-ttu-id="ff157-334">En este caso, la capa más cercana al usuario estará ocultando las capas más lejanas, por lo que se desperdicia el tiempo de GPU dedicado a representar esas capas más lejanas.</span><span class="sxs-lookup"><span data-stu-id="ff157-334">In this case, the layer nearest to the user will be occluding any layers further away, so any GPU time spent rendering those more distant layers is wasted.</span></span>
   * <span data-ttu-id="ff157-335">Para reducir este trabajo redundante en la GPU, ayuda a representar superficies opacas en orden de front-to-back (más cercanas primero, más lejanas).</span><span class="sxs-lookup"><span data-stu-id="ff157-335">To reduce this redundant work on the GPU, it helps to render opaque surfaces in front-to-back order (closer ones first, more distant ones last).</span></span> <span data-ttu-id="ff157-336">Por "opaco", nos refieremos a superficies para las que DepthWriteMask se establece en una en el estado de la galería [de símbolos de profundidad.](/windows/win32/api/d3d11/ns-d3d11-d3d11_depth_stencil_desc)</span><span class="sxs-lookup"><span data-stu-id="ff157-336">By 'opaque' we mean surfaces for which the DepthWriteMask is set to one in your [depth-stencil state](/windows/win32/api/d3d11/ns-d3d11-d3d11_depth_stencil_desc).</span></span> <span data-ttu-id="ff157-337">Cuando se representan las superficies más cercanas, se prime el búfer de profundidad para que el procesador de píxeles de la GPU omita eficazmente las superficies más lejanas.</span><span class="sxs-lookup"><span data-stu-id="ff157-337">When the nearest surfaces are rendered, they'll prime the depth buffer so that more distant surfaces are efficiently skipped by the pixel processor on the GPU.</span></span>

## <a name="mesh-processing"></a><span data-ttu-id="ff157-338">Procesamiento de malla</span><span class="sxs-lookup"><span data-stu-id="ff157-338">Mesh Processing</span></span>

<span data-ttu-id="ff157-339">Es posible que una aplicación desee realizar [varias operaciones en](spatial-mapping.md#mesh-processing) mallas de superficie espacial para satisfacer sus necesidades.</span><span class="sxs-lookup"><span data-stu-id="ff157-339">An application may want to do [various operations](spatial-mapping.md#mesh-processing) on spatial surface meshes to suit its needs.</span></span> <span data-ttu-id="ff157-340">Los datos de índice y vértice proporcionados con cada malla de superficie espacial usan el mismo diseño conocido que los búferes de vértice e índice que se usan para representar [mallas](/windows/win32/direct3d9/rendering-from-vertex-and-index-buffers) de triángulo en todas las API de representación modernas.</span><span class="sxs-lookup"><span data-stu-id="ff157-340">The index and vertex data provided with each spatial surface mesh uses the same familiar layout as the [vertex and index buffers](/windows/win32/direct3d9/rendering-from-vertex-and-index-buffers) that are used for rendering triangle meshes in all modern rendering APIs.</span></span> <span data-ttu-id="ff157-341">Sin embargo, un hecho clave que hay que tener en cuenta es que los triángulos de asignación espacial tienen un orden de sinuoso en el sentido **de las agujas del reloj.**</span><span class="sxs-lookup"><span data-stu-id="ff157-341">However, one key fact to be aware of is that spatial mapping triangles have a **front-clockwise winding order**.</span></span> <span data-ttu-id="ff157-342">Cada triángulo se representa mediante tres índices de vértice en el búfer de índice de la malla  y estos índices identificarán los  vértices del triángulo en un orden en el sentido de las agujas del reloj, cuando el triángulo se ve desde el lado frontal.</span><span class="sxs-lookup"><span data-stu-id="ff157-342">Each triangle is represented by three vertex indices in the mesh's index buffer and these indices will identify the triangle's vertices in a **clockwise** order, when the triangle is viewed from the **front** side.</span></span> <span data-ttu-id="ff157-343">El lado frontal (o exterior) de las mallas de superficie espacial se corresponde con el lado frontal (visible) de las superficies del mundo real.</span><span class="sxs-lookup"><span data-stu-id="ff157-343">The front side (or outside) of spatial surface meshes corresponds as you would expect to the front (visible) side of real world surfaces.</span></span>

<span data-ttu-id="ff157-344">Las aplicaciones solo deben realizar la simplificación de mallas si la densidad de triángulo más gruesa proporcionada por el observador de superficie sigue siendo insuficientemente gruesa: este trabajo es costoso desde el punto de vista computacional y ya lo está realizando el tiempo de ejecución para generar los distintos niveles de detalle proporcionados.</span><span class="sxs-lookup"><span data-stu-id="ff157-344">Applications should only do mesh simplification if the coarsest triangle density provided by the surface observer is still insufficiently coarse - this work is computationally expensive and already being performed by the runtime to generate the various provided levels of detail.</span></span>

<span data-ttu-id="ff157-345">Dado que cada observador de superficie puede proporcionar varias superficies espaciales no conectadas, es posible que algunas aplicaciones deseen recortar estas mallas de superficie espacial entre sí y, a continuación, unirlas.</span><span class="sxs-lookup"><span data-stu-id="ff157-345">Because each surface observer can provide multiple unconnected spatial surfaces, some applications may wish to clip these spatial surface meshes against each other, then zipper them together.</span></span> <span data-ttu-id="ff157-346">En general, el paso de recorte es necesario, ya que las mallas de superficie espacial cercanas a menudo se superponen ligeramente.</span><span class="sxs-lookup"><span data-stu-id="ff157-346">In general, the clipping step is required, as nearby spatial surface meshes often overlap slightly.</span></span>

## <a name="raycasting-and-collision"></a><span data-ttu-id="ff157-347">Difusión de rayos y colisión</span><span class="sxs-lookup"><span data-stu-id="ff157-347">Raycasting and Collision</span></span>

<span data-ttu-id="ff157-348">Para que una API física (como [Havok)](https://www.havok.com/)proporcione una aplicación con funcionalidad de difusión por rayos y colisión para superficies espaciales, la aplicación debe proporcionar mallas de superficie espacial a la API física.</span><span class="sxs-lookup"><span data-stu-id="ff157-348">In order for a physics API (such as [Havok](https://www.havok.com/)) to provide an application with raycasting and collision functionality for spatial surfaces, the application must provide spatial surface meshes to the physics API.</span></span> <span data-ttu-id="ff157-349">Las mallas usadas para la física suelen tener las siguientes propiedades:</span><span class="sxs-lookup"><span data-stu-id="ff157-349">Meshes used for physics often have the following properties:</span></span>
* <span data-ttu-id="ff157-350">Contienen solo un pequeño número de triángulos.</span><span class="sxs-lookup"><span data-stu-id="ff157-350">They contain only small numbers of triangles.</span></span> <span data-ttu-id="ff157-351">Las operaciones físicas son más intensivas computacionalmente que las operaciones de representación.</span><span class="sxs-lookup"><span data-stu-id="ff157-351">Physics operations are more computationally intensive than rendering operations.</span></span>
* <span data-ttu-id="ff157-352">Son "herméticos".</span><span class="sxs-lookup"><span data-stu-id="ff157-352">They're 'water-tight'.</span></span> <span data-ttu-id="ff157-353">Las superficies diseñadas para ser sólidas no deben tener pequeños huecos; incluso los huecos demasiado pequeños para ser visibles pueden causar problemas.</span><span class="sxs-lookup"><span data-stu-id="ff157-353">Surfaces intended to be solid shouldn't have small holes in them; even holes too small to be visible can cause problems.</span></span>
* <span data-ttu-id="ff157-354">Se convierten en cascos convexas.</span><span class="sxs-lookup"><span data-stu-id="ff157-354">They're converted into convex hulls.</span></span> <span data-ttu-id="ff157-355">Las cascos convexas tienen pocos polígonos y están libres de huecos, y son mucho más eficaces computacionalmente para procesar que las mallas de triángulos sin procesar.</span><span class="sxs-lookup"><span data-stu-id="ff157-355">Convex hulls have few polygons and are free of holes, and they're much more computationally efficient to process than raw triangle meshes.</span></span>

<span data-ttu-id="ff157-356">Al realizar difusión por rayos en superficies espaciales, tenga en cuenta que estas superficies suelen ser formas complejas y desordenadas llenas de pequeños detalles desordenados, al igual que su escritorio.</span><span class="sxs-lookup"><span data-stu-id="ff157-356">When doing raycasts against spatial surfaces, bear in mind that these surfaces are often complex, cluttered shapes full of messy little details - just like your desk!</span></span> <span data-ttu-id="ff157-357">Esto significa que un solo raycast a menudo es insuficiente para proporcionar suficiente información sobre la forma de la superficie y la forma del espacio vacío cerca de ella.</span><span class="sxs-lookup"><span data-stu-id="ff157-357">This means that a single raycast is often insufficient to give you enough information about the shape of the surface and the shape of the empty space near it.</span></span> <span data-ttu-id="ff157-358">Normalmente es una buena idea realizar muchos raycasts dentro de un área pequeña y usar los resultados agregados para obtener una comprensión más confiable de la superficie.</span><span class="sxs-lookup"><span data-stu-id="ff157-358">It's usually a good idea to do many raycasts within a small area and to use the aggregate results to derive a more reliable understanding of the surface.</span></span> <span data-ttu-id="ff157-359">Por ejemplo, si se usa el promedio de 10 raycasts para guiar la colocación de hologramas en una superficie, se produce un resultado mucho más suave y menos "vibración" que el uso de un solo raycast.</span><span class="sxs-lookup"><span data-stu-id="ff157-359">For example, using the average of 10 raycasts to guide hologram placement on a surface will yield a far smoother and less 'jittery' result that using just a single raycast.</span></span>

<span data-ttu-id="ff157-360">Sin embargo, tenga en cuenta que cada transmisión por rayos puede tener un alto costo computacional.</span><span class="sxs-lookup"><span data-stu-id="ff157-360">However, bear in mind that each raycast can have a high computational cost.</span></span> <span data-ttu-id="ff157-361">En función del escenario de uso, debe intercambiar el costo computacional de los raycasts [](spatial-mapping.md#mesh-processing) adicionales (se realiza cada fotograma) con el costo computacional del procesamiento de malla para suavizar y quitar los huecos de las superficies espaciales (se realiza cuando se actualizan las mallas espaciales).</span><span class="sxs-lookup"><span data-stu-id="ff157-361">Depending on your usage scenario, you should trade off the computational cost of extra raycasts (done every frame) against the computational cost of [mesh processing](spatial-mapping.md#mesh-processing) to smooth and remove holes in spatial surfaces (done when spatial meshes are updated).</span></span>

## <a name="the-environment-scanning-experience"></a><span data-ttu-id="ff157-362">La experiencia de examen del entorno</span><span class="sxs-lookup"><span data-stu-id="ff157-362">The environment scanning experience</span></span>

<span data-ttu-id="ff157-363">Cada aplicación que usa la asignación espacial debe considerar la posibilidad de proporcionar una "experiencia de examen". el proceso a través del cual la aplicación guía al usuario para examinar las superficies necesarias para que la aplicación funcione correctamente.</span><span class="sxs-lookup"><span data-stu-id="ff157-363">Each application that uses spatial mapping should consider providing a 'scanning experience'; the process through which the application guides the user to scan surfaces that are necessary for the application to function correctly.</span></span>

<span data-ttu-id="ff157-364">![Ejemplo de examen](images/sr-mixedworld-140429-8pm-00068-1000px.png)</span><span class="sxs-lookup"><span data-stu-id="ff157-364">![Example of scanning](images/sr-mixedworld-140429-8pm-00068-1000px.png)</span></span><br>
<span data-ttu-id="ff157-365">*Ejemplo de examen*</span><span class="sxs-lookup"><span data-stu-id="ff157-365">*Example of scanning*</span></span>

<span data-ttu-id="ff157-366">La naturaleza de esta experiencia de análisis puede variar considerablemente en función de las necesidades de cada aplicación, pero dos principios principales deben guiar su diseño.</span><span class="sxs-lookup"><span data-stu-id="ff157-366">The nature of this scanning experience can vary greatly depending upon each application's needs, but two main principles should guide its design.</span></span>

<span data-ttu-id="ff157-367">En primer lugar, **la comunicación clara con el usuario es la principal preocupación.**</span><span class="sxs-lookup"><span data-stu-id="ff157-367">Firstly, **clear communication with the user is the primary concern**.</span></span> <span data-ttu-id="ff157-368">El usuario siempre debe tener en cuenta si se cumplen los requisitos de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="ff157-368">The user should always be aware of whether the application's requirements are being met.</span></span> <span data-ttu-id="ff157-369">Cuando no se cumplen, debe dejar claro inmediatamente al usuario por qué es así y se le debe llevar rápidamente a realizar la acción adecuada.</span><span class="sxs-lookup"><span data-stu-id="ff157-369">When they aren't being met, it should be immediately clear to the user why this is so and they should be quickly led to take the appropriate action.</span></span>

<span data-ttu-id="ff157-370">En segundo lugar, **las aplicaciones deben intentar lograr un equilibrio entre eficacia y confiabilidad.**</span><span class="sxs-lookup"><span data-stu-id="ff157-370">Secondly, **applications should attempt to strike a balance between efficiency and reliability**.</span></span> <span data-ttu-id="ff157-371">Cuando sea posible hacerlo de forma **confiable,** las aplicaciones deben analizar automáticamente los datos de asignación espacial para ahorrar tiempo al usuario.</span><span class="sxs-lookup"><span data-stu-id="ff157-371">When it's possible to do so **reliably**, applications should automatically analyze spatial mapping data to save the user time.</span></span> <span data-ttu-id="ff157-372">Cuando no es posible hacerlo de forma confiable, las aplicaciones deben permitir que el usuario proporcione rápidamente a la aplicación la información adicional que requiere.</span><span class="sxs-lookup"><span data-stu-id="ff157-372">When it isn't possible to do so reliably, applications should instead enable the user to quickly provide the application with the additional information it requires.</span></span>

<span data-ttu-id="ff157-373">Para ayudar a diseñar la experiencia de análisis adecuada, tenga en cuenta cuál de las siguientes posibilidades es aplicable a la aplicación:</span><span class="sxs-lookup"><span data-stu-id="ff157-373">To help design the right scanning experience, consider which of the following possibilities are applicable to your application:</span></span>

* <span data-ttu-id="ff157-374">**Sin experiencia de análisis**</span><span class="sxs-lookup"><span data-stu-id="ff157-374">**No scanning experience**</span></span>
   * <span data-ttu-id="ff157-375">Una aplicación puede funcionar perfectamente sin ninguna experiencia de examen guiado. aprenderá sobre las superficies que se observan durante el movimiento natural del usuario.</span><span class="sxs-lookup"><span data-stu-id="ff157-375">An application may function perfectly without any guided scanning experience; it will learn about surfaces that are observed in the course of natural user movement.</span></span>
   * <span data-ttu-id="ff157-376">Por ejemplo, una aplicación que permite al usuario dibujar en superficies con pintura de aspersión holográfica solo requiere conocimiento de las superficies actualmente visibles para el usuario.</span><span class="sxs-lookup"><span data-stu-id="ff157-376">For example, an application that lets the user draw on surfaces with holographic spray paint requires knowledge only of the surfaces currently visible to the user.</span></span>
   * <span data-ttu-id="ff157-377">El entorno ya se puede examinar si es uno en el que el usuario ya ha dedicado mucho tiempo a usar HoloLens.</span><span class="sxs-lookup"><span data-stu-id="ff157-377">The environment may be scanned already if it's one in which the user has already spent lots of time using the HoloLens.</span></span>
   * <span data-ttu-id="ff157-378">Sin embargo, tenga en cuenta que la cámara que usa la asignación espacial solo puede ver 3,1 m delante del usuario, por lo que la asignación espacial no conocerá ninguna superficie más lejana a menos que el usuario las haya observado desde una distancia más cercana en el pasado.</span><span class="sxs-lookup"><span data-stu-id="ff157-378">Bear in mind however that the camera used by spatial mapping can only see 3.1 m in front of the user, so spatial mapping won't know about any more distant surfaces unless the user has observed them from a closer distance in the past.</span></span>
   * <span data-ttu-id="ff157-379">Para que el usuario entienda qué superficies se han examinado, la aplicación debe proporcionar comentarios visuales a este efecto, por ejemplo, la conversión de sombras virtuales en superficies examinadas puede ayudar al usuario a colocar hologramas en esas superficies.</span><span class="sxs-lookup"><span data-stu-id="ff157-379">So the user understands which surfaces have been scanned, the application should provide visual feedback to this effect, for example casting virtual shadows onto scanned surfaces may help the user place holograms on those surfaces.</span></span>
   * <span data-ttu-id="ff157-380">En este caso, los volúmenes delimitadores del observador de superficie espacial deben actualizarse a un sistema de coordenadas [espaciales](coordinate-systems.md)bloqueado por el cuerpo para que sigan al usuario.</span><span class="sxs-lookup"><span data-stu-id="ff157-380">For this case, the spatial surface observer's bounding volumes should be updated each frame to a body-locked [spatial coordinate system](coordinate-systems.md), so that they follow the user.</span></span>

* <span data-ttu-id="ff157-381">**Buscar una ubicación adecuada**</span><span class="sxs-lookup"><span data-stu-id="ff157-381">**Find a suitable location**</span></span>
   * <span data-ttu-id="ff157-382">Una aplicación puede diseñarse para su uso en una ubicación con requisitos específicos.</span><span class="sxs-lookup"><span data-stu-id="ff157-382">An application may be designed for use in a location with specific requirements.</span></span>
   * <span data-ttu-id="ff157-383">Por ejemplo, la aplicación puede requerir un área vacía alrededor del usuario para que pueda practicar de forma segura holographic-fu.</span><span class="sxs-lookup"><span data-stu-id="ff157-383">For example, the application may require an empty area around the user so they can safely practice holographic kung-fu.</span></span>
   * <span data-ttu-id="ff157-384">Las aplicaciones deben comunicar cualquier requisito específico al usuario por adelantado y reforzarlos con comentarios visuales claros.</span><span class="sxs-lookup"><span data-stu-id="ff157-384">Applications should communicate any specific requirements to the user up-front, and reinforce them with clear visual feedback.</span></span>
   * <span data-ttu-id="ff157-385">En este ejemplo, la aplicación debe visualizar la extensión del área vacía necesaria y resaltar visualmente la presencia de objetos no deseados dentro de esta zona.</span><span class="sxs-lookup"><span data-stu-id="ff157-385">In this example, the application should visualize the extent of the required empty area and visually highlight the presence of any undesired objects within this zone.</span></span>
   * <span data-ttu-id="ff157-386">En este caso, los volúmenes delimitadores del observador de superficie espacial deben usar un sistema de coordenadas [espaciales](coordinate-systems.md) bloqueado por el mundo en la ubicación elegida.</span><span class="sxs-lookup"><span data-stu-id="ff157-386">For this case, the spatial surface observer's bounding volumes should use a world-locked [spatial coordinate system](coordinate-systems.md) in the chosen location.</span></span>

* <span data-ttu-id="ff157-387">**Buscar una configuración adecuada de superficies**</span><span class="sxs-lookup"><span data-stu-id="ff157-387">**Find a suitable configuration of surfaces**</span></span>
   * <span data-ttu-id="ff157-388">Una aplicación puede requerir una configuración específica de superficies, por ejemplo, dos paredes grandes, planas y opuestas para crear una sala holográfica de reflejos.</span><span class="sxs-lookup"><span data-stu-id="ff157-388">An application may require a specific configuration of surfaces, for example two large, flat, opposing walls to create a holographic hall of mirrors.</span></span>
   * <span data-ttu-id="ff157-389">En tales casos, la aplicación deberá analizar las superficies proporcionadas por la asignación espacial para detectar superficies adecuadas y dirigir al usuario hacia ellas.</span><span class="sxs-lookup"><span data-stu-id="ff157-389">In such cases, the application will need to analyze the surfaces provided by spatial mapping to detect suitable surfaces, and direct the user toward them.</span></span>
   * <span data-ttu-id="ff157-390">El usuario debe tener una opción de reserva si el análisis de la superficie de la aplicación no es confiable.</span><span class="sxs-lookup"><span data-stu-id="ff157-390">The user should have a fallback option if the application's surface analysis isn't reliable.</span></span> <span data-ttu-id="ff157-391">Por ejemplo, si la aplicación identifica incorrectamente una puerta como una pared plana, el usuario necesita una manera sencilla de corregir este error.</span><span class="sxs-lookup"><span data-stu-id="ff157-391">For example, if the application incorrectly identifies a doorway as a flat wall, the user needs a simple way to correct this error.</span></span>

* <span data-ttu-id="ff157-392">**Examen de parte del entorno**</span><span class="sxs-lookup"><span data-stu-id="ff157-392">**Scan part of the environment**</span></span>
   * <span data-ttu-id="ff157-393">Es posible que una aplicación solo desee capturar parte del entorno, según lo indicado por el usuario.</span><span class="sxs-lookup"><span data-stu-id="ff157-393">An application may wish to only capture part of the environment, as directed by the user.</span></span>
   * <span data-ttu-id="ff157-394">Por ejemplo, la aplicación examina parte de una sala para que el usuario pueda publicar un anuncio clasificado holográfico para los productos que quiere vender.</span><span class="sxs-lookup"><span data-stu-id="ff157-394">For example, the application scans part of a room so the user may post a holographic classified ad for furniture they wish to sell.</span></span>
   * <span data-ttu-id="ff157-395">En este caso, la aplicación debe capturar datos de asignación espacial dentro de las regiones observadas por el usuario durante su examen.</span><span class="sxs-lookup"><span data-stu-id="ff157-395">In this case, the application should capture spatial mapping data within the regions observed by the user during their scan.</span></span>

* <span data-ttu-id="ff157-396">**Examen de toda la sala**</span><span class="sxs-lookup"><span data-stu-id="ff157-396">**Scan the whole room**</span></span>
   * <span data-ttu-id="ff157-397">Una aplicación puede requerir un examen de todas las superficies de la sala actual, incluidas las que están detrás del usuario.</span><span class="sxs-lookup"><span data-stu-id="ff157-397">An application may require a scan of all of the surfaces in the current room, including those behind the user.</span></span>
   * <span data-ttu-id="ff157-398">Por ejemplo, un juego puede poner al usuario en el rol deIversón, bajo el dominio de cientos de pequeños lputianos que se aproximan desde todas las direcciones.</span><span class="sxs-lookup"><span data-stu-id="ff157-398">For example, a game may put the user in the role of Gulliver, under siege from hundreds of tiny Lilliputians approaching from all directions.</span></span>
   * <span data-ttu-id="ff157-399">En tales casos, la aplicación deberá determinar cuántas de las superficies de la sala actual ya se han examinado y dirigir la mirada del usuario para rellenar espacios significativos.</span><span class="sxs-lookup"><span data-stu-id="ff157-399">In such cases, the application will need to determine how many of the surfaces in the current room have already been scanned, and direct the user's gaze to fill in significant gaps.</span></span>
   * <span data-ttu-id="ff157-400">La clave de este proceso es proporcionar comentarios visuales que aclare al usuario qué superficies aún no se han examinado.</span><span class="sxs-lookup"><span data-stu-id="ff157-400">The key to this process is providing visual feedback that makes it clear to the user which surfaces haven't yet been scanned.</span></span> <span data-ttu-id="ff157-401">Por ejemplo, la aplicación [](/windows/win32/direct3d9/fog-formulas) podría usar la curva basada en la distancia para resaltar visualmente las regiones que no están cubiertas por superficies de asignación espacial.</span><span class="sxs-lookup"><span data-stu-id="ff157-401">The application could, for example,  use [distance-based fog](/windows/win32/direct3d9/fog-formulas) to visually highlight regions that aren't covered by spatial mapping surfaces.</span></span>

* <span data-ttu-id="ff157-402">**Tomar una instantánea inicial del entorno**</span><span class="sxs-lookup"><span data-stu-id="ff157-402">**Take an initial snapshot of the environment**</span></span>
   * <span data-ttu-id="ff157-403">Es posible que una aplicación quiera omitir todos los cambios en el entorno después de tomar una "instantánea" inicial.</span><span class="sxs-lookup"><span data-stu-id="ff157-403">An application may wish to ignore all changes in the environment after taking an initial 'snapshot'.</span></span>
   * <span data-ttu-id="ff157-404">Esto puede ser adecuado para evitar la interrupción de los datos creados por el usuario que están estrechamente acoplados al estado inicial del entorno.</span><span class="sxs-lookup"><span data-stu-id="ff157-404">This may be appropriate to avoid disruption of user-created data that is tightly coupled to the initial state of the environment.</span></span>
   * <span data-ttu-id="ff157-405">En este caso, la aplicación debe realizar una copia de los datos de asignación espacial en su estado inicial una vez completado el examen.</span><span class="sxs-lookup"><span data-stu-id="ff157-405">In this case, the application should make a copy of the spatial mapping data in its initial state once the scan is complete.</span></span>
   * <span data-ttu-id="ff157-406">Las aplicaciones deben seguir recibiendo actualizaciones de los datos de asignación espacial si el entorno todavía debe ocluyendo correctamente los hologramas.</span><span class="sxs-lookup"><span data-stu-id="ff157-406">Applications should continue receiving updates to spatial mapping data if holograms are still to be correctly occluded by the environment.</span></span>
   * <span data-ttu-id="ff157-407">Las actualizaciones continuas de los datos de asignación espacial también permiten visualizar los cambios que se han producido, lo que aclara al usuario las diferencias entre los estados anteriores y actuales del entorno.</span><span class="sxs-lookup"><span data-stu-id="ff157-407">Continued updates to spatial mapping data also allow visualizing any changes that have occurred, clarifying to the user the differences between prior and present states of the environment.</span></span>

* <span data-ttu-id="ff157-408">**Tomar instantáneas iniciadas por el usuario del entorno**</span><span class="sxs-lookup"><span data-stu-id="ff157-408">**Take user-initiated snapshots of the environment**</span></span>
   * <span data-ttu-id="ff157-409">Es posible que una aplicación solo desee responder a los cambios del entorno cuando lo indique el usuario.</span><span class="sxs-lookup"><span data-stu-id="ff157-409">An application may only wish to respond to environmental changes when instructed by the user.</span></span>
   * <span data-ttu-id="ff157-410">Por ejemplo, el usuario podría crear varias "miradas" 3D de un amigo capturando sus poses en momentos diferentes.</span><span class="sxs-lookup"><span data-stu-id="ff157-410">For example, the user could create multiple 3D 'statues' of a friend by capturing their poses at different moments.</span></span>

* <span data-ttu-id="ff157-411">**Permitir al usuario cambiar el entorno**</span><span class="sxs-lookup"><span data-stu-id="ff157-411">**Allow the user to change the environment**</span></span>
   * <span data-ttu-id="ff157-412">Una aplicación se puede diseñar para responder en tiempo real a los cambios realizados en el entorno del usuario.</span><span class="sxs-lookup"><span data-stu-id="ff157-412">An application may be designed to respond in real time to any changes made in the user's environment.</span></span>
   * <span data-ttu-id="ff157-413">Por ejemplo, el usuario que dibuja una escena podría desencadenar un "cambio de escena" para un juego holográfico que tiene lugar en el otro lado.</span><span class="sxs-lookup"><span data-stu-id="ff157-413">For example, the user drawing a curtain could trigger 'scene change' for a holographic play taking place on the other side.</span></span>

* <span data-ttu-id="ff157-414">**Guía al usuario para evitar errores en los datos de asignación espacial**</span><span class="sxs-lookup"><span data-stu-id="ff157-414">**Guide the user to avoid errors in the spatial mapping data**</span></span>
   * <span data-ttu-id="ff157-415">Es posible que una aplicación desee proporcionar orientación al usuario mientras está analizando su entorno.</span><span class="sxs-lookup"><span data-stu-id="ff157-415">An application may wish to provide guidance to the user while they're scanning their environment.</span></span>
   * <span data-ttu-id="ff157-416">Esto puede ayudar al usuario a evitar ciertos tipos de errores en los datos de asignación [espacial,](spatial-mapping.md#what-influences-spatial-mapping-quality)por ejemplo, si se mantiene alejado de ventanas o reflejos solares.</span><span class="sxs-lookup"><span data-stu-id="ff157-416">This can help the user to avoid certain kinds of [errors in the spatial mapping data](spatial-mapping.md#what-influences-spatial-mapping-quality), for example by staying away from sunlit windows or mirrors.</span></span>

<span data-ttu-id="ff157-417">Un detalle adicional que se debe tener en cuenta es que el "intervalo" de datos de asignación espacial no es ilimitado.</span><span class="sxs-lookup"><span data-stu-id="ff157-417">One extra detail to be aware of is that the 'range' of spatial mapping data isn't unlimited.</span></span> <span data-ttu-id="ff157-418">Aunque la asignación espacial crea una base de datos permanente de espacios grandes, solo hace que los datos estén disponibles para las aplicaciones en una "burbuja" de tamaño limitado en torno al usuario.</span><span class="sxs-lookup"><span data-stu-id="ff157-418">While spatial mapping does build a permanent database of large spaces, it only makes that data available to applications in a 'bubble' of limited size around the user.</span></span> <span data-ttu-id="ff157-419">Si empieza al principio de un largo recorrido y se aleja lo suficiente del principio, las superficies espaciales al principio desaparecerán.</span><span class="sxs-lookup"><span data-stu-id="ff157-419">If you start at the beginning of a long corridor and walk far enough away from the start, then eventually the spatial surfaces back at the beginning will disappear.</span></span> <span data-ttu-id="ff157-420">Puede mitigar esto almacenando en caché esas superficies en la aplicación después de que han desaparecido de los datos de asignación espacial disponibles.</span><span class="sxs-lookup"><span data-stu-id="ff157-420">You can mitigate this by caching those surfaces in your application after they've disappeared from the available spatial mapping data.</span></span>

## <a name="mesh-processing"></a><span data-ttu-id="ff157-421">Procesamiento de malla</span><span class="sxs-lookup"><span data-stu-id="ff157-421">Mesh processing</span></span>

<span data-ttu-id="ff157-422">Puede ayudar a detectar tipos comunes de errores en las superficies y a filtrar, quitar o modificar los datos de asignación espacial según corresponda.</span><span class="sxs-lookup"><span data-stu-id="ff157-422">It may help to detect common types of errors in surfaces and to filter, remove or modify the spatial mapping data as appropriate.</span></span>

<span data-ttu-id="ff157-423">Tenga en cuenta que los datos de asignación espacial están diseñados para ser lo más realistas posible para las superficies del mundo real, por lo que cualquier procesamiento que aplique corre el riesgo de desplazar las superficies más lejos de la "verdad".</span><span class="sxs-lookup"><span data-stu-id="ff157-423">Bear in mind that spatial mapping data is intended to be as faithful as possible to real-world surfaces, so any processing you apply risks shifting your surfaces further from the 'truth'.</span></span>

<span data-ttu-id="ff157-424">Estos son algunos ejemplos de diferentes tipos de procesamiento de malla que pueden resultar útiles:</span><span class="sxs-lookup"><span data-stu-id="ff157-424">Here are some examples of different types of mesh processing that you may find useful:</span></span>

* <span data-ttu-id="ff157-425">**Relleno de huecos**</span><span class="sxs-lookup"><span data-stu-id="ff157-425">**Hole filling**</span></span>
   * <span data-ttu-id="ff157-426">Si un objeto pequeño hecho de un material oscuro no se puede examinar, dejará un hueco en la superficie circundante.</span><span class="sxs-lookup"><span data-stu-id="ff157-426">If a small object made of a dark material fails to scan, it will leave a hole in the surrounding surface.</span></span>
   * <span data-ttu-id="ff157-427">Los huecos afectan a la oclusión: los hologramas se pueden ver "a través" de un hueco en una superficie del mundo real que se supone opaca.</span><span class="sxs-lookup"><span data-stu-id="ff157-427">Holes affect occlusion: holograms can be seen 'through' a hole in a supposedly opaque real-world surface.</span></span>
   * <span data-ttu-id="ff157-428">Los huecos afectan a los rayos: si usa raycasts para ayudar a los usuarios a interactuar con las superficies, puede que no sea deseable que estos rayos pasen a través de los huecos.</span><span class="sxs-lookup"><span data-stu-id="ff157-428">Holes affect raycasts: if you're using raycasts to help users interact with surfaces, it may be undesirable for these rays to pass through holes.</span></span> <span data-ttu-id="ff157-429">Una mitigación es usar un conjunto de varios raycasts que abarcan una región de tamaño adecuado.</span><span class="sxs-lookup"><span data-stu-id="ff157-429">One mitigation is to use a bundle of multiple raycasts covering an appropriately sized region.</span></span> <span data-ttu-id="ff157-430">Esto le permitirá filtrar los resultados de "valores atípicos", de modo que incluso si un raycast pasa a través de un pequeño hueco, el resultado agregado seguirá siendo válido.</span><span class="sxs-lookup"><span data-stu-id="ff157-430">This will allow you to filter 'outlier' results, so that even if one raycast passes through a small hole, the aggregate result will still be valid.</span></span> <span data-ttu-id="ff157-431">Sin embargo, este enfoque tiene un costo computacional.</span><span class="sxs-lookup"><span data-stu-id="ff157-431">However, this approach comes at a computational cost.</span></span>
   * <span data-ttu-id="ff157-432">Los huecos afectan a las colisiones físicas: un objeto controlado por la simulación física puede pasar por un hueco en el suelo y perderse.</span><span class="sxs-lookup"><span data-stu-id="ff157-432">Holes affect physics collisions: an object controlled by physics simulation may drop through a hole in the floor and become lost.</span></span>
   * <span data-ttu-id="ff157-433">Es posible rellenar de forma algorítmica estos huecos en la malla de superficie.</span><span class="sxs-lookup"><span data-stu-id="ff157-433">It's possible to algorithmically fill such holes in the surface mesh.</span></span> <span data-ttu-id="ff157-434">Sin embargo, tendrá que ajustar el algoritmo para que los "huecos reales", como las ventanas y las puertas, no se llenen.</span><span class="sxs-lookup"><span data-stu-id="ff157-434">However, you'll need to tune your algorithm so that 'real holes' such as windows and doorways don't get filled in.</span></span> <span data-ttu-id="ff157-435">Puede ser difícil diferenciar de forma confiable los "huecos reales" de los "huecos imaginarios", por lo que deberá experimentar con heurísticas diferentes, como "tamaño" y "forma de límite".</span><span class="sxs-lookup"><span data-stu-id="ff157-435">It can be difficult to reliably differentiate 'real holes' from 'imaginary holes', so you'll need to experiment with different heuristics such as 'size' and 'boundary shape'.</span></span>

* <span data-ttu-id="ff157-436">**Eliminación de la exclamación**</span><span class="sxs-lookup"><span data-stu-id="ff157-436">**Hallucination removal**</span></span>
   * <span data-ttu-id="ff157-437">Los reflejos, las luces brillantes y los objetos en movimiento pueden dejar pequeñas "salas" persistentes flotantes en el aire.</span><span class="sxs-lookup"><span data-stu-id="ff157-437">Reflections, bright lights, and moving objects can leave small lingering 'hallucinations' floating in mid-air.</span></span>
   * <span data-ttu-id="ff157-438">Las salas afectan a la oclusión: las salas pueden ser visibles a medida que las formas oscuras se mueven delante de otros hologramas y se ocultan.</span><span class="sxs-lookup"><span data-stu-id="ff157-438">Hallucinations affect occlusion: hallucinations may become visible as dark shapes moving in front of and occluding other holograms.</span></span>
   * <span data-ttu-id="ff157-439">Las salas afectan a los rayos: si usas raycasts para ayudar a los usuarios a interactuar con las superficies, estos rayos podrían alcanzar una halluciación en lugar de la superficie subyacente.</span><span class="sxs-lookup"><span data-stu-id="ff157-439">Hallucinations affect raycasts: if you're using raycasts to help users interact with surfaces, these rays could hit a hallucination instead of the surface behind it.</span></span> <span data-ttu-id="ff157-440">Al igual que con los huecos, una mitigación es usar muchos raycasts en lugar de un solo raycast, pero de nuevo esto tendrá un costo computacional.</span><span class="sxs-lookup"><span data-stu-id="ff157-440">As with holes, one mitigation is to use many raycasts instead of a single raycast, but again this will come at a computational cost.</span></span>
   * <span data-ttu-id="ff157-441">Las salas afectan a las colisiones físicas: un objeto controlado por la simulación física puede quedarse bloqueado contra una aclaración y no poder moverse a través de un área de espacio aparentemente clara.</span><span class="sxs-lookup"><span data-stu-id="ff157-441">Hallucinations affect physics collisions: an object controlled by physics simulation may become stuck against a hallucination and be unable to move through a seemingly clear area of space.</span></span>
   * <span data-ttu-id="ff157-442">Es posible filtrar estas aclaraciones de la malla de superficie.</span><span class="sxs-lookup"><span data-stu-id="ff157-442">It's possible to filter such hallucinations from the surface mesh.</span></span> <span data-ttu-id="ff157-443">Sin embargo, al igual que con los huecos, deberá ajustar el algoritmo para que no se quiten objetos pequeños reales, como los puestos de luces y los manipuladores de las puertas.</span><span class="sxs-lookup"><span data-stu-id="ff157-443">However, as with holes, you'll need to tune your algorithm so that real small objects such as lamp-stands and door handles don't get removed.</span></span>

* <span data-ttu-id="ff157-444">**Alisar**</span><span class="sxs-lookup"><span data-stu-id="ff157-444">**Smoothing**</span></span>
   * <span data-ttu-id="ff157-445">La asignación espacial puede devolver superficies que parecen ser aproximadas o "ruidosas" en comparación con sus homólogos reales.</span><span class="sxs-lookup"><span data-stu-id="ff157-445">Spatial mapping may return surfaces that appear to be rough or 'noisy' in comparison to their real-world counterparts.</span></span>
   * <span data-ttu-id="ff157-446">La suavizado afecta a las colisiones físicas: si el suelo es áspero, es posible que una bola física simulada no se revierte sin problemas a través de ella en una línea recta.</span><span class="sxs-lookup"><span data-stu-id="ff157-446">Smoothness affects physics collisions: if the floor is rough, a physically simulated golf ball may not roll smoothly across it in a straight line.</span></span>
   * <span data-ttu-id="ff157-447">La suavizado afecta a la representación: si una superficie se visualiza directamente, las normales de superficie aproximada pueden afectar a su apariencia e interrumpir una apariencia "limpia".</span><span class="sxs-lookup"><span data-stu-id="ff157-447">Smoothness affects rendering: if a surface is visualized directly, rough surface normals can affect its appearance and disrupt a 'clean' look.</span></span> <span data-ttu-id="ff157-448">Es posible mitigar esto mediante el uso de la iluminación y texturas adecuadas en el sombreador que se usa para representar la superficie.</span><span class="sxs-lookup"><span data-stu-id="ff157-448">It's possible to mitigate this by using appropriate lighting and textures in the shader that is used to render the surface.</span></span>
   * <span data-ttu-id="ff157-449">Es posible suavizar la rugosidad en una malla de superficie.</span><span class="sxs-lookup"><span data-stu-id="ff157-449">It's possible to smooth out roughness in a surface mesh.</span></span> <span data-ttu-id="ff157-450">Sin embargo, esto puede alejar la superficie de la superficie real correspondiente.</span><span class="sxs-lookup"><span data-stu-id="ff157-450">However, this may push the surface further away from the corresponding real-world surface.</span></span> <span data-ttu-id="ff157-451">Mantener una correspondencia estrecha es importante para generar una oclusión precisa de hologramas y permitir a los usuarios lograr interacciones precisas y predecibles con superficies holográficas.</span><span class="sxs-lookup"><span data-stu-id="ff157-451">Maintaining a close correspondence is important to produce accurate hologram occlusion, and to enable users to achieve precise and predictable interactions with holographic surfaces.</span></span>
   * <span data-ttu-id="ff157-452">Si solo se requiere un cambio de textura, puede ser suficiente para suavizar las normales de los vértices sin cambiar las posiciones de los vértices.</span><span class="sxs-lookup"><span data-stu-id="ff157-452">If only a cosmetic change is required, it may be sufficient to smooth vertex normals without changing vertex positions.</span></span>

* <span data-ttu-id="ff157-453">**Búsqueda de plano**</span><span class="sxs-lookup"><span data-stu-id="ff157-453">**Plane finding**</span></span>
   * <span data-ttu-id="ff157-454">Hay muchas formas de análisis que una aplicación puede desear realizar en las superficies proporcionadas por la asignación espacial.</span><span class="sxs-lookup"><span data-stu-id="ff157-454">There are many forms of analysis that an application may wish to perform on the surfaces provided by spatial mapping.</span></span>
   * <span data-ttu-id="ff157-455">Un ejemplo sencillo es "búsqueda de plano"; identificar regiones limitadas, principalmente planas de superficies.</span><span class="sxs-lookup"><span data-stu-id="ff157-455">One simple example is 'plane finding'; identifying bounded, mostly planar regions of surfaces.</span></span>
   * <span data-ttu-id="ff157-456">Las regiones planas se pueden usar como superficies de trabajo holográficas, regiones donde la aplicación puede colocar automáticamente el contenido holográfico.</span><span class="sxs-lookup"><span data-stu-id="ff157-456">Planar regions can be used as holographic work-surfaces, regions where holographic content can be automatically placed by the application.</span></span>
   * <span data-ttu-id="ff157-457">Las regiones planas pueden restringir la interfaz de usuario para guiar a los usuarios a interactuar con las superficies que mejor se adapten a sus necesidades.</span><span class="sxs-lookup"><span data-stu-id="ff157-457">Planar regions can constrain the user interface, to guide users to interact with the surfaces that best suit their needs.</span></span>
   * <span data-ttu-id="ff157-458">Las regiones planas se pueden usar como en el mundo real, para homólogos holográficos de objetos funcionales, como pantallas, tablas o pizarras de HOLOR.</span><span class="sxs-lookup"><span data-stu-id="ff157-458">Planar regions can be used as in the real world, for holographic counterparts to functional objects such as LCD screens, tables or whiteboards.</span></span>
   * <span data-ttu-id="ff157-459">Las regiones planas pueden definir áreas de juego, formando la base de los niveles de los juegos de vídeo.</span><span class="sxs-lookup"><span data-stu-id="ff157-459">Planar regions can define play areas, forming the basis of video game levels.</span></span>
   * <span data-ttu-id="ff157-460">Las regiones planas pueden ayudar a los agentes virtuales a navegar por el mundo real, mediante la identificación de las áreas de suelo por las que es probable que los usuarios reales pasen.</span><span class="sxs-lookup"><span data-stu-id="ff157-460">Planar regions can aid virtual agents to navigate the real world, by identifying the areas of floor that real people are likely to walk on.</span></span>

## <a name="prototyping-and-debugging"></a><span data-ttu-id="ff157-461">Creación de prototipos y depuración</span><span class="sxs-lookup"><span data-stu-id="ff157-461">Prototyping and debugging</span></span>

### <a name="useful-tools"></a><span data-ttu-id="ff157-462">Herramientas útiles</span><span class="sxs-lookup"><span data-stu-id="ff157-462">Useful tools</span></span>

* <span data-ttu-id="ff157-463">El [emulador de HoloLens](../develop/platform-capabilities-and-apis/using-the-hololens-emulator.md) se puede usar para desarrollar aplicaciones mediante asignación espacial sin acceso a un Dispositivo HoloLens físico.</span><span class="sxs-lookup"><span data-stu-id="ff157-463">The [HoloLens emulator](../develop/platform-capabilities-and-apis/using-the-hololens-emulator.md) can be used to develop applications using spatial mapping without access to a physical HoloLens.</span></span> <span data-ttu-id="ff157-464">Permite simular una sesión en directo en holoLens en un entorno realista, con todos los datos que normalmente consumiría la aplicación, incluidos el movimiento de HoloLens, los sistemas de coordenadas espaciales y las mallas de asignación espacial.</span><span class="sxs-lookup"><span data-stu-id="ff157-464">It allows you to simulate a live session on a HoloLens in a realistic environment, with all of the data your application would normally consume, including HoloLens motion, spatial coordinate systems, and spatial mapping meshes.</span></span> <span data-ttu-id="ff157-465">Esto se puede usar para proporcionar una entrada confiable y repetible, que puede ser útil para depurar problemas y evaluar los cambios en el código.</span><span class="sxs-lookup"><span data-stu-id="ff157-465">This can be used to provide reliable, repeatable input, which can be useful for debugging problems and evaluating changes to your code.</span></span>
* <span data-ttu-id="ff157-466">Para reproducir un escenario, capture datos de asignación espacial a través de la red desde un HoloLens dinámico y guárdelos en el disco y reutilice en sesiones de depuración posteriores.</span><span class="sxs-lookup"><span data-stu-id="ff157-466">To reproduce a scenario, capture spatial mapping data over the network from a live HoloLens, then save it to disk and reuse it in later debugging sessions.</span></span>
* <span data-ttu-id="ff157-467">La [vista 3D del portal de](../develop/platform-capabilities-and-apis/using-the-windows-device-portal.md#3d-view) dispositivos Windows proporciona una manera de ver todas las superficies espaciales disponibles actualmente a través del sistema de asignación espacial.</span><span class="sxs-lookup"><span data-stu-id="ff157-467">The [Windows device portal 3D view](../develop/platform-capabilities-and-apis/using-the-windows-device-portal.md#3d-view) provides a way to see all of the spatial surfaces currently available via the spatial mapping system.</span></span> <span data-ttu-id="ff157-468">Esto proporciona una base de comparación para las superficies espaciales dentro de la aplicación. Por ejemplo, puede saber fácilmente si faltan superficies espaciales o si se muestran en un lugar incorrecto.</span><span class="sxs-lookup"><span data-stu-id="ff157-468">This provides a basis of comparison for the spatial surfaces inside your application; for example, you can easily tell if any spatial surfaces are missing or are being displayed in the wrong place.</span></span>

### <a name="general-prototyping-guidance"></a><span data-ttu-id="ff157-469">Guía general de creación de prototipos</span><span class="sxs-lookup"><span data-stu-id="ff157-469">General prototyping guidance</span></span>

* <span data-ttu-id="ff157-470">Dado [que](spatial-mapping.md#what-influences-spatial-mapping-quality) los errores en los datos de asignación espacial pueden afectar en gran medida a la experiencia del usuario, se recomienda probar la aplicación en una amplia variedad de entornos.</span><span class="sxs-lookup"><span data-stu-id="ff157-470">Because [errors](spatial-mapping.md#what-influences-spatial-mapping-quality) in the spatial mapping data may strongly affect your user's experience, we recommend that you test your application in a wide variety of environments.</span></span>
* <span data-ttu-id="ff157-471">No se queme con el hábito de probar siempre en la misma ubicación, por ejemplo, en el escritorio.</span><span class="sxs-lookup"><span data-stu-id="ff157-471">Don't get trapped in the habit of always testing in the same location, for example at your desk.</span></span> <span data-ttu-id="ff157-472">Asegúrese de probar en varias superficies de diferentes posiciones, formas, tamaños y materiales.</span><span class="sxs-lookup"><span data-stu-id="ff157-472">Make sure to test on various surfaces of different positions, shapes, sizes, and materials.</span></span>
* <span data-ttu-id="ff157-473">De forma similar, aunque los datos sintéticos o registrados pueden ser útiles para la depuración, no dependen demasiado de los mismos casos de prueba.</span><span class="sxs-lookup"><span data-stu-id="ff157-473">Similarly, while synthetic or recorded data can be useful for debugging, don't become too reliant upon the same few test cases.</span></span> <span data-ttu-id="ff157-474">Esto puede retrasar la búsqueda de problemas importantes que las pruebas más diversas hubieran descubierto anteriormente.</span><span class="sxs-lookup"><span data-stu-id="ff157-474">This may delay finding important issues that more varied testing would have caught earlier.</span></span>
* <span data-ttu-id="ff157-475">Es una buena idea realizar pruebas con usuarios reales (e idealmente sincoached), ya que es posible que no usen HoloLens o la aplicación exactamente de la misma manera que usted.</span><span class="sxs-lookup"><span data-stu-id="ff157-475">It's a good idea to perform testing with real (and ideally uncoached) users, because they may not use the HoloLens or your application in exactly the same way that you do.</span></span> <span data-ttu-id="ff157-476">De hecho, puede que le sorprenda lo divergentes que pueden ser el comportamiento, el conocimiento y las suposiciones de las personas divergentes.</span><span class="sxs-lookup"><span data-stu-id="ff157-476">In fact, it may surprise you how divergent people's behavior, knowledge, and assumptions can be!</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="ff157-477">Solucionar problemas</span><span class="sxs-lookup"><span data-stu-id="ff157-477">Troubleshooting</span></span>

* <span data-ttu-id="ff157-478">Para que las mallas de superficie se orienten correctamente, cada GameObject debe estar activo antes de que se envíe a SurfaceObserver para que se construya su malla.</span><span class="sxs-lookup"><span data-stu-id="ff157-478">In order for the surface meshes to be orientated correctly, each GameObject needs to be active before it's sent to the SurfaceObserver to have its mesh constructed.</span></span> <span data-ttu-id="ff157-479">De lo contrario, las mallas se mostrarán en el espacio, pero giradas en ángulos extraños.</span><span class="sxs-lookup"><span data-stu-id="ff157-479">Otherwise, the meshes will show up in your space but rotated at weird angles.</span></span>
* <span data-ttu-id="ff157-480">El Objeto GameObject que ejecuta el script que se comunica con SurfaceObserver debe establecerse en el origen.</span><span class="sxs-lookup"><span data-stu-id="ff157-480">The GameObject that runs the script that communicates with the SurfaceObserver needs to be set to the origin.</span></span> <span data-ttu-id="ff157-481">De lo contrario, todos los Objetos GameObject que cree y envíe a SurfaceObserver para que sus mallas se construyan tendrán un desplazamiento igual al desplazamiento del objeto de juego primario.</span><span class="sxs-lookup"><span data-stu-id="ff157-481">Otherwise, all of GameObjects that you create and send to the SurfaceObserver to have their meshes constructed will have an offset equal to the offset of the Parent Game Object.</span></span> <span data-ttu-id="ff157-482">Esto puede hacer que las mallas se muestren a varios metros de distancia, lo que dificulta la depuración de lo que sucede.</span><span class="sxs-lookup"><span data-stu-id="ff157-482">This can make your meshes show up several meters away, which makes it hard to debug what is going on.</span></span>

## <a name="see-also"></a><span data-ttu-id="ff157-483">Consulte también</span><span class="sxs-lookup"><span data-stu-id="ff157-483">See also</span></span>

* [<span data-ttu-id="ff157-484">Sistemas de coordenadas</span><span class="sxs-lookup"><span data-stu-id="ff157-484">Coordinate systems</span></span>](coordinate-systems.md)
* [<span data-ttu-id="ff157-485">Asignación espacial en DirectX</span><span class="sxs-lookup"><span data-stu-id="ff157-485">Spatial mapping in DirectX</span></span>](../develop/native/spatial-mapping-in-directx.md)
* [<span data-ttu-id="ff157-486">Asignación espacial en Unity</span><span class="sxs-lookup"><span data-stu-id="ff157-486">Spatial mapping in Unity</span></span>](../develop/unity/spatial-mapping-in-unity.md)
* [<span data-ttu-id="ff157-487">Descripción de la escena</span><span class="sxs-lookup"><span data-stu-id="ff157-487">Scene Understanding</span></span>](scene-understanding.md)
* [<span data-ttu-id="ff157-488">Visualización de la exploración de la sala</span><span class="sxs-lookup"><span data-stu-id="ff157-488">Room scan visualization</span></span>](room-scan-visualization.md)
* [<span data-ttu-id="ff157-489">Diseño de sonido espacial</span><span class="sxs-lookup"><span data-stu-id="ff157-489">Spatial sound design</span></span>](spatial-sound-design.md)
* <span data-ttu-id="ff157-490">[Case study - Looking through holes in your reality](../out-of-scope/case-study-looking-through-holes-in-your-reality.md) (Caso práctico: mirar por un agujero en tu realidad)</span><span class="sxs-lookup"><span data-stu-id="ff157-490">[Case study - Looking through holes in your reality](../out-of-scope/case-study-looking-through-holes-in-your-reality.md)</span></span>