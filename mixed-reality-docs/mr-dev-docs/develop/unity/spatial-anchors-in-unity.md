---
title: Bloqueo mundial y anclajes espaciales en Unity
description: Aprenda a usar World Locking Tools y anclajes espaciales en aplicaciones de realidad mixta de Unity.
author: hferrone
ms.author: v-hferrone
ms.date: 04/7/2021
ms.topic: article
keywords: Unity, anclajes espaciales, almacén de anclajes, HoloLens, casco de realidad mixta, casco de realidad mixta de Windows, casco de realidad virtual, herramientas de bloqueo mundial, hologramas
ms.openlocfilehash: 4fc982244a766bb34f15b356d608f2aad18f7a88
ms.sourcegitcommit: 3e36b2fbbcc250c49aaf8ca1b6133cf0e9db69fa
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 04/16/2021
ms.locfileid: "107528784"
---
# <a name="world-locking-and-spatial-anchors-in-unity"></a><span data-ttu-id="b7c8c-104">Bloqueo mundial y anclajes espaciales en Unity</span><span class="sxs-lookup"><span data-stu-id="b7c8c-104">World locking and spatial anchors in Unity</span></span>

![Imagen principal de las herramientas de bloqueo mundial](images/wlt-img-01.jpeg)

<span data-ttu-id="b7c8c-106">Conseguir que los hologramas permanezcan en su lugar, moverse con usted o, en algunos casos, colocarse en relación con otros hologramas es una gran parte de la creación de Mixed Reality aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="b7c8c-106">Getting your holograms to stay in place, move with you, or in some cases position themselves relative to other holograms is a big part of creating Mixed Reality applications.</span></span> <span data-ttu-id="b7c8c-107">Este artículo le llevará por nuestra solución recomendada mediante World Locking Tools, pero también se trata la configuración manual de anclajes espaciales en los proyectos de Unity.</span><span class="sxs-lookup"><span data-stu-id="b7c8c-107">This article will take you through our recommended solution using World Locking Tools, but we'll also cover manually setting up spatial anchors in your Unity projects.</span></span> <span data-ttu-id="b7c8c-108">Antes de entrar en cualquier código, es importante comprender cómo Unity controla el espacio de coordenadas y los anclajes en su propio motor.</span><span class="sxs-lookup"><span data-stu-id="b7c8c-108">Before we jump into any code, it's important to understand how Unity handles coordinate space and anchors in its own engine.</span></span>

## <a name="world-scale-coordinate-systems"></a><span data-ttu-id="b7c8c-109">Sistemas de coordenadas a escala mundial</span><span class="sxs-lookup"><span data-stu-id="b7c8c-109">World-scale coordinate systems</span></span>

<span data-ttu-id="b7c8c-110">En la actualidad, al escribir juegos, aplicaciones de visualización de datos  o aplicaciones de realidad virtual, el enfoque típico es establecer un sistema de coordenadas universal absoluto al que todas las demás coordenadas puedan volver a asignarse de forma confiable.</span><span class="sxs-lookup"><span data-stu-id="b7c8c-110">Today, when writing games, data visualization apps, or virtual reality apps, the typical approach is to establish one absolute **world coordinate system** that all other coordinates can reliably map back to.</span></span> <span data-ttu-id="b7c8c-111">En ese entorno, siempre puede encontrar una transformación estable que defina una relación entre dos objetos cualquiera en ese mundo.</span><span class="sxs-lookup"><span data-stu-id="b7c8c-111">In that environment, you can always find a stable transform that defines a relationship between any two objects in that world.</span></span> <span data-ttu-id="b7c8c-112">Si no movió esos objetos, sus transformaciones relativas siempre seguirán siendo las mismas.</span><span class="sxs-lookup"><span data-stu-id="b7c8c-112">If you didn't move those objects, their relative transforms would always remain the same.</span></span> <span data-ttu-id="b7c8c-113">Este tipo de sistema de coordenadas global es fácil de obtener cuando se representa un mundo puramente virtual en el que se conoce toda la geometría de antemano.</span><span class="sxs-lookup"><span data-stu-id="b7c8c-113">This kind of global coordinate system is easy to get right when rendering a purely virtual world where you know all of the geometry in advance.</span></span> <span data-ttu-id="b7c8c-114">En la actualidad, las aplicaciones de realidad virtual a escala de sala suelen establecer este tipo de sistema de coordenadas de escala de habitación absoluto con su origen en la planta.</span><span class="sxs-lookup"><span data-stu-id="b7c8c-114">Room-scale VR apps today typically establish this kind of absolute room-scale coordinate system with its origin on the floor.</span></span>

<span data-ttu-id="b7c8c-115">Por el contrario, un dispositivo de realidad mixta sin ateso, como HoloLens, tiene un conocimiento dinámico controlado por sensores del mundo, ajustando continuamente sus conocimientos con el tiempo del entorno del usuario a medida que atraviesan muchos metros a través de una planta completa de un edificio.</span><span class="sxs-lookup"><span data-stu-id="b7c8c-115">In contrast, an untethered mixed reality device such as HoloLens has a dynamic sensor-driven understanding of the world, continuously adjusting its knowledge over time of the user's surroundings as they walk many meters across an entire floor of a building.</span></span> <span data-ttu-id="b7c8c-116">En una experiencia a escala mundial, si colocaste todos los hologramas en un sistema de coordenadas rígidas naïve, esos hologramas acabarían desviando con el tiempo, ya sea en función del mundo o en relación entre sí.</span><span class="sxs-lookup"><span data-stu-id="b7c8c-116">In a world-scale experience, if you placed all your holograms in a naive rigid coordinate system, those holograms would end up drifting over time, either based on the world or relative to each other.</span></span>

<span data-ttu-id="b7c8c-117">Por ejemplo, el casco puede que actualmente crea que dos ubicaciones del mundo están a 4 metros de distancia y, después, refinan esa comprensión, aprendiendo que las ubicaciones están en realidad a 3,9 metros de distancia.</span><span class="sxs-lookup"><span data-stu-id="b7c8c-117">For example, the headset may currently believe two locations in the world to be 4 meters apart, and then later refine that understanding, learning that the locations are in fact 3.9 meters apart.</span></span> <span data-ttu-id="b7c8c-118">Si esos hologramas se hubieran colocado inicialmente a 4 metros de distancia en un único sistema de coordenadas rígidas, uno de ellos siempre aparecería a 0,1 metros del mundo real.</span><span class="sxs-lookup"><span data-stu-id="b7c8c-118">If those holograms had initially been placed 4 meters apart in a single rigid coordinate system, one of them would then always appear 0.1 meters off from the real world.</span></span>

<span data-ttu-id="b7c8c-119">Puede colocar manualmente **anclajes** espaciales en Unity para mantener la posición de un holograma en el mundo físico cuando el usuario es móvil; sin embargo, esto sacrificará la coherencia automática dentro del mundo virtual.</span><span class="sxs-lookup"><span data-stu-id="b7c8c-119">You can manually place **spatial anchors** in Unity to maintain a hologram's position in the physical world when the user is mobile - however, this sacrifices the self-consistency within the virtual world.</span></span> <span data-ttu-id="b7c8c-120">Los distintos anclajes se mueven constantemente entre sí y también se mueven por el espacio de coordenadas global.</span><span class="sxs-lookup"><span data-stu-id="b7c8c-120">Different anchors are constantly moving in relation to one another, and are also moving through the global coordinate space.</span></span> <span data-ttu-id="b7c8c-121">En este escenario, tareas sencillas como el diseño se vuelven difíciles y la simulación física problemática.</span><span class="sxs-lookup"><span data-stu-id="b7c8c-121">In this scenario, simple tasks like layout become difficult and physics simulation problematic.</span></span>

<span data-ttu-id="b7c8c-122">**World Locking Tools** le permite obtener lo mejor de ambos mundos, estabilizando un único sistema de coordenadas rígidas mediante un suministro interno de anclajes espaciales distribuidos por toda la escena virtual a medida que el usuario se mueve.</span><span class="sxs-lookup"><span data-stu-id="b7c8c-122">**World Locking Tools** gets you the best of both worlds, stabilizing a single rigid coordinate system using an internal supply of spatial anchors spread throughout the virtual scene as the user moves around.</span></span> <span data-ttu-id="b7c8c-123">Las herramientas analizan las coordenadas de la cámara y los anclajes espaciales en cada fotograma.</span><span class="sxs-lookup"><span data-stu-id="b7c8c-123">The tools analyze the coordinates of the camera and those spatial anchors every frame.</span></span> <span data-ttu-id="b7c8c-124">En lugar de cambiar las coordenadas de todo el mundo para compensar las correcciones en las coordenadas de la cabeza del usuario, las herramientas simplemente corrigen las coordenadas de la cabeza en su lugar.</span><span class="sxs-lookup"><span data-stu-id="b7c8c-124">Instead of changing the coordinates of everything in the world to compensate for the corrections in the coordinates of the user's head, the tools just fix the head's coordinates instead.</span></span>

## <a name="choosing-your-world-locking-approach"></a><span data-ttu-id="b7c8c-125">Elección del enfoque de bloqueo del mundo</span><span class="sxs-lookup"><span data-stu-id="b7c8c-125">Choosing your world locking approach</span></span>

* <span data-ttu-id="b7c8c-126">**Nuestra recomendación** es usar **World Locking Tools para** todas las necesidades de posicionamiento del holograma.</span><span class="sxs-lookup"><span data-stu-id="b7c8c-126">**Our recommendation** is to use **World Locking Tools** for all your hologram positioning needs.</span></span> 
    * <span data-ttu-id="b7c8c-127">World Locking Tools proporciona un sistema de coordenadas estable que minimiza las incoherencias visibles entre los marcadores virtuales y reales.</span><span class="sxs-lookup"><span data-stu-id="b7c8c-127">World Locking Tools provides a stable coordinate system that minimizes the visible inconsistencies between virtual and real world markers.</span></span> <span data-ttu-id="b7c8c-128">Dicho de otro modo, bloquea toda la escena con un grupo compartido de delimitadores, en lugar de bloquear cada grupo de objetos con el propio delimitador individual del grupo.</span><span class="sxs-lookup"><span data-stu-id="b7c8c-128">Put another way, it world-locks the entire scene with a shared pool of anchors, rather than locking each group of objects with the group's own individual anchor.</span></span>
* <span data-ttu-id="b7c8c-129">**Para Unity 2019/2020 mediante OpenXR** o el complemento XR de Windows, debe usar **ARAnchorManager.**</span><span class="sxs-lookup"><span data-stu-id="b7c8c-129">**For Unity 2019/2020 using OpenXR or the Windows XR Plugin**, you need to use **ARAnchorManager**</span></span>
* <span data-ttu-id="b7c8c-130">**Para versiones anteriores de Unity o proyectos de WSA,** debe usar **WorldAnchor.**</span><span class="sxs-lookup"><span data-stu-id="b7c8c-130">**For older Unity versions or WSA** projects, you need to use **WorldAnchor**</span></span>

## <a name="setting-up-world-locking"></a><span data-ttu-id="b7c8c-131">Configuración del bloqueo mundial</span><span class="sxs-lookup"><span data-stu-id="b7c8c-131">Setting up world locking</span></span> 

[!INCLUDE[](includes/world-locking/world-locking-setup.md)]

## <a name="persistent-world-locking"></a><span data-ttu-id="b7c8c-132">Bloqueo del mundo persistente</span><span class="sxs-lookup"><span data-stu-id="b7c8c-132">Persistent world locking</span></span>

<span data-ttu-id="b7c8c-133">Los delimitadores espaciales ahorran hologramas en el espacio real entre sesiones de aplicación.</span><span class="sxs-lookup"><span data-stu-id="b7c8c-133">Spatial anchors save holograms in real-world space between application sessions.</span></span> <span data-ttu-id="b7c8c-134">Una vez guardados en el almacén de anclajes de HoloLens, se pueden encontrar y cargar en sesiones diferentes y son una reserva ideal cuando no hay conectividad a Internet.</span><span class="sxs-lookup"><span data-stu-id="b7c8c-134">Once saved in the HoloLens' anchor store, they can be found and loaded in different sessions and are an ideal fallback when there's no internet connectivity.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="b7c8c-135">Los anclajes locales se almacenan en el dispositivo, mientras que los Azure Spatial Anchors se almacenan en la nube.</span><span class="sxs-lookup"><span data-stu-id="b7c8c-135">Local anchors are stored on device, while Azure Spatial Anchors are stored in the cloud.</span></span> <span data-ttu-id="b7c8c-136">Si desea usar servicios en la nube de Azure para almacenar los anclajes, existe un documento que le guiará por la integración de [Azure Spatial Anchors](../mixed-reality-cloud-services.md#azure-spatial-anchors).</span><span class="sxs-lookup"><span data-stu-id="b7c8c-136">If you're looking to use Azure cloud services to store your anchors, we have a document that can walk you through integrating [Azure Spatial Anchors](../mixed-reality-cloud-services.md#azure-spatial-anchors).</span></span> <span data-ttu-id="b7c8c-137">Tenga en cuenta que puede tener anclajes locales y de Azure en el mismo proyecto sin que existan conflictos.</span><span class="sxs-lookup"><span data-stu-id="b7c8c-137">Note that you can have local and Azure anchors in the same project without conflict.</span></span>

[!INCLUDE[](includes/world-locking/world-locking-persistence.md)]

## <a name="sharing-coordinate-spaces"></a><span data-ttu-id="b7c8c-138">Uso compartido de espacios de coordenadas</span><span class="sxs-lookup"><span data-stu-id="b7c8c-138">Sharing coordinate spaces</span></span> 

<span data-ttu-id="b7c8c-139">Si desea compartir un espacio de coordenadas bloqueado en el mundo, consulte la documentación completa [de la experiencia compartida](shared-experiences-in-unity.md).</span><span class="sxs-lookup"><span data-stu-id="b7c8c-139">If you want to share a world locked coordinate space, check out our comprehensive [shared experience documentation](shared-experiences-in-unity.md).</span></span>

<span data-ttu-id="b7c8c-140">Tenga en cuenta que Azure Spatial Anchors todavía no se admite directamente en World Locking Tools, por lo que las experiencias compartidas requerirán que cree manualmente anclajes espaciales.</span><span class="sxs-lookup"><span data-stu-id="b7c8c-140">Note that Azure Spatial Anchors is not yet supported directly within World Locking Tools, and so shared experiences will require you to manually create spatial anchors.</span></span>

## <a name="next-development-checkpoint"></a><span data-ttu-id="b7c8c-141">Siguiente punto de control de desarrollo</span><span class="sxs-lookup"><span data-stu-id="b7c8c-141">Next Development Checkpoint</span></span>

<span data-ttu-id="b7c8c-142">Si sigue el recorrido del punto de control de desarrollo de Unity que hemos diseñado, se encuentra a punto de explorar los principales Mixed Reality de creación.</span><span class="sxs-lookup"><span data-stu-id="b7c8c-142">If you're following the Unity development checkpoint journey we've laid out, you're in the midst of exploring the Mixed Reality core building blocks.</span></span> <span data-ttu-id="b7c8c-143">Desde aquí, puede continuar con el siguiente bloque de compilación:</span><span class="sxs-lookup"><span data-stu-id="b7c8c-143">From here, you can continue to the next building block:</span></span>

> [!div class="nextstepaction"]
> [<span data-ttu-id="b7c8c-144">Asignación espacial</span><span class="sxs-lookup"><span data-stu-id="b7c8c-144">Spatial mapping</span></span>](spatial-mapping-in-unity.md)

<span data-ttu-id="b7c8c-145">O bien puede saltar a las funcionalidades y las API de la plataforma de realidad mixta:</span><span class="sxs-lookup"><span data-stu-id="b7c8c-145">Or jump to Mixed Reality platform capabilities and APIs:</span></span>

> [!div class="nextstepaction"]
> [<span data-ttu-id="b7c8c-146">Experiencias compartidas</span><span class="sxs-lookup"><span data-stu-id="b7c8c-146">Shared experiences</span></span>](shared-experiences-in-unity.md)

<span data-ttu-id="b7c8c-147">Puede volver a los [puntos de control de desarrollo de Unity](unity-development-overview.md#2-core-building-blocks) en cualquier momento.</span><span class="sxs-lookup"><span data-stu-id="b7c8c-147">You can always go back to the [Unity development checkpoints](unity-development-overview.md#2-core-building-blocks) at any time.</span></span>

## <a name="see-also"></a><span data-ttu-id="b7c8c-148">Consulte también</span><span class="sxs-lookup"><span data-stu-id="b7c8c-148">See Also</span></span>
* [<span data-ttu-id="b7c8c-149">Introducción a World Locking Tools</span><span class="sxs-lookup"><span data-stu-id="b7c8c-149">World Locking Tools introduction</span></span>](https://microsoft.github.io/MixedReality-WorldLockingTools-Unity/DocGen/Documentation/IntroFAQ.html)
* [<span data-ttu-id="b7c8c-150">Guías de inicio rápido</span><span class="sxs-lookup"><span data-stu-id="b7c8c-150">Quickstart guides</span></span>](https://microsoft.github.io/MixedReality-WorldLockingTools-Unity/DocGen/Documentation/HowTos/QuickStart.html)
* [<span data-ttu-id="b7c8c-151">Tutoriales</span><span class="sxs-lookup"><span data-stu-id="b7c8c-151">Tutorials</span></span>](https://microsoft.github.io/MixedReality-WorldLockingTools-Samples/Tutorial/01_Minimal/01_Minimal.html)
* [<span data-ttu-id="b7c8c-152">Ejemplos</span><span class="sxs-lookup"><span data-stu-id="b7c8c-152">Samples</span></span>](https://microsoft.github.io/MixedReality-WorldLockingTools-Unity/DocGen/Documentation/HowTos/SampleApplications.html)
* [<span data-ttu-id="b7c8c-153">Persistencia del delimitador espacial</span><span class="sxs-lookup"><span data-stu-id="b7c8c-153">Spatial anchor persistence</span></span>](../../design/coordinate-systems.md#spatial-anchor-persistence)
* <span data-ttu-id="b7c8c-154"><a href="/azure/spatial-anchors" target="_blank">Azure Spatial Anchors</a></span><span class="sxs-lookup"><span data-stu-id="b7c8c-154"><a href="/azure/spatial-anchors" target="_blank">Azure Spatial Anchors</a></span></span>
* <span data-ttu-id="b7c8c-155"><a href="/dotnet/api/Microsoft.Azure.SpatialAnchors" target="_blank">SDK de Azure Spatial Anchors para Unity</a></span><span class="sxs-lookup"><span data-stu-id="b7c8c-155"><a href="/dotnet/api/Microsoft.Azure.SpatialAnchors" target="_blank">Azure Spatial Anchors SDK for Unity</a></span></span>
* [<span data-ttu-id="b7c8c-156">Escalas de experiencia</span><span class="sxs-lookup"><span data-stu-id="b7c8c-156">Experience scales</span></span>](../../design/coordinate-systems.md#mixed-reality-experience-scales)
* [<span data-ttu-id="b7c8c-157">Fase espacial</span><span class="sxs-lookup"><span data-stu-id="b7c8c-157">Spatial stage</span></span>](../../design/coordinate-systems.md#stage-frame-of-reference)
* [<span data-ttu-id="b7c8c-158">Pérdida de seguimiento en Unity</span><span class="sxs-lookup"><span data-stu-id="b7c8c-158">Tracking loss in Unity</span></span>](tracking-loss-in-unity.md)
* [<span data-ttu-id="b7c8c-159">Delimitadores espaciales</span><span class="sxs-lookup"><span data-stu-id="b7c8c-159">Spatial anchors</span></span>](../../design/spatial-anchors.md)
* [<span data-ttu-id="b7c8c-160">Experiencias compartidas en Unity</span><span class="sxs-lookup"><span data-stu-id="b7c8c-160">Shared experiences in Unity</span></span>](shared-experiences-in-unity.md)
