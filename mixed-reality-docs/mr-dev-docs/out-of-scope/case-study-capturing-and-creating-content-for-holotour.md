---
title: 'Caso práctico: HoloTour'
description: Explore el caso práctico de la aplicación HoloTour y recorra el proceso de captura y creación de su contenido.
author: dannyaskew
ms.author: daaske
ms.date: 03/21/2018
ms.topic: article
keywords: HoloTour, HoloLens, Windows Mixed Reality
ms.openlocfilehash: 3e285988b6027b8c043dea7a4594c21d0bf3370d
ms.sourcegitcommit: 2329db5a76dfe1b844e21291dbc8ee3888ed1b81
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "98009325"
---
# <a name="case-study---holotour"></a><span data-ttu-id="ea417-104">Caso práctico: HoloTour</span><span class="sxs-lookup"><span data-stu-id="ea417-104">Case study - HoloTour</span></span>

<span data-ttu-id="ea417-105">HoloTour para Microsoft HoloLens proporciona paseos en 3D sobre las ubicaciones de iconos en todo el mundo.</span><span class="sxs-lookup"><span data-stu-id="ea417-105">HoloTour for Microsoft HoloLens provides immersive 3D personal tours of iconic locations around the world.</span></span> <span data-ttu-id="ea417-106">A medida que los diseñadores, artistas, productores, diseñadores de audio y desarrolladores que trabajan en este proyecto han descubierto, la creación de una representación 3D convincentemente real de una ubicación conocida toma una mezcla exclusiva de Wizardry de creatividad y tecnología.</span><span class="sxs-lookup"><span data-stu-id="ea417-106">As the designers, artists, producers, audio designers, and developers working on this project found out, creating a convincingly real 3D rendering of a well-known location takes a unique blend of creative and technological wizardry.</span></span> <span data-ttu-id="ea417-107">Este caso práctico le guiará a través del proceso de captura y creación del contenido que se usa para HoloTour.</span><span class="sxs-lookup"><span data-stu-id="ea417-107">This case study will walk through the process of capturing and creating the content used for HoloTour.</span></span>

## <a name="the-tech"></a><span data-ttu-id="ea417-108">La tecnología</span><span class="sxs-lookup"><span data-stu-id="ea417-108">The tech</span></span>

<span data-ttu-id="ea417-109">Con HoloTour, queríamos permitir que las personas visiten algunos de los destinos más increíbles del mundo, como la [de Machu Picchu](https://en.wikipedia.org/wiki/Machu_Picchu) en Perú o el día moderno [Piazza Navona](https://en.wikipedia.org/wiki/Piazza_Navona) en Italia, directamente desde sus propios salones.</span><span class="sxs-lookup"><span data-stu-id="ea417-109">With HoloTour, we wanted to make it possible for people to visit some of the world’s most amazing destinations—like the [ruins of Machu Picchu](https://en.wikipedia.org/wiki/Machu_Picchu) in Peru or the modern day [Piazza Navona](https://en.wikipedia.org/wiki/Piazza_Navona) in Italy—right from their own living rooms.</span></span> <span data-ttu-id="ea417-110">Nuestro equipo ha hecho el objetivo de HoloTour a "hacer que le parezca que está realmente ahí".</span><span class="sxs-lookup"><span data-stu-id="ea417-110">Our team made it the goal of HoloTour to “make you feel like you’re really there.”</span></span> <span data-ttu-id="ea417-111">La experiencia necesitaba ser más que solo imágenes o vídeos.</span><span class="sxs-lookup"><span data-stu-id="ea417-111">The experience needed to be more than just pictures or videos.</span></span> <span data-ttu-id="ea417-112">Al aprovechar la exclusiva tecnología de visualización, seguimiento y audio de HoloLens, pensamos que podríamos realizar un transporte prácticamente en otro lugar.</span><span class="sxs-lookup"><span data-stu-id="ea417-112">By leveraging the unique display, tracking, and audio technology of HoloLens we believed we could virtually transport you to another place.</span></span> <span data-ttu-id="ea417-113">Tendremos que capturar los lugares, los sonidos y la geometría tridimensional de cada ubicación que visitamos y, a continuación, volver a crear eso en nuestra aplicación.</span><span class="sxs-lookup"><span data-stu-id="ea417-113">We would need to capture the sights, sounds, and three-dimensional geometry of every location we visited and then recreate that within our app.</span></span>

<span data-ttu-id="ea417-114">Para ello, necesitábamos una plataforma de una cámara 360 ° con captura de audio direccional.</span><span class="sxs-lookup"><span data-stu-id="ea417-114">In order to do this, we needed a 360° camera rig with directional audio capture.</span></span> <span data-ttu-id="ea417-115">Era necesario capturar en una resolución extremadamente alta, de modo que el metraje tendría un aspecto nítido cuando se reproduzca en HoloLens y las cámaras deban estar colocadas cerca para minimizar los artefactos de Unión.</span><span class="sxs-lookup"><span data-stu-id="ea417-115">It needed to capture at extremely high resolution, so that the footage would look crisp when played back on a HoloLens and the cameras would need to be positioned close together in order to minimize stitching artifacts.</span></span> <span data-ttu-id="ea417-116">Queríamos una cobertura esférica completa, no solo a lo largo del horizonte, sino también por encima y por debajo.</span><span class="sxs-lookup"><span data-stu-id="ea417-116">We wanted full spherical coverage, not just along the horizon, but above and below you as well.</span></span> <span data-ttu-id="ea417-117">La plataforma de pruebas también necesitaba ser portable, por lo que podríamos tomarla todo en todo el mundo.</span><span class="sxs-lookup"><span data-stu-id="ea417-117">The rig also needed to be portable so that we could take it all over the world.</span></span> <span data-ttu-id="ea417-118">Hemos evaluado opciones fuera de las estantes disponibles y hemos hecho que simplemente no eran lo suficientemente buenos como para obtener nuestra visión, ya sea debido a la resolución, el costo o el tamaño.</span><span class="sxs-lookup"><span data-stu-id="ea417-118">We evaluated available off-the-shelf options and realized they simply weren’t good enough to realize our vision – either because of resolution, cost, or size.</span></span> <span data-ttu-id="ea417-119">Si no pudimos encontrar una plataforma de cámaras que cumpliera nuestras necesidades, tendríamos que crear una.</span><span class="sxs-lookup"><span data-stu-id="ea417-119">If we couldn’t find a camera rig that satisfied our needs, we would have to build one ourselves.</span></span>

### <a name="building-the-rig"></a><span data-ttu-id="ea417-120">Compilar la plataforma de pruebas</span><span class="sxs-lookup"><span data-stu-id="ea417-120">Building the rig</span></span>

<span data-ttu-id="ea417-121">La primera versión, procedente de cartón, velcro, cinta de conductos y 14 cámaras de GoPro, era algo que MacGyver habría orgulloso.</span><span class="sxs-lookup"><span data-stu-id="ea417-121">The first version—made from cardboard, Velcro, duct tape, and 14 GoPro cameras—was something MacGyver would have been proud of.</span></span> <span data-ttu-id="ea417-122">Después de revisar todo desde soluciones de low-end a las plataformas de pruebas personalizadas, las cámaras de GoPro eran la mejor opción para nosotros porque eran pequeñas, económicas y tenían almacenamiento en memoria fácil de usar.</span><span class="sxs-lookup"><span data-stu-id="ea417-122">After reviewing everything from low-end solutions to custom manufactured rigs, GoPro cameras were ultimately the best option for us because they were small, affordable, and had easy-to-use memory storage.</span></span> <span data-ttu-id="ea417-123">El factor de forma pequeño era especialmente importante porque nos permitía colocar las cámaras bastante cerca: cuanto menor sea la distancia entre las cámaras, más pequeños serán los artefactos de Unión.</span><span class="sxs-lookup"><span data-stu-id="ea417-123">The small form factor was especially important because it allowed us to place cameras fairly close together—the smaller the distance between cameras, the smaller the stitching artifacts will be.</span></span> <span data-ttu-id="ea417-124">Nuestra única disposición de cámara nos permitió obtener una cobertura de esfera completa *más* suficiente superposición para alinear las cámaras de forma inteligente y suavizar algunos artefactos durante el proceso de Unión.</span><span class="sxs-lookup"><span data-stu-id="ea417-124">Our unique camera arrangement allowed us to get full sphere coverage *plus* enough overlap to intelligently align cameras and smooth out some artifacts during the stitching process.</span></span>

<span data-ttu-id="ea417-125">Aprovechar las ventajas de las funcionalidades de [sonido espacial](../design/spatial-sound.md) en HoloLens es fundamental para crear una experiencia de envolvente convincentemente real.</span><span class="sxs-lookup"><span data-stu-id="ea417-125">Taking advantage of the [spatial sound](../design/spatial-sound.md) capabilities on HoloLens is critical to creating a convincingly real immersive experience.</span></span> <span data-ttu-id="ea417-126">Usamos una matriz de cuatro micrófonos situada bajo las cámaras del trípode, lo que captaría sonido de la ubicación de nuestra cámara en cuatro direcciones, lo que nos proporcionaría información suficiente para crear sonidos espaciales en nuestras escenas.</span><span class="sxs-lookup"><span data-stu-id="ea417-126">We used a four-microphone array situated beneath the cameras on the tripod, which would capture sound from the location of our camera in four directions, giving us enough information to create spatial sounds in our scenes.</span></span>

![Nuestra plataforma de cámaras 360 ° configurada para el rodaje fuera del Pantheon.](images/camera-pantheon-200px.png)

<span data-ttu-id="ea417-128">Nuestra plataforma de cámaras 360 ° configurada para el rodaje fuera del Pantheon.</span><span class="sxs-lookup"><span data-stu-id="ea417-128">Our 360° camera rig set up for filming outside the Pantheon.</span></span> 


<span data-ttu-id="ea417-129">Probamos nuestra plataforma de homemade llevando a Rattlesnake saliente cerca de Seattle y Capturamos el escenario en la parte superior de la excursión.</span><span class="sxs-lookup"><span data-stu-id="ea417-129">We tested out our homemade rig by taking it up to Rattlesnake Ridge near Seattle, capturing the scenery at the top of the hike.</span></span> <span data-ttu-id="ea417-130">El resultado, aunque es mucho menos pulido que las ubicaciones que se ven en HoloTour hoy en día, nos proporciona la confianza de que el diseño de la plataforma era lo suficientemente bueno como para que se sienta lo que está realmente ahí.</span><span class="sxs-lookup"><span data-stu-id="ea417-130">The result, though significantly less polished than the locations you see in HoloTour today, gave us confidence that our rig design was good enough to make you feel like you’re really there.</span></span>

<span data-ttu-id="ea417-131">Hemos actualizado nuestra plataforma de velcro y cartón a un alojamiento de cámara impreso en 3D y he comprado paquetes de baterías externos para las cámaras GoPro para simplificar la administración de la batería.</span><span class="sxs-lookup"><span data-stu-id="ea417-131">We upgraded our rig from Velcro and cardboard to a 3D-printed camera housing and bought external battery packs for the GoPro cameras to simplify battery management.</span></span> <span data-ttu-id="ea417-132">Después, realizamos una prueba más exhaustiva, desplazamos a San Francisco para crear un paseo en miniatura de la costa de la ciudad y el puente de la puerta de Golden.</span><span class="sxs-lookup"><span data-stu-id="ea417-132">We then did a more extensive test, traveling down to San Francisco to create a miniature tour of the city’s coast and the iconic Golden Gate bridge.</span></span> <span data-ttu-id="ea417-133">Esta plataforma de cámara es lo que se usa para la mayoría de las capturas de las ubicaciones que se visitan en HoloTour.</span><span class="sxs-lookup"><span data-stu-id="ea417-133">This camera rig is what we used for most of our captures of the locations you visit in HoloTour.</span></span>

![La plataforma de cámaras 360 ° filmada en Machu Picchu.](images/camera-machu-pichu-500px.png)

<span data-ttu-id="ea417-135">La plataforma de cámaras 360 ° filmada en Machu Picchu.</span><span class="sxs-lookup"><span data-stu-id="ea417-135">The 360° camera rig filming in Machu Picchu.</span></span> 

## <a name="behind-the-scenes"></a><span data-ttu-id="ea417-136">Entre bambalinas</span><span class="sxs-lookup"><span data-stu-id="ea417-136">Behind the scenes</span></span>

<span data-ttu-id="ea417-137">Antes de filmarnos, es necesario averiguar qué ubicaciones deseamos incluir en nuestro paseo virtual.</span><span class="sxs-lookup"><span data-stu-id="ea417-137">Before filming, we needed to figure out which locations we wanted to include on our virtual tour.</span></span> <span data-ttu-id="ea417-138">Roma era la primera ubicación en la que se pretendía enviar y queríamos obtenerla, por lo que decidimos realizar un viaje de Scout con antelación.</span><span class="sxs-lookup"><span data-stu-id="ea417-138">Rome was the first location we intended to ship and we wanted to get it right, so we decided to do a scouting trip in advance.</span></span> <span data-ttu-id="ea417-139">Hemos enviado un equipo de seis personas, incluidos artistas, diseñadores y productores, para una visita en persona a los sitios que estamos considerando.</span><span class="sxs-lookup"><span data-stu-id="ea417-139">We sent a team of six people—including artists, designers, and producers—for an in-person visit to the sites we were considering.</span></span> <span data-ttu-id="ea417-140">El viaje tardó unos 9 días: 2,5 para viajar, el resto para filmarlos.</span><span class="sxs-lookup"><span data-stu-id="ea417-140">The trip took about 9 days – 2.5 for travel, the rest for filming.</span></span> <span data-ttu-id="ea417-141">(En el caso de Machu Picchu, hemos optado por no hacer un viaje de Scout, investigar de antemano y reservar unos días de búfer para filmarlos).</span><span class="sxs-lookup"><span data-stu-id="ea417-141">(For Machu Picchu we opted not to do a scout trip, researching in advance and booking a few days of buffer for filming.)</span></span>

<span data-ttu-id="ea417-142">En Roma, el equipo tomó fotografías de cada área y anotó hechos interesantes, así como consideraciones prácticas, por ejemplo, en qué medida es desplazarse a cada lugar y lo difícil que sería filmar en película debido a los amontonamientos o las restricciones.</span><span class="sxs-lookup"><span data-stu-id="ea417-142">While in Rome, the team took photos of each area and noted interesting facts as well as practical considerations, such as how hard it is to travel to each spot and how difficult it would be to film because of crowds or restrictions.</span></span> <span data-ttu-id="ea417-143">Esto puede parecer una vacaciones, pero es mucho trabajo.</span><span class="sxs-lookup"><span data-stu-id="ea417-143">This may sound like a vacation, but it’s a lot of work.</span></span> <span data-ttu-id="ea417-144">Los días comenzaron pronto en la mañana y no se detendrían hasta la noche.</span><span class="sxs-lookup"><span data-stu-id="ea417-144">Days started early in the morning and would go non-stop until evening.</span></span> <span data-ttu-id="ea417-145">Cada noche, se cargó el material de trabajo para el equipo en Seattle para revisarlo.</span><span class="sxs-lookup"><span data-stu-id="ea417-145">Each night, footage was uploaded for the team back in Seattle to review.</span></span> 

![Nuestra tripulación de captura en Roma.](images/holotour-filming-crew-rome-500px.jpg) 

<span data-ttu-id="ea417-147">Nuestra tripulación de captura en Roma.</span><span class="sxs-lookup"><span data-stu-id="ea417-147">Our capture crew in Rome.</span></span> 


<span data-ttu-id="ea417-148">Una vez finalizado el viaje del Scout, se realizó un plan final para el filmado real.</span><span class="sxs-lookup"><span data-stu-id="ea417-148">After the scout trip was completed, a final plan was made for actual filming.</span></span> <span data-ttu-id="ea417-149">Esto requiere una lista detallada de la ubicación en la que se iba a filmar, en qué día y en qué momento.</span><span class="sxs-lookup"><span data-stu-id="ea417-149">This required a detailed list of where we were going to film, on what day, and at what time.</span></span> <span data-ttu-id="ea417-150">Cada día es caro, por lo que estos viajes deben ser eficientes.</span><span class="sxs-lookup"><span data-stu-id="ea417-150">Every day overseas is expensive, so these trips needed to be efficient.</span></span> <span data-ttu-id="ea417-151">Se han reservado guías y controladores en Roma para ayudarnos y usarse por completo todos los días desde antes del amanecer hasta después de la atardecer.</span><span class="sxs-lookup"><span data-stu-id="ea417-151">We booked guides and handlers in Rome to help us and fully used every day from before sunrise to after sunset.</span></span> <span data-ttu-id="ea417-152">Necesitamos obtener el mejor metraje posible para que se sienta que está realmente ahí.</span><span class="sxs-lookup"><span data-stu-id="ea417-152">We need to get the best footage possible in order to make you feel like you’re really there.</span></span>

### <a name="capturing-the-video"></a><span data-ttu-id="ea417-153">Captura del vídeo</span><span class="sxs-lookup"><span data-stu-id="ea417-153">Capturing the video</span></span>

<span data-ttu-id="ea417-154">Realizar algunos sencillos pasos durante la captura puede hacer que el procesamiento posterior sea mucho más fácil.</span><span class="sxs-lookup"><span data-stu-id="ea417-154">Doing a few simple things during capture can make post-processing much easier.</span></span> <span data-ttu-id="ea417-155">Por ejemplo, cada vez que une imágenes de varias cámaras, acaba con artefactos visuales porque cada cámara tiene una vista ligeramente diferente.</span><span class="sxs-lookup"><span data-stu-id="ea417-155">For example, whenever you stitch together images from multiple cameras, you end up with visual artifacts because each camera has a slightly different view.</span></span> <span data-ttu-id="ea417-156">Cuanto más se acerquen los objetos a la cámara, mayor será la diferencia entre las vistas y mayores serán los artefactos de Unión.</span><span class="sxs-lookup"><span data-stu-id="ea417-156">The closer objects are to the camera, the larger the difference between the views, and the larger the stitching artifacts will be.</span></span> <span data-ttu-id="ea417-157">Esta es una manera fácil de visualizar el problema: Sujete el dedo delante de su cara y examínelo con un solo ojo.</span><span class="sxs-lookup"><span data-stu-id="ea417-157">Here's an easy way to visualize the problem: hold your thumb up in front of your face and look at it with only one eye.</span></span> <span data-ttu-id="ea417-158">Ahora cambie los ojos.</span><span class="sxs-lookup"><span data-stu-id="ea417-158">Now switch eyes.</span></span> <span data-ttu-id="ea417-159">Verá que el control Thumb parece moverse en relación con el fondo.</span><span class="sxs-lookup"><span data-stu-id="ea417-159">You’ll see that your thumb appears to move relative to the background.</span></span> <span data-ttu-id="ea417-160">Si mantiene el control lejos de su esfera y repite el experimento, parecerá que el control de posición se mueve menos.</span><span class="sxs-lookup"><span data-stu-id="ea417-160">If you hold your thumb further away from your face and repeat the experiment, your thumb will appear to move less.</span></span> <span data-ttu-id="ea417-161">Ese movimiento aparente es similar al de la Unión que nos enfrentamos: los ojos, al igual que las cámaras, no ven exactamente la misma imagen porque están separadas por un poco de distancia.</span><span class="sxs-lookup"><span data-stu-id="ea417-161">That apparent movement is similar to the stitching problem we faced: Your eyes, like our cameras, don’t see the exact same image because they are separated by a little distance.</span></span>

<span data-ttu-id="ea417-162">Dado que es mucho más fácil evitar los peores artefactos mientras se filman que para corregirlos en el procesamiento posterior, se intentó mantener a las personas y cosas lejos de la cámara en la espera de que se pudiera eliminar la necesidad de unir objetos.</span><span class="sxs-lookup"><span data-stu-id="ea417-162">Because it’s much easier to prevent the worst artifacts while filming than it is to correct them in post-processing, we tried to keep people and things far away from the camera in the hopes we could eliminate the need to stitch close-up objects.</span></span> <span data-ttu-id="ea417-163">Mantener un gran desplazamiento alrededor de nuestra cámara era probablemente uno de los mayores desafíos que teníamos durante el rodaje y tuvimos que crear creatividad para que funcione.</span><span class="sxs-lookup"><span data-stu-id="ea417-163">Maintaining a large clearing around our camera was probably one of the biggest challenges we had during shooting and we had to get creative to make it work.</span></span> <span data-ttu-id="ea417-164">Trabajar con guías locales era una gran ayuda en la administración de amontonamientos, pero también encontramos que el uso de signos (y a veces pequeños conos o bolsas de Bean) para marcar el espacio de filmación era razonablemente eficaz, especialmente porque solo necesitábamos obtener una breve cantidad de material de trabajo en cada ubicación.</span><span class="sxs-lookup"><span data-stu-id="ea417-164">Working with local guides was a huge help in managing crowds, but we also found that using signs—and sometimes small cones or bean bags—to mark our filming space was reasonably effective, especially since we only needed to get a short amount of footage at each location.</span></span> <span data-ttu-id="ea417-165">A menudo, la mejor manera de obtener una buena captura era llegar a la primera vez por la mañana, antes de que la mayoría de las personas se hubieran mostrado.</span><span class="sxs-lookup"><span data-stu-id="ea417-165">Often the best way to get a good capture was to just to arrive very early in the morning, before most people showed up.</span></span>

<span data-ttu-id="ea417-166">Algunas otras técnicas de captura útiles provienen directamente de las prácticas de películas tradicionales.</span><span class="sxs-lookup"><span data-stu-id="ea417-166">Some other useful capture techniques come straight from traditional film practices.</span></span> <span data-ttu-id="ea417-167">Por ejemplo, se ha usado una tarjeta de corrección de color en todas nuestras cámaras y se han capturado fotografías de referencia de texturas y objetos que podríamos necesitar más adelante.</span><span class="sxs-lookup"><span data-stu-id="ea417-167">For example, we used a color correction card on all of our cameras and captured reference photos of textures and objects we might need later.</span></span> 

![Un corte aproximado de Machu Picchu que muestra la tarjeta de corrección de color.](images/rough-cut-machu-picchu-500px.png)

<span data-ttu-id="ea417-169">Un corte aproximado del material de Pantheon antes de la Unión.</span><span class="sxs-lookup"><span data-stu-id="ea417-169">A rough cut of Pantheon footage before stitching.</span></span>

### <a name="processing-the-video"></a><span data-ttu-id="ea417-170">Procesamiento del vídeo</span><span class="sxs-lookup"><span data-stu-id="ea417-170">Processing the video</span></span>

<span data-ttu-id="ea417-171">La captura del contenido de 360 ° es solo el primer paso; se necesita una gran cantidad de procesamiento para convertir el metraje de cámara sin procesar capturado en los recursos finales que se ven en HoloTour.</span><span class="sxs-lookup"><span data-stu-id="ea417-171">Capturing 360° content is only the first step—a lot of processing is needed to convert the raw camera footage we captured into the final assets you see in HoloTour.</span></span> <span data-ttu-id="ea417-172">Una vez que volvamos a casa, necesitábamos tomar el vídeo de 14 fuentes de cámara diferentes y convertirlo en un vídeo continuo con los artefactos mínimos.</span><span class="sxs-lookup"><span data-stu-id="ea417-172">Once we were back home we needed to take the video from 14 different camera feeds and turn it into a single continuous video with minimal artifacts.</span></span> <span data-ttu-id="ea417-173">Nuestro equipo de arte usó una serie de herramientas para combinar y perfeccionar el metraje capturado y hemos desarrollado una canalización para optimizar el procesamiento tanto como sea posible.</span><span class="sxs-lookup"><span data-stu-id="ea417-173">Our art team used a number of tools to combine and polish the captured footage and we developed a pipeline to optimize the processing as much as possible.</span></span> <span data-ttu-id="ea417-174">Se debía unir el metraje, corregir el color y, a continuación, componerlo para quitar elementos y artefactos que distraigan o para agregar bolsillos complementarios de la vida y el movimiento, todo ello con el objetivo de mejorar la sensación de que realmente está ahí.</span><span class="sxs-lookup"><span data-stu-id="ea417-174">The footage had to be stitched together, color corrected, and then composited to remove distracting elements and artifacts or to add supplemental pockets of life and motion, all with the goal to enhance that feeling of actually being there.</span></span>

![Un corte aproximado del material de Pantheon antes de la Unión.](images/rough-cut-pantheon-500px.png)

<span data-ttu-id="ea417-176">Un corte aproximado del material de Pantheon antes de la Unión.</span><span class="sxs-lookup"><span data-stu-id="ea417-176">A rough cut of Pantheon footage before stitching.</span></span> 


<span data-ttu-id="ea417-177">Para unir los vídeos, usamos una herramienta denominada [PTGui](https://www.ptgui.com/) y la integró en nuestra canalización de procesamiento.</span><span class="sxs-lookup"><span data-stu-id="ea417-177">To stitch the videos together, we used a tool called [PTGui](https://www.ptgui.com/) and integrated it into our processing pipeline.</span></span> <span data-ttu-id="ea417-178">Como parte del procesamiento posterior se extrajeron los fotogramas de nuestros vídeos y se encontró un patrón de Unión que parecía adecuado para uno de esos fotogramas.</span><span class="sxs-lookup"><span data-stu-id="ea417-178">As part of post-processing we extracted still frames from our videos and found a stitching pattern that looked good for one of those frames.</span></span> <span data-ttu-id="ea417-179">A continuación, aplicamos ese patrón a un complemento personalizado que hemos escrito que permitió a nuestros artistas de vídeo ajustar y ajustar el patrón de unión directamente durante la composición en After Effects.</span><span class="sxs-lookup"><span data-stu-id="ea417-179">We then applied that pattern to a custom plugin we wrote that allowed our video artists to fine tune and tweak the stitching pattern directly while compositing in After Effects.</span></span> 

![Captura de pantalla de PTGui que muestra el material de Pantheon de Unión.](images/stitching-tool-pantheon-500px.png)

<span data-ttu-id="ea417-181">Captura de pantalla de PTGui que muestra el material de Pantheon de Unión.</span><span class="sxs-lookup"><span data-stu-id="ea417-181">Screenshot of PTGui showing the stitched Pantheon footage.</span></span> 


### <a name="video-playback"></a><span data-ttu-id="ea417-182">Reproducción de vídeo</span><span class="sxs-lookup"><span data-stu-id="ea417-182">Video playback</span></span>

<span data-ttu-id="ea417-183">Una vez completado el procesamiento del metraje, tenemos un vídeo sin problemas, pero es extraordinariamente grande, en torno a la resolución de 8K.</span><span class="sxs-lookup"><span data-stu-id="ea417-183">After processing of the footage is completed, we have a seamless video but it’s extraordinarily large—around 8K resolution.</span></span> <span data-ttu-id="ea417-184">La descodificación de vídeo es costosa y hay muy pocos equipos que pueden controlar un vídeo de 8 KB, por lo que el siguiente desafío era encontrar una manera de volver a reproducir este vídeo en HoloLens.</span><span class="sxs-lookup"><span data-stu-id="ea417-184">Decoding video is expensive and there are very few computers that can handle an 8K video so the next challenge was finding a way to play this video back on HoloLens.</span></span> <span data-ttu-id="ea417-185">Hemos desarrollado una serie de estrategias para evitar el costo de la descodificación y, al mismo tiempo, parece que el usuario estaba viendo todo el vídeo.</span><span class="sxs-lookup"><span data-stu-id="ea417-185">We developed a number of strategies to avoid the cost of decoding while still making the user feel like they were viewing the entire video.</span></span>

<span data-ttu-id="ea417-186">La optimización más sencilla es evitar descodificar partes del vídeo que no cambian mucho.</span><span class="sxs-lookup"><span data-stu-id="ea417-186">The easiest optimization is to avoid decoding parts of the video that don’t change much.</span></span> <span data-ttu-id="ea417-187">Hemos escrito una herramienta para identificar áreas de cada escena que tienen poco o ningún movimiento.</span><span class="sxs-lookup"><span data-stu-id="ea417-187">We wrote a tool to identify areas in each scene that have little or no motion.</span></span> <span data-ttu-id="ea417-188">En esas regiones, se muestra una imagen estática en lugar de descodificar un vídeo en cada fotograma.</span><span class="sxs-lookup"><span data-stu-id="ea417-188">For those regions we show a static image rather than decoding a video each frame.</span></span> <span data-ttu-id="ea417-189">Para que esto sea posible, se divide el vídeo masivo en fragmentos mucho más pequeños.</span><span class="sxs-lookup"><span data-stu-id="ea417-189">To make this possible, we divided up the massive video into much smaller chunks.</span></span>

<span data-ttu-id="ea417-190">También nos hemos asegurado de que todos los píxeles que hemos descodificado se hayan usado de forma más eficaz.</span><span class="sxs-lookup"><span data-stu-id="ea417-190">We also made sure that every pixel we decoded was used most effectively.</span></span> <span data-ttu-id="ea417-191">Hemos experimentado técnicas de compresión para reducir el tamaño del vídeo. Dividimos las regiones de vídeo según los polígonos de la geometría en la que se proyectaría; Hemos ajustado UVs y reempaquetado los vídeos en función de la cantidad de detalles que se incluyen en los distintos polígonos.</span><span class="sxs-lookup"><span data-stu-id="ea417-191">We experimented with compression techniques to lower the size of the video; we split the video regions according to the polygons of the geometry it would be projected onto; we adjusted UVs and repacked the videos based on how much detail different polygons included.</span></span> <span data-ttu-id="ea417-192">El resultado de este trabajo es que lo que comenzó como un vídeo de 8k único se convirtió en muchos fragmentos que parecen casi ininteligibles hasta que se reproyectan correctamente en la escena.</span><span class="sxs-lookup"><span data-stu-id="ea417-192">The result of this work is that what started as a single 8k video turned into many chunks that look almost unintelligible until they are properly re-projected into the scene.</span></span> <span data-ttu-id="ea417-193">Para un desarrollador de juegos que comprenda la asignación de texturas y el empaquetado de UV, probablemente le resulte familiar.</span><span class="sxs-lookup"><span data-stu-id="ea417-193">For a game developer who understands texture mapping and UV packing, this will probably look familiar.</span></span> 

![Una vista completa de Pantheon antes de las optimizaciones.](images/pantheon-before-optimization-500px.png) 

<span data-ttu-id="ea417-195">Una vista completa de Pantheon antes de las optimizaciones.</span><span class="sxs-lookup"><span data-stu-id="ea417-195">A full view of the Pantheon before optimizations.</span></span> 


![La mitad derecha de Pantheon, procesada para la reproducción de vídeo.](images/pantheon-process-video-playback-500px.png) 

<span data-ttu-id="ea417-197">La mitad derecha de Pantheon, procesada para la reproducción de vídeo.</span><span class="sxs-lookup"><span data-stu-id="ea417-197">The right half of the Pantheon, processed for video playback.</span></span> 


![Ejemplo de una sola región de vídeo después de la optimización y el empaquetado.](images/single-video-region-after-optimization-500px.png) 

<span data-ttu-id="ea417-199">Ejemplo de una sola región de vídeo después de la optimización y el empaquetado.</span><span class="sxs-lookup"><span data-stu-id="ea417-199">Example of a single video region after optimization and packing.</span></span> 


<span data-ttu-id="ea417-200">Otro truco que usamos era evitar descodificar el vídeo que no está viendo de forma activa.</span><span class="sxs-lookup"><span data-stu-id="ea417-200">Another trick we used was to avoid decoding video you aren’t actively viewing.</span></span> <span data-ttu-id="ea417-201">En HoloTour, solo puede ver parte de la escena completa en un momento dado.</span><span class="sxs-lookup"><span data-stu-id="ea417-201">While in HoloTour, you can only see part of the full scene at any given moment.</span></span> <span data-ttu-id="ea417-202">Solo descodificamos vídeos dentro o fuera del campo de vista (campo de vista).</span><span class="sxs-lookup"><span data-stu-id="ea417-202">We only decode videos within or shortly outside of your field of view (FOV).</span></span> <span data-ttu-id="ea417-203">A medida que gira el cabezal, empezamos a reproducir las regiones del vídeo que se encuentran ahora en el campo de campo y dejan de reproducirse que ya no se encuentran en ella.</span><span class="sxs-lookup"><span data-stu-id="ea417-203">As you rotate your head, we start playing the regions of the video that are now in your FOV and stop playing ones that are no longer within it.</span></span> <span data-ttu-id="ea417-204">La mayoría de las personas ni siquiera observarán que esto sucede, pero si lo hace rápidamente, verá que el vídeo tarda un segundo en iniciarse. mientras tanto, verá una imagen estática que luego se atenúa hasta el vídeo una vez que está lista.</span><span class="sxs-lookup"><span data-stu-id="ea417-204">Most people won’t even notice this is happening, but if you turn around rapidly, you’ll see the video takes a second to start— in the meantime you’ll see a static image which then fades back to video once it’s ready.</span></span>

<span data-ttu-id="ea417-205">Para que esta estrategia funcione, desarrollamos un gran sistema de reproducción de vídeo.</span><span class="sxs-lookup"><span data-stu-id="ea417-205">To make this strategy work we developed an extensive video playback system.</span></span> <span data-ttu-id="ea417-206">Hemos optimizado el código de reproducción de bajo nivel para que la conmutación de vídeo sea extremadamente eficaz.</span><span class="sxs-lookup"><span data-stu-id="ea417-206">We optimized the low level playback code in order to make video switching extremely efficient.</span></span> <span data-ttu-id="ea417-207">Además, teníamos que codificar nuestros vídeos de una forma especial para que pueda cambiar rápidamente a cualquier vídeo en cualquier momento.</span><span class="sxs-lookup"><span data-stu-id="ea417-207">Additionally, we had to encode our videos in a special way to make it possible to rapidly switch to any video at any time.</span></span> <span data-ttu-id="ea417-208">Esta canalización de reproducción tardó una cantidad significativa de tiempo de desarrollo, por lo que la implementamos en fases.</span><span class="sxs-lookup"><span data-stu-id="ea417-208">This playback pipeline took a significant amount of development time so we implemented it in stages.</span></span> <span data-ttu-id="ea417-209">Comenzamos con un sistema más sencillo que era menos eficaz, pero permitían que los diseñadores y artistas trabajaran en la experiencia y lo mejoraran lentamente a un sistema de reproducción más robusto que nos permitió enviar en la barra de calidad final.</span><span class="sxs-lookup"><span data-stu-id="ea417-209">We started with a simpler system that was less efficient, but allowed designers and artists to work on the experience, and slowly improved it to a more robust playback system that allowed us to ship at the final quality bar.</span></span> <span data-ttu-id="ea417-210">Este sistema final tenía herramientas personalizadas que creamos en Unity para configurar el vídeo dentro de la escena y supervisar el motor de reproducción.</span><span class="sxs-lookup"><span data-stu-id="ea417-210">This final system had custom tools we created within Unity to set up the video within the scene and monitor the playback engine.</span></span>

### <a name="recreating-near-space-objects-in-3d"></a><span data-ttu-id="ea417-211">Volver a crear objetos cercanos a espacios en 3D</span><span class="sxs-lookup"><span data-stu-id="ea417-211">Recreating near-space objects in 3D</span></span>

<span data-ttu-id="ea417-212">Los vídeos componen la mayor parte de lo que se ve en HoloTour, pero hay una serie de objetos 3D cercanos, como el pintado en Piazza Navona, la fuente fuera del Pantheon o el globo de aire caliente que se encuentra en las escenas aéreas.</span><span class="sxs-lookup"><span data-stu-id="ea417-212">Videos make up the majority of what you see in HoloTour, but there are a number of 3D objects that appear close to you, such as the painting in Piazza Navona, the fountain outside the Pantheon, or the hot air balloon you stand in for aerial scenes.</span></span> <span data-ttu-id="ea417-213">Estos objetos 3D son importantes porque la percepción de profundidad humana está muy bien cerca, pero no está muy bien.</span><span class="sxs-lookup"><span data-stu-id="ea417-213">These 3D objects are important because human depth perception is very good up close, but not very good far away.</span></span> <span data-ttu-id="ea417-214">Podemos echar un vídeo a la distancia, pero para que los usuarios puedan desplazarse por su espacio y parezca que realmente están allí, los objetos cercanos necesitan profundidad.</span><span class="sxs-lookup"><span data-stu-id="ea417-214">We can get away with video in the distance, but to allow users to walk around their space and feel like they’re really there, nearby objects need depth.</span></span> <span data-ttu-id="ea417-215">Esta técnica es similar a la del tipo de cosa que puede ver en un Museo de historial natural, que es una imagen de un diorama que tiene landscaping físicos, plantas y especímenes de animales en primer plano, pero recedes en un dibujo de mate con máscara inteligente en segundo plano.</span><span class="sxs-lookup"><span data-stu-id="ea417-215">This technique is similar to the sort of thing you might see in a natural history museum—picture a diorama that has physical landscaping, plants, and animal specimens in the foreground, but recedes into a cleverly masked matte painting in the background.</span></span>

<span data-ttu-id="ea417-216">Algunos objetos son simplemente activos 3D que se han creado y agregado a la escena para mejorar la experiencia.</span><span class="sxs-lookup"><span data-stu-id="ea417-216">Some objects are simply 3D assets we created and added to the scene to enhance the experience.</span></span> <span data-ttu-id="ea417-217">La pintura y el globo de aire activo entran en esta categoría porque no estaban presentes cuando se filmó.</span><span class="sxs-lookup"><span data-stu-id="ea417-217">The painting and the hot air balloon fall into this category because they weren’t present when we filmed.</span></span> <span data-ttu-id="ea417-218">De forma similar a los recursos de juego, fueron creados por un artista 3D en nuestro equipo y con la textura adecuada.</span><span class="sxs-lookup"><span data-stu-id="ea417-218">Similar to game assets, they were created by a 3D artist on our team and textured appropriately.</span></span> <span data-ttu-id="ea417-219">Se colocan en nuestras escenas cerca de donde se encuentra y el motor de juegos puede representarlas en las dos pantallas de HoloLens para que aparezcan como un objeto 3D.</span><span class="sxs-lookup"><span data-stu-id="ea417-219">We place these in our scenes near where you stand, and the game engine can render them to the two HoloLens displays so that they appear as a 3D object.</span></span>

<span data-ttu-id="ea417-220">Otros recursos, como la fuente fuera de Pantheon, son objetos reales que existen en las ubicaciones en las que estamos filmando el vídeo, pero para sacar estos objetos del vídeo y en 3D, tenemos que hacer una serie de cosas.</span><span class="sxs-lookup"><span data-stu-id="ea417-220">Other assets, like the fountain outside the Pantheon, are real objects that exist in the locations where we're shooting video, but to bring these objects out of the video and into 3D, we have to do a number of things.</span></span>

<span data-ttu-id="ea417-221">En primer lugar, necesitamos información adicional sobre cada objeto.</span><span class="sxs-lookup"><span data-stu-id="ea417-221">First, we need additional information about each object.</span></span> <span data-ttu-id="ea417-222">Mientras está en la ubicación de filmación, nuestro equipo capturó una gran cantidad de material de referencia de estos objetos para que tengamos suficientes imágenes detalladas para volver a crear las texturas con precisión.</span><span class="sxs-lookup"><span data-stu-id="ea417-222">While on location for filming, our team captured a lot of reference footage of these objects so that we would have enough detailed images to accurately recreate the textures.</span></span> <span data-ttu-id="ea417-223">El equipo también realizó un examen [Photogrammetry](https://en.wikipedia.org/wiki/Photogrammetry) , que construye un modelo 3D a partir de docenas de imágenes 2D, lo que nos proporciona un modelo aproximado del objeto en la escala perfecta.</span><span class="sxs-lookup"><span data-stu-id="ea417-223">The team also performed a [photogrammetry](https://en.wikipedia.org/wiki/Photogrammetry) scan, which constructs a 3D model from dozens of 2D images, giving us a rough model of the object at perfect scale.</span></span>

<span data-ttu-id="ea417-224">A medida que procesamos el metraje, los objetos que se reemplazarán más adelante con una representación 3D se quitarán del vídeo.</span><span class="sxs-lookup"><span data-stu-id="ea417-224">As we process our footage, objects that will later be replaced with a 3D representation are removed from the video.</span></span> <span data-ttu-id="ea417-225">El recurso 3D se basa en el modelo Photogrammetry, pero los artistas lo limpian y simplifican.</span><span class="sxs-lookup"><span data-stu-id="ea417-225">The 3D asset is based on the photogrammetry model but cleaned up and simplified by our artists.</span></span> <span data-ttu-id="ea417-226">En algunos objetos, podemos usar partes del vídeo, como la textura de agua en la fuente, pero la mayor parte de la fuente es ahora un objeto 3D, lo que permite a los usuarios percibir la profundidad y desplazarse por ella en un espacio limitado en la experiencia.</span><span class="sxs-lookup"><span data-stu-id="ea417-226">For some objects, we can use parts of the video—such as the water texture on the fountain—but most of the fountain is now a 3D object, which allows users to perceive depth and walk around it in a limited space in the experience.</span></span> <span data-ttu-id="ea417-227">El hecho de que los objetos cercanos, como esto, se agregan en gran medida a la sensación de realismo y ayuda a los usuarios en la ubicación virtual.</span><span class="sxs-lookup"><span data-stu-id="ea417-227">Having near-space objects like this greatly adds to the sense of realism and helps to ground the users in the virtual location.</span></span> 

![Pantheon metraje con la fuente quitada.](images/object-removal-pantheon-500px.png)

<span data-ttu-id="ea417-230">Pantheon metraje con la fuente quitada.</span><span class="sxs-lookup"><span data-stu-id="ea417-230">Pantheon footage with the fountain removed.</span></span> <span data-ttu-id="ea417-231">Se reemplazará por un activo 3D.</span><span class="sxs-lookup"><span data-stu-id="ea417-231">It will be replaced with a 3D asset.</span></span>


## <a name="final-thoughts"></a><span data-ttu-id="ea417-232">Consideraciones finales</span><span class="sxs-lookup"><span data-stu-id="ea417-232">Final thoughts</span></span>

<span data-ttu-id="ea417-233">Obviamente, había más que crear este contenido de lo que se ha explicado aquí.</span><span class="sxs-lookup"><span data-stu-id="ea417-233">Obviously, there was more to creating this content than what we've discussed here.</span></span> <span data-ttu-id="ea417-234">Hay algunas escenas que nos gustaría denominarlas "perspectivas imposibles", como la conducción del globo de aire activo y la lucha Gladiator en el Colosseum, lo que supuso un enfoque más creativo.</span><span class="sxs-lookup"><span data-stu-id="ea417-234">There are a few scenes—we like to call them "impossible perspectives"—including the hot air balloon ride and the gladiator fight in the Colosseum, which took a more creative approach.</span></span> <span data-ttu-id="ea417-235">Los abordaremos en un caso práctico futuro.</span><span class="sxs-lookup"><span data-stu-id="ea417-235">We'll address these in a future case study.</span></span>

<span data-ttu-id="ea417-236">Esperamos que el uso compartido de soluciones a algunos de los desafíos más importantes que teníamos durante la producción sea útil para otros desarrolladores y que esté inspirado en el uso de algunas de estas técnicas para crear sus propias experiencias envolventes para HoloLens.</span><span class="sxs-lookup"><span data-stu-id="ea417-236">We hope that sharing solutions to some of the bigger challenges we had during production is helpful to other developers and that you're inspired to use some of these techniques to create your own immersive experiences for HoloLens.</span></span> <span data-ttu-id="ea417-237">(Si lo hace, asegúrese de compartirlo con nosotros en el foro de [desarrollo de aplicaciones de HoloLens](https://forums.hololens.com/)).</span><span class="sxs-lookup"><span data-stu-id="ea417-237">(And if you do, please make sure to share it with us on the [HoloLens App Development forum](https://forums.hololens.com/)!)</span></span>

## <a name="about-the-authors"></a><span data-ttu-id="ea417-238">Acerca de los autores</span><span class="sxs-lookup"><span data-stu-id="ea417-238">About the authors</span></span>

<table style="border:0">
<tr>
<td style="border:0" width="60px"> <img alt="David Haley" width="60" height="60" src="images/haley.png" /></td>
<td style="border:0" width="408"> <span data-ttu-id="ea417-239"><b>David Haley</b> es un Desarrollador Senior que ha aprendido más sobre las plataformas de cámara y la reproducción de vídeo de las que pensaba que podía trabajar en HoloTour.</span><span class="sxs-lookup"><span data-stu-id="ea417-239"><b>David Haley</b> is a Senior Developer who learned more about camera rigs and video playback than he thought possible from working on HoloTour.</span></span></td>
<td style="border:0" width="60px"> <img alt="Danny Askew" width="60" height="60" src="images/askew.png" /></td>
<td style="border:0" width="408"> <span data-ttu-id="ea417-240"><b>Danny Askew</b> es un artista de vídeo que nos ha asegurado de que su viaje a Roma sea lo más fácil posible.</span><span class="sxs-lookup"><span data-stu-id="ea417-240"><b>Danny Askew</b> is a Video Artist who made sure your journey through Rome was as flawless as possible.</span></span></td>
</tr>
<tr>
<td style="border:0" width="60px"> <img alt="Jason Syltebo" width="60" height="60" src="images/syltebo.png" /></td>
<td style="border:0" width="408"> <span data-ttu-id="ea417-241"><b>Jason Syltebo</b> es un diseñador de audio que nos ha asegurado de que pudiera experimentar el soundscape de todos los destinos que visita, incluso cuando regresa al tiempo.</span><span class="sxs-lookup"><span data-stu-id="ea417-241"><b>Jason Syltebo</b> is an Audio Designer who made sure you could experience the soundscape of every destination you visit, even when you go back in time.</span></span></td>
<td style="border:0" width="60px"> <img alt="Travis Steiner" width="60" height="60" src="images/steiner.png" /></td>
<td style="border:0" width="408"> <span data-ttu-id="ea417-242"><b>Travis Steiner</b> es un director de diseño que investiga y dirige las ubicaciones, crea planes de viajes y filma en el sitio.</span><span class="sxs-lookup"><span data-stu-id="ea417-242"><b>Travis Steiner</b> is a Design Director who researched and scouted locations, created trip plans, and directed filming on site.</span></span></td>
</tr>
</table>



## <a name="see-also"></a><span data-ttu-id="ea417-243">Consulte también</span><span class="sxs-lookup"><span data-stu-id="ea417-243">See also</span></span>
* [<span data-ttu-id="ea417-244">Vídeo: Microsoft HoloLens: HoloTour</span><span class="sxs-lookup"><span data-stu-id="ea417-244">Video: Microsoft HoloLens: HoloTour</span></span>](https://www.youtube.com/watch?v=pLd9WPlaMpY)
