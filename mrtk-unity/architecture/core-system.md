---
title: Sistema principal
description: Sistema de entrada, administradores de dispositivos y proveedores de datos en MRTK
author: cDiaz-MS
ms.author: cadia
ms.date: 01/12/2021
keywords: Unity, HoloLens, HoloLens 2, Mixed Reality, desarrollo, MRTK, eventos
ms.openlocfilehash: 79ebd3855cd991db168233f00058ab5d42f87d83
ms.sourcegitcommit: 8b4c2b1aac83bc8adf46acfd92b564f899ef7735
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 06/30/2021
ms.locfileid: "113121604"
---
# <a name="core-system"></a><span data-ttu-id="f13ad-104">Sistema principal</span><span class="sxs-lookup"><span data-stu-id="f13ad-104">Core system</span></span>

<span data-ttu-id="f13ad-105">En el centro del sistema de entrada se encuentra [InputSystem](../features/input/overview.md), que es un servicio que es responsable de inicializar y operar toda la funcionalidad relacionada con la entrada asociada a MRTK.</span><span class="sxs-lookup"><span data-stu-id="f13ad-105">At the heart of the input system is the [InputSystem](../features/input/overview.md), which is a service that is responsible for initializing and operating all of the input related functionality associated with the MRTK.</span></span>

> [!NOTE]
> <span data-ttu-id="f13ad-106">Se supone que los lectores ya han leído y tienen un conocimiento básico de la [sección de terminología.](terminology.md)</span><span class="sxs-lookup"><span data-stu-id="f13ad-106">It is assumed that readers have already read and have a basic understanding of the [terminology](terminology.md) section.</span></span>

<span data-ttu-id="f13ad-107">Este servicio es responsable de:</span><span class="sxs-lookup"><span data-stu-id="f13ad-107">This service is responsible for:</span></span>

- <span data-ttu-id="f13ad-108">Lectura del perfil [del sistema de entrada](../configuration/mixed-reality-configuration-guide.md#input-system-settings)</span><span class="sxs-lookup"><span data-stu-id="f13ad-108">Reading the [input system profile](../configuration/mixed-reality-configuration-guide.md#input-system-settings)</span></span>
- <span data-ttu-id="f13ad-109">Iniciar los proveedores [de datos configurados](../features/input/input-providers.md) (por ejemplo, `Windows Mixed Reality Device Manager` y `OpenVR Device Manager` ).</span><span class="sxs-lookup"><span data-stu-id="f13ad-109">Starting the configured [data providers](../features/input/input-providers.md) (for example, `Windows Mixed Reality Device Manager` and `OpenVR Device Manager`).</span></span>
- <span data-ttu-id="f13ad-110">Creación de instancias de [GazeProvider,](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityGazeProvider)que es un componente que es responsable de proporcionar información de mirada con la cabeza de estilo HoloLens (primera generación), además de HoloLens 2 información de mirada con los ojos de estilo.</span><span class="sxs-lookup"><span data-stu-id="f13ad-110">Instantiation of the [GazeProvider](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityGazeProvider), which is a component that is responsible for providing HoloLens (1st generation) style head gaze information in addition to HoloLens 2 style eye gaze information.</span></span>
- <span data-ttu-id="f13ad-111">Creación de instancias de [FocusProvider,](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityFocusProvider)que es un componente responsable de determinar los objetos que tienen el foco.</span><span class="sxs-lookup"><span data-stu-id="f13ad-111">Instantiation of the [FocusProvider](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityFocusProvider), which is a component that is responsible for determining objects that have focus.</span></span> <span data-ttu-id="f13ad-112">Esto se describe con más profundidad en la [sección punteros y foco](controllers-pointers-and-focus.md#pointers-and-focus) de la documentación.</span><span class="sxs-lookup"><span data-stu-id="f13ad-112">This is described in more depth in the [pointers and focus](controllers-pointers-and-focus.md#pointers-and-focus) section of the documentation.</span></span>
- <span data-ttu-id="f13ad-113">Proporcionar puntos de registro para todos los eventos de entrada (como [agentes de escucha globales).](#global-listeners)</span><span class="sxs-lookup"><span data-stu-id="f13ad-113">Providing registration points for all input events (as [global listeners](#global-listeners)).</span></span>
- <span data-ttu-id="f13ad-114">Proporcionar funcionalidades de distribución de eventos para esos eventos de entrada.</span><span class="sxs-lookup"><span data-stu-id="f13ad-114">Providing event dispatch capabilities for those input events.</span></span>

## <a name="input-events"></a><span data-ttu-id="f13ad-115">Eventos de entrada</span><span class="sxs-lookup"><span data-stu-id="f13ad-115">Input events</span></span>

<span data-ttu-id="f13ad-116">Por lo general, los eventos de entrada se desencadenan en dos canales diferentes:</span><span class="sxs-lookup"><span data-stu-id="f13ad-116">Input events are generally fired on two different channels:</span></span>

### <a name="objects-in-focus"></a><span data-ttu-id="f13ad-117">Objetos en el foco</span><span class="sxs-lookup"><span data-stu-id="f13ad-117">Objects in focus</span></span>

<span data-ttu-id="f13ad-118">Los eventos se pueden enviar directamente a un Elemento GameObject que tenga el foco.</span><span class="sxs-lookup"><span data-stu-id="f13ad-118">Events can be sent directly to a GameObject that has focus.</span></span> <span data-ttu-id="f13ad-119">Por ejemplo, un objeto podría tener un script que implemente [`IMixedRealityTouchHandler`](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityTouchHandler) .</span><span class="sxs-lookup"><span data-stu-id="f13ad-119">For example, an object might have a script that implements [`IMixedRealityTouchHandler`](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityTouchHandler).</span></span>
<span data-ttu-id="f13ad-120">Este objeto obtiene eventos táctiles cuando se centra en una mano que está cerca de él.</span><span class="sxs-lookup"><span data-stu-id="f13ad-120">This object would get touch events when focused by a hand that is near it.</span></span> <span data-ttu-id="f13ad-121">Estos tipos de eventos "sumen" la jerarquía de GameObject hasta que encuentre un GameObject capaz de controlar el evento.</span><span class="sxs-lookup"><span data-stu-id="f13ad-121">These types of events go "up" the GameObject hierarchy until it finds a GameObject that is capable of handling the event.</span></span>

<span data-ttu-id="f13ad-122">Para ello, use [ExecuteHierarchy desde la](https://docs.unity3d.com/ScriptReference/EventSystems.ExecuteEvents.ExecuteHierarchy.html) implementación predeterminada del sistema de entrada.</span><span class="sxs-lookup"><span data-stu-id="f13ad-122">This is done by using [ExecuteHierarchy](https://docs.unity3d.com/ScriptReference/EventSystems.ExecuteEvents.ExecuteHierarchy.html) from within the default input system implementation.</span></span>

### <a name="global-listeners"></a><span data-ttu-id="f13ad-123">Agentes de escucha globales</span><span class="sxs-lookup"><span data-stu-id="f13ad-123">Global listeners</span></span>

<span data-ttu-id="f13ad-124">Los eventos se pueden enviar a agentes de escucha globales.</span><span class="sxs-lookup"><span data-stu-id="f13ad-124">Events can be sent to global listeners.</span></span> <span data-ttu-id="f13ad-125">Es posible registrarse para todos los eventos de entrada mediante la interfaz del sistema de [`IMixedRealityEventSystem`](xref:Microsoft.MixedReality.Toolkit.IMixedRealityEventSystem) entrada.</span><span class="sxs-lookup"><span data-stu-id="f13ad-125">It's possible to register for all input events by using the input system's [`IMixedRealityEventSystem`](xref:Microsoft.MixedReality.Toolkit.IMixedRealityEventSystem) interface.</span></span> <span data-ttu-id="f13ad-126">Se recomienda usar el método [RegisterHandler](xref:Microsoft.MixedReality.Toolkit.IMixedRealityEventSystem.RegisterHandler%2A) para registrar eventos globales: la función en desuso hará que los agentes de escucha reciban una notificación de TODOS los eventos de entrada, en lugar de solo los eventos de entrada de un tipo determinado (donde el tipo se define mediante la interfaz de `Register` eventos).</span><span class="sxs-lookup"><span data-stu-id="f13ad-126">It's recommended to use the [RegisterHandler](xref:Microsoft.MixedReality.Toolkit.IMixedRealityEventSystem.RegisterHandler%2A) method for registering for global events - the deprecated `Register` function will cause listeners to get notified of ALL input events, rather than just input events of a particular type (where type is defined by the event interface).</span></span>

<span data-ttu-id="f13ad-127">Tenga [en](xref:Microsoft.MixedReality.Toolkit.Input.MixedRealityInputSystem.PushFallbackInputHandler%2A) cuenta que los agentes de escucha de reserva son otro tipo de agentes de escucha globales que también se desaconseja porque recibirán cada evento de entrada único que no se haya manipulado en ningún otro lugar de la escena.</span><span class="sxs-lookup"><span data-stu-id="f13ad-127">Note that [fallback listeners](xref:Microsoft.MixedReality.Toolkit.Input.MixedRealityInputSystem.PushFallbackInputHandler%2A) are another type of global listeners which are also discouraged because they will receive every single input event that hasn't been handled elsewhere in the scene.</span></span>

### <a name="order-of-event-dispatch"></a><span data-ttu-id="f13ad-128">Orden de envío de eventos</span><span class="sxs-lookup"><span data-stu-id="f13ad-128">Order of event dispatch</span></span>

<span data-ttu-id="f13ad-129">Por lo general, los eventos se envían a los agentes de escucha de la siguiente manera.</span><span class="sxs-lookup"><span data-stu-id="f13ad-129">Generally, events are sent to listeners in the following way.</span></span> <span data-ttu-id="f13ad-130">Tenga en cuenta que si alguno de los pasos siguientes marca el evento como [manipulado,](https://docs.unity3d.com/ScriptReference/EventSystems.AbstractEventData-used.html)el proceso de distribución de eventos se detiene.</span><span class="sxs-lookup"><span data-stu-id="f13ad-130">Note that if any of the steps below mark the event as [handled](https://docs.unity3d.com/ScriptReference/EventSystems.AbstractEventData-used.html), the event dispatch process stops.</span></span>

1. <span data-ttu-id="f13ad-131">El evento se envía a los agentes de escucha globales.</span><span class="sxs-lookup"><span data-stu-id="f13ad-131">Event is sent to global listeners.</span></span>
2. <span data-ttu-id="f13ad-132">El evento se envía a los diálogos modales del objeto centrado.</span><span class="sxs-lookup"><span data-stu-id="f13ad-132">Event is sent to modal dialogs of the focused object.</span></span>
3. <span data-ttu-id="f13ad-133">El evento se envía al objeto centrado.</span><span class="sxs-lookup"><span data-stu-id="f13ad-133">Event is sent to the focused object.</span></span>
4. <span data-ttu-id="f13ad-134">El evento se envía a los agentes de escucha de reserva.</span><span class="sxs-lookup"><span data-stu-id="f13ad-134">Event is sent to fallback listeners.</span></span>

## <a name="device-managers-and-data-providers"></a><span data-ttu-id="f13ad-135">Administradores de dispositivos y proveedores de datos</span><span class="sxs-lookup"><span data-stu-id="f13ad-135">Device managers and data providers</span></span>

<span data-ttu-id="f13ad-136">Estas entidades son responsables de la interacción con las API de nivel inferior (como las API de Windows Mixed Reality o las API de OpenVR) y de traducir datos de esos sistemas en aquellas que se ajusten a las abstracciones de entrada de nivel superior de MRTK.</span><span class="sxs-lookup"><span data-stu-id="f13ad-136">These entities are responsible for interfacing with lower-level APIs (such as Windows Mixed Reality APIs, or OpenVR APIs) and translating data from those systems into ones that fit the MRTK's higher level input abstractions.</span></span> <span data-ttu-id="f13ad-137">Son responsables de detectar, crear y administrar la duración de los [controladores](controllers-pointers-and-focus.md#controllers).</span><span class="sxs-lookup"><span data-stu-id="f13ad-137">They are responsible for detecting, creating, and managing the lifetime of [controllers](controllers-pointers-and-focus.md#controllers).</span></span>

<span data-ttu-id="f13ad-138">El flujo básico de un administrador de dispositivos implica:</span><span class="sxs-lookup"><span data-stu-id="f13ad-138">The basic flow of a device manager involves:</span></span>

1. <span data-ttu-id="f13ad-139">El servicio del sistema de entrada crea instancias del administrador de dispositivos.</span><span class="sxs-lookup"><span data-stu-id="f13ad-139">The device manager is instantiated by the input system service.</span></span>
2. <span data-ttu-id="f13ad-140">El administrador de dispositivos se registra con su sistema subyacente (por ejemplo, el administrador de dispositivos Windows Mixed Reality se registrará para los eventos [de](../features/input/input-events.md) entrada [y gesto.](../features/input/gestures.md#gesture-events)</span><span class="sxs-lookup"><span data-stu-id="f13ad-140">The device manager registers with its underlying system (for example, the Windows Mixed Reality device manager will register for [input](../features/input/input-events.md) and [gesture](../features/input/gestures.md#gesture-events) events.</span></span>
3. <span data-ttu-id="f13ad-141">Crea controladores que detecta desde el sistema subyacente (por ejemplo, el proveedor podría detectar la presencia de manos articuladas).</span><span class="sxs-lookup"><span data-stu-id="f13ad-141">It creates controllers that it discovers from the underlying system (for example the provider could detect the presence of articulated hands)</span></span>
4. <span data-ttu-id="f13ad-142">En su bucle Update(), llame a UpdateController() para sondear el nuevo estado del sistema subyacente y actualizar su representación del controlador.</span><span class="sxs-lookup"><span data-stu-id="f13ad-142">In its Update() loop, call UpdateController() to poll for the new state of the underlying system and update its controller representation.</span></span>
