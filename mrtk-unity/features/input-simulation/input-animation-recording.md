---
title: Grabación de animación de entrada
description: Documentación sobre el sistema de grabación de animaciones de entrada en MRTK
author: CDiaz-MS
ms.author: cadia
ms.date: 01/12/2021
keywords: Unity, HoloLens, HoloLens 2, Mixed Reality, desarrollo, MRTK
ms.openlocfilehash: 6bdb764c5905352b9aec7c1512a73e727b60573a
ms.sourcegitcommit: f338b1f121a10577bcce08a174e462cdc86d5874
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 07/01/2021
ms.locfileid: "113176939"
---
# <a name="input-animation-recording"></a><span data-ttu-id="8c39c-104">Grabación de animación de entrada</span><span class="sxs-lookup"><span data-stu-id="8c39c-104">Input animation recording</span></span>

<span data-ttu-id="8c39c-105">MRTK cuenta con un sistema de grabación por el que los datos de movimiento de la cabeza y de seguimiento de las manos se pueden almacenar en archivos de animación.</span><span class="sxs-lookup"><span data-stu-id="8c39c-105">MRTK features an recording system by which head movement and hand tracking data can be stored in animation files.</span></span> <span data-ttu-id="8c39c-106">A continuación, los datos registrados se pueden reproducir mediante el sistema [de simulación de entrada](input-simulation-service.md).</span><span class="sxs-lookup"><span data-stu-id="8c39c-106">The recorded data can then be played back using the [input simulation system](input-simulation-service.md).</span></span>

<span data-ttu-id="8c39c-107">La entrada de grabación es una herramienta útil en una variedad de situaciones:</span><span class="sxs-lookup"><span data-stu-id="8c39c-107">Recording input is a useful tool in a variety of situations:</span></span>

* <span data-ttu-id="8c39c-108">Crear pruebas automatizadas de interacción, manipulaciones, solucionadores, etc. La creación del movimiento de controladores y manos para estas pruebas puede llevar mucho tiempo.</span><span class="sxs-lookup"><span data-stu-id="8c39c-108">Creating automated tests for interaction, manipulations, solvers, etc. Creating the movement of controllers and hands for these tests can be time consuming.</span></span> <span data-ttu-id="8c39c-109">La entrada de grabación directa puede acelerar el proceso y proporcionar datos reales.</span><span class="sxs-lookup"><span data-stu-id="8c39c-109">Recording input directly can speed up the process and provide real-world data.</span></span>
* <span data-ttu-id="8c39c-110">Enseñar el uso de elementos de la experiencia de usuario a través de animaciones.</span><span class="sxs-lookup"><span data-stu-id="8c39c-110">Teaching the use of UX elements through animations.</span></span>
  <span data-ttu-id="8c39c-111">Mostrar a los usuarios cómo interactuar con botones y otros objetos puede suavizar la curva de aprendizaje.</span><span class="sxs-lookup"><span data-stu-id="8c39c-111">Showing users how to interact with buttons and other objects can smooth the learning curve.</span></span>
* <span data-ttu-id="8c39c-112">Depuración de un comportamiento inesperado que se puede encontrar durante el uso normal.</span><span class="sxs-lookup"><span data-stu-id="8c39c-112">Debugging unexpected behavior that may be encountered during regular use.</span></span>
  <span data-ttu-id="8c39c-113">El sistema de grabación admite un concepto de "búfer gradual" que permite grabar entradas recientes en segundo plano.</span><span class="sxs-lookup"><span data-stu-id="8c39c-113">The recording system supports a "rolling buffer" concept that allows recording recent input in the background.</span></span>
  <span data-ttu-id="8c39c-114">Vea [Input Recording Service](#input-recording-service).</span><span class="sxs-lookup"><span data-stu-id="8c39c-114">See [Input Recording Service](#input-recording-service).</span></span>

## <a name="recording-and-playback-services"></a><span data-ttu-id="8c39c-115">Servicios de grabación y reproducción</span><span class="sxs-lookup"><span data-stu-id="8c39c-115">Recording and playback services</span></span>

<span data-ttu-id="8c39c-116">Se proporcionan dos servicios del sistema de entrada para registrar y reproducir entradas, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="8c39c-116">Two input system services are provided to record and play back input respectively.</span></span>

### <a name="input-recording-service"></a><span data-ttu-id="8c39c-117">Servicio de grabación de entrada</span><span class="sxs-lookup"><span data-stu-id="8c39c-117">Input recording service</span></span>

<span data-ttu-id="8c39c-118">[`InputRecordingService`](xref:Microsoft.MixedReality.Toolkit.Input.InputRecordingService) toma datos de la transformación de la cámara principal y los controladores de mano activos y los almacena en un búfer interno.</span><span class="sxs-lookup"><span data-stu-id="8c39c-118">[`InputRecordingService`](xref:Microsoft.MixedReality.Toolkit.Input.InputRecordingService) takes data from the main camera transform and active hand controllers and stores it in an internal buffer.</span></span> <span data-ttu-id="8c39c-119">Cuando se solicitan, estos datos se serializan en archivos binarios para su almacenamiento y posterior reproducción.</span><span class="sxs-lookup"><span data-stu-id="8c39c-119">When requested this data is then serialized into binary files for storage and later replay.</span></span>

<a target="_blank" href="../images/input-simulation/MRTK_InputAnimation_RecordingDiagram.png">
  <img src="../images/input-simulation/MRTK_InputAnimation_RecordingDiagram.png" title="Animación de entrada de grabación" width="80%" alt="Recording diagram" class="center" />
</a>

<span data-ttu-id="8c39c-121">Para iniciar la grabación de la entrada, llame a [`StartRecording`](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputRecordingService.StartRecording) la función .</span><span class="sxs-lookup"><span data-stu-id="8c39c-121">To start recording input call the [`StartRecording`](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputRecordingService.StartRecording) function.</span></span> <span data-ttu-id="8c39c-122">[`StopRecording`](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputRecordingService.StopRecording) pausará la grabación (pero no descartará los datos registrados hasta ahora, use [`DiscardRecordedInput`](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputRecordingService.DiscardRecordedInput) para hacerlo si es necesario).</span><span class="sxs-lookup"><span data-stu-id="8c39c-122">[`StopRecording`](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputRecordingService.StopRecording) will pause recording (but not discard the data recorded so far, use [`DiscardRecordedInput`](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputRecordingService.DiscardRecordedInput) to do this if needed).</span></span>

<span data-ttu-id="8c39c-123">De forma predeterminada, el tamaño del búfer de grabación está limitado a 30 segundos.</span><span class="sxs-lookup"><span data-stu-id="8c39c-123">By default the size of the recording buffer is limited to 30 seconds.</span></span> <span data-ttu-id="8c39c-124">Esto permite que el servicio de grabación mantenga la grabación en segundo plano sin acumular demasiados datos y, a continuación, guarde los últimos 30 segundos cuando sea necesario.</span><span class="sxs-lookup"><span data-stu-id="8c39c-124">This allows the recording service to keep recording in the background without accumulating too much data, and then save the last 30 seconds when required.</span></span> <span data-ttu-id="8c39c-125">El intervalo de tiempo se puede cambiar mediante la [`RecordingBufferTimeLimit`](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputRecordingService.RecordingBufferTimeLimit) propiedad o la grabación puede ser ilimitada mediante la opción [`UseBufferTimeLimit`](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputRecordingService.UseBufferTimeLimit) .</span><span class="sxs-lookup"><span data-stu-id="8c39c-125">The time interval can be changed using the [`RecordingBufferTimeLimit`](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputRecordingService.RecordingBufferTimeLimit) property, or recording can be unlimited using the [`UseBufferTimeLimit`](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputRecordingService.UseBufferTimeLimit) option.</span></span>

<span data-ttu-id="8c39c-126">Los datos del búfer de grabación se pueden guardar en un archivo binario mediante [la función SaveInputAnimation.](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputRecordingService.SaveInputAnimation*)</span><span class="sxs-lookup"><span data-stu-id="8c39c-126">The data in the recording buffer can be saved in a binary file using the [SaveInputAnimation](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputRecordingService.SaveInputAnimation*) function.</span></span>

<span data-ttu-id="8c39c-127">Para obtener más información sobre el formato de archivo binario, vea [Especificación de formato de archivo de animación de entrada](input-animation-file-format.md).</span><span class="sxs-lookup"><span data-stu-id="8c39c-127">For details on the binary file format see [Input Animation File Format Specification](input-animation-file-format.md).</span></span>

### <a name="input-playback-service"></a><span data-ttu-id="8c39c-128">Servicio de reproducción de entrada</span><span class="sxs-lookup"><span data-stu-id="8c39c-128">Input playback service</span></span>

<span data-ttu-id="8c39c-129">[`InputPlaybackService`](xref:Microsoft.MixedReality.Toolkit.Input.InputPlaybackService) lee un archivo binario con datos de animación de entrada y, a continuación, aplica estos datos a través de [InputSimulationService](xref:Microsoft.MixedReality.Toolkit.Input.InputSimulationService) para volver a crear los movimientos registrados.</span><span class="sxs-lookup"><span data-stu-id="8c39c-129">[`InputPlaybackService`](xref:Microsoft.MixedReality.Toolkit.Input.InputPlaybackService) reads a binary file with input animation data and then applies this data through the [InputSimulationService](xref:Microsoft.MixedReality.Toolkit.Input.InputSimulationService) to recreate the recorded movements.</span></span>

<a target="_blank" href="../images/input-simulation/MRTK_InputAnimation_PlaybackDiagram.png">
  <img src="../images/input-simulation/MRTK_InputAnimation_PlaybackDiagram.png" title="Reproducción de la animación de entrada" width="80%" alt="Play Back diagram" class="center" />
</a>

<span data-ttu-id="8c39c-131">Para empezar a reproducir la animación de entrada, se debe cargar desde un archivo mediante la [función LoadInputAnimation.](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputPlaybackService.LoadInputAnimation*)</span><span class="sxs-lookup"><span data-stu-id="8c39c-131">To start playing back input animation it should be loaded from a file using the [LoadInputAnimation](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputPlaybackService.LoadInputAnimation*) function.</span></span>

<span data-ttu-id="8c39c-132">Llame [a Reproducir,](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputPlaybackService.Play) [Pausar](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputPlaybackService.Play) [o Detener](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputPlaybackService.Stop) para controlar la reproducción de animación.</span><span class="sxs-lookup"><span data-stu-id="8c39c-132">Call [Play](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputPlaybackService.Play), [Pause](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputPlaybackService.Play), or [Stop](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputPlaybackService.Stop) to control the animation playback.</span></span>

<span data-ttu-id="8c39c-133">El tiempo de animación actual también se puede controlar directamente con la [propiedad LocalTime.](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputPlaybackService.LocalTime)</span><span class="sxs-lookup"><span data-stu-id="8c39c-133">The current animation time can also be controlled directly with the [LocalTime](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputPlaybackService.LocalTime) property.</span></span>

> [!WARNING]
> <span data-ttu-id="8c39c-134">El bucle o el restablecimiento de la animación o configuración de entrada directamente mediante la limpieza de la escala de tiempo puede producir resultados inesperados [`LocalTime`](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputPlaybackService.LocalTime) al manipular la escena.</span><span class="sxs-lookup"><span data-stu-id="8c39c-134">Looping or resetting input animation or setting [`LocalTime`](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputPlaybackService.LocalTime) directly by scrubbing the timeline may yield unexpected results when manipulating the scene!</span></span> <span data-ttu-id="8c39c-135">Solo se registran los movimientos de entrada, no se restablecerán los cambios adicionales, como mover objetos o voltear conmutadores.</span><span class="sxs-lookup"><span data-stu-id="8c39c-135">Only the input movements are recorded, any additional changes such as moving objects or flipping switches will not be reset.</span></span> <span data-ttu-id="8c39c-136">Asegúrese de volver a cargar la escena si se han realizado cambios irreversibles.</span><span class="sxs-lookup"><span data-stu-id="8c39c-136">Make sure to reload the scene if irreversible changes have been made.</span></span>

### <a name="editor-tools-for-recording-and-playing-input-animation"></a><span data-ttu-id="8c39c-137">Herramientas del editor para grabar y reproducir animaciones de entrada</span><span class="sxs-lookup"><span data-stu-id="8c39c-137">Editor tools for recording and playing input animation</span></span>

<span data-ttu-id="8c39c-138">Existen varias herramientas en el editor de Unity para grabar y examinar la animación de entrada.</span><span class="sxs-lookup"><span data-stu-id="8c39c-138">A number of tools exist in the Unity editor for recording and examining input animation.</span></span> <span data-ttu-id="8c39c-139">Se puede acceder a estas herramientas en la ventana herramientas de simulación de entrada [,](input-simulation-service.md#input-simulation-tools-window)que se puede abrir desde el menú Mixed Reality Toolkit > Utilities > Input Simulation (Simulación _de_ entrada).</span><span class="sxs-lookup"><span data-stu-id="8c39c-139">These tools can be accessed in the [input simulation tools window](input-simulation-service.md#input-simulation-tools-window), which can be opened from the _Mixed Reality Toolkit > Utilities > Input Simulation_ menu.</span></span>

> [!NOTE]
> <span data-ttu-id="8c39c-140">La grabación y reproducción de entrada solo funcionan durante el modo de reproducción.</span><span class="sxs-lookup"><span data-stu-id="8c39c-140">Input recording and playback only works during play mode.</span></span>

<span data-ttu-id="8c39c-141">La ventana de grabación de entrada tiene dos modos:</span><span class="sxs-lookup"><span data-stu-id="8c39c-141">The input recording window has two modes:</span></span>

* <span data-ttu-id="8c39c-142">_Grabación para_ grabar la entrada durante el modo de reproducción y guardarla en archivos de animación.</span><span class="sxs-lookup"><span data-stu-id="8c39c-142">_Recording_ for recording input during play mode and saving it to animation files.</span></span>

  <span data-ttu-id="8c39c-143">Al alternar en el botón de grabación, [`InputRecordingService`](xref:Microsoft.MixedReality.Toolkit.Input.InputRecordingService) está habilitado para grabar la entrada.</span><span class="sxs-lookup"><span data-stu-id="8c39c-143">When toggling on the recording button the [`InputRecordingService`](xref:Microsoft.MixedReality.Toolkit.Input.InputRecordingService) is enabled to record input.</span></span>
  <span data-ttu-id="8c39c-144">Al desactivar el botón de grabación, se muestra una selección de guardado de archivo y la animación de entrada registrada se guarda en el destino seleccionado.</span><span class="sxs-lookup"><span data-stu-id="8c39c-144">When toggling off the recording button a file save selection is shown and the recorded input animation is saved to the selected destination.</span></span>

  <span data-ttu-id="8c39c-145">El límite de tiempo del búfer también se puede cambiar en este modo.</span><span class="sxs-lookup"><span data-stu-id="8c39c-145">The buffer time limit can also be changed in this mode.</span></span>

* <span data-ttu-id="8c39c-146">_Reproducción para_ cargar archivos de animación y volver a crear la entrada a través del sistema de simulación de entrada.</span><span class="sxs-lookup"><span data-stu-id="8c39c-146">_Playback_ for loading animation files and then recreating input through the input simulation system.</span></span>

  <span data-ttu-id="8c39c-147">Primero se debe cargar una animación en este modo.</span><span class="sxs-lookup"><span data-stu-id="8c39c-147">An animation must be loaded in this mode first.</span></span> <span data-ttu-id="8c39c-148">Después de grabar la entrada en modo de grabación, la animación resultante se carga automáticamente.</span><span class="sxs-lookup"><span data-stu-id="8c39c-148">After recording input in recording mode the resulting animation is automatically loaded.</span></span> <span data-ttu-id="8c39c-149">También puede hacer clic en el botón "Cargar" para seleccionar un archivo de animación existente.</span><span class="sxs-lookup"><span data-stu-id="8c39c-149">Alternatively click the "Load" button to select an existing animation file.</span></span>

  <span data-ttu-id="8c39c-150">Los botones de control de tiempo de izquierda a derecha son:</span><span class="sxs-lookup"><span data-stu-id="8c39c-150">The time control buttons from left to right are:</span></span>

  * <span data-ttu-id="8c39c-151">_Restablezca_ la hora de reproducción al inicio de la animación.</span><span class="sxs-lookup"><span data-stu-id="8c39c-151">_Reset_ the playback time to the start of the animation.</span></span>
  * <span data-ttu-id="8c39c-152">_Reproducir animación_ continuamente a lo largo del tiempo.</span><span class="sxs-lookup"><span data-stu-id="8c39c-152">_Play_ animation continuously over time.</span></span>
  * <span data-ttu-id="8c39c-153">_Avance_ un paso.</span><span class="sxs-lookup"><span data-stu-id="8c39c-153">_Step_ forward one time step.</span></span>

  <span data-ttu-id="8c39c-154">El control deslizante también se puede usar para limpiar la escala de tiempo de animación.</span><span class="sxs-lookup"><span data-stu-id="8c39c-154">The slider can also be used to scrub through the animation timeline.</span></span>

> [!WARNING]
> <span data-ttu-id="8c39c-155">El bucle o el restablecimiento de la animación de entrada o la limpieza de la escala de tiempo pueden producir resultados inesperados al manipular la escena.</span><span class="sxs-lookup"><span data-stu-id="8c39c-155">Looping or resetting input animation or scrubbing the timeline may yield unexpected results when manipulating the scene!</span></span> <span data-ttu-id="8c39c-156">Solo se registran los movimientos de entrada, no se restablecerán los cambios adicionales, como mover objetos o voltear conmutadores.</span><span class="sxs-lookup"><span data-stu-id="8c39c-156">Only the input movements are recorded, any additional changes such as moving objects or flipping switches will not be reset.</span></span> <span data-ttu-id="8c39c-157">Asegúrese de volver a cargar la escena si se han realizado cambios irreversibles.</span><span class="sxs-lookup"><span data-stu-id="8c39c-157">Make sure to reload the scene if irreversible changes have been made.</span></span>
